(function(e){function t(t){for(var s,r,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},o={app:0},a=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0469":function(e,t,n){"use strict";var s=n("f495"),o=n.n(s);o.a},2395:function(e,t,n){},2441:function(e,t,n){"use strict";var s=n("43e5"),o=n.n(s);o.a},4291:function(e,t,n){"use strict";var s=n("bcab"),o=n.n(s);o.a},"43e5":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],r={mounted:function(){this.$Message.config({background:!0,duration:3})}},i=r,c=(n("7c55"),n("2877")),l=Object(c["a"])(i,o,a,!1,null,null,null),u=l.exports,d=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Form",{ref:"formInline",attrs:{model:e.formInline,inline:""}},[n("FormItem",{staticClass:"formitem",attrs:{prop:"user"}},[n("Input",{attrs:{type:"text",placeholder:"账号"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),n("FormItem",{staticClass:"formitem",attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary",size:"small"},on:{click:e.handleLogin}},[e._v("添加账号")])],1),n("FormItem",[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.showSkillMap=!0}}},[e._v("技能图鉴")])],1),n("FormItem",[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.showMonsterMap=!0}}},[e._v("怪物图鉴")])],1),n("FormItem",[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.showScreensContent=!0}}},[e._v("副本资料")])],1),n("FormItem",[e._v(" 弹幕 "),n("i-switch",{model:{value:e.openDm,callback:function(t){e.openDm=t},expression:"openDm"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),n("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])],1),n("FormItem",[e.openDm?n("Input",{attrs:{search:"","enter-button":"发送",placeholder:"快来发送弹幕吧"},on:{"on-search":e.handleSendChat},model:{value:e.sendMsg,callback:function(t){e.sendMsg=t},expression:"sendMsg"}}):e._e()],1),n("FormItem",[e._v(" 无限挂机 "),n("i-switch",{model:{value:e.forever,callback:function(t){e.forever=t},expression:"forever"}})],1),n("br")],1),n("div",{staticClass:"card-container"},[n("Row",{attrs:{gutter:8}},e._l(e.userList,(function(t,s){return n("Col",{key:t.email,attrs:{xs:24,md:12,xl:8,xxl:8}},[n("Card",{staticClass:"card",attrs:{title:t.email}},[n("div",{attrs:{slot:"extra"},slot:"extra"},[t.isLogin?n("a",{on:{click:function(t){return e.handleReload(s)}}},[e._v("重新加载")]):e._e(),e._v(" "),t.isLogin?n("a",{on:{click:function(e){t.isLogin=!1}}},[e._v("登出")]):e._e(),e._v(" "),t.isLogin?e._e():n("a",{on:{click:function(e){t.isLogin=!0}}},[e._v("登入")]),e._v(" "),n("a",{on:{click:function(n){return e.deleteUser(t.email)}}},[e._v("删除")])]),t.isLogin?n("iframe",{ref:"userFrame",refInFor:!0,attrs:{src:e.baseUrl+"#/user/"+t.email},on:{load:function(t){return e.frameLoad(s)}}}):e._e()])],1)})),1)],1),n("div",e._l(e.msgDm,(function(t){return n("Tag",{key:t.key,staticClass:"dm",style:{top:32*t.top+"px",display:e.openDm?"block":"none"},attrs:{color:t.color,size:"large"}},[e._v(" "+e._s(t.nickname||"系统")+"："),n("label",{domProps:{innerHTML:e._s(t.msg)}})])})),1),n("Drawer",{attrs:{mask:!1,width:"300px",title:"技能图鉴"},model:{value:e.showSkillMap,callback:function(t){e.showSkillMap=t},expression:"showSkillMap"}},[n("SkillMapComponent",{attrs:{skillMap:e.skillMap}})],1),n("Drawer",{attrs:{mask:!1,width:"400px",title:"副本资料",placement:"left"},model:{value:e.showScreensContent,callback:function(t){e.showScreensContent=t},expression:"showScreensContent"}},[n("ScreensComponent",{attrs:{screens:e.screens}})],1),n("Drawer",{attrs:{mask:!1,width:"675px",title:"宠物图鉴",draggable:""},model:{value:e.showMonsterMap,callback:function(t){e.showMonsterMap=t},expression:"showMonsterMap"}},[e.showMonsterMap?n("MonsterMapComponent",{attrs:{skillMap:e.skillMap}}):e._e()],1)],1)},p=[],f=(n("99af"),n("7db0"),n("c740"),n("4160"),n("caad"),n("c975"),n("d81d"),n("45fc"),n("a434"),n("b0c0"),n("b64b"),n("2532"),n("159b"),n("96cf"),n("1da1")),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[0===e.screens.length?n("p",[e._v("你得至少登录一个账号，我才能拿到数据")]):e._e(),e._l(e.screens,(function(t){return n("Card",{key:t._id,staticStyle:{"margin-bottom":"8px"},attrs:{title:t.name}},[n("p",[e._v("队伍最大人数："+e._s(t.player_num))]),n("p",[e._v("怪物等级："+e._s(t.min_level)+" ~ "+e._s(t.max_level))]),n("p",[e._v("出没怪物： "),e._l(t.monster,(function(s,o){return n("Tag",{key:o+"-"+s,attrs:{color:"magenta"}},[e._v(" "+e._s(e.getMonster(s,t.name))+" ")])}))],2),n("p",[e._v("掉落物品： "),e._l(t.must_goods,(function(t){return n("Tag",{key:"must-"+t._id,attrs:{color:"purple"}},[e._v(" "+e._s(t.name)+"[100%] ")])})),e._l(t.random_goods,(function(s,o){return n("Tag",{key:s._id,attrs:{color:"cyan"}},[e._v(" "+e._s(s.name)+"["+e._s(100*t.random_arr[o].rate)+"%] ")])}))],2)])}))],2)},g=[],v={name:"screens",props:{screens:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{getMonster:function(e,t){var n=window.monsterData.data.find((function(t){return t._id===e}));return n?(n.map=t,n.name):"无数据"}}},y=v,k=Object(c["a"])(y,h,g,!1,null,"046cba22",null),_=k.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Form",{ref:"formInline",attrs:{inline:""}},[n("FormItem",[n("Select",{attrs:{filterable:"",multiple:"",placeholder:"怪物包含的技能"},model:{value:e.monsterSearch.skills,callback:function(t){e.$set(e.monsterSearch,"skills",t)},expression:"monsterSearch.skills"}},e._l(e.skillMap,(function(t,s){return n("Option",{key:s,attrs:{value:s}},[e._v(e._s(s))])})),1)],1),n("FormItem",[n("Select",{attrs:{multiple:"",placeholder:"怪物品质"},model:{value:e.monsterSearch.rare,callback:function(t){e.$set(e.monsterSearch,"rare",t)},expression:"monsterSearch.rare"}},e._l(e.rareType,(function(t,s){return n("Option",{key:t,attrs:{value:s}},[e._v(e._s(t))])})),1)],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:e.handlerSearchMonster}},[e._v("搜索")])],1)],1),0===e.monsterMap.length?n("h1",[e._v("没有结果，你得重新搜索")]):e._e(),e._l(e.monsterMap,(function(t){return n("Card",{key:t._id,staticStyle:{margin:"0 8px 8px 0",display:"inline-block",width:"200px","vertical-align":"top"},attrs:{title:t.name}},[n("p",[e._v("等级："+e._s(t.level||"作者没写"))]),n("p",[e._v("出没副本："+e._s(t.map||"作者没写"))]),n("p",[e._v("成长："+e._s(t.growing_num))]),n("p",[e._v("品质："+e._s(e.rareType[t.type]))]),n("p",[e._v("躲避资质："+e._s(t.dodge_zz))]),n("p",[e._v("攻击资质："+e._s(t.str_zz))]),n("p",[e._v("法力资质："+e._s(t.int_zz))]),n("p",[e._v("体力资质："+e._s(t.con_zz))]),n("p",[e._v("防御资质："+e._s(t.vit_zz))]),n("p",[e._v("速度资质："+e._s(t.speed_zz))]),n("p",[e._v("躲避资质："+e._s(t.dodge_zz))]),t.skill&&t.skill.length>0?[n("p",[e._v("携带技能：")]),e._l(t.skill,(function(s){return n("Tooltip",{key:""+t._id+s._id,attrs:{"word-wrap":""}},[n("Tag",{attrs:{color:"primary",type:"border"}},[e._v(" "+e._s(s.name)+" ")]),n("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(s.info)+" ")])],1)}))]:e._e()],2)}))],2)},M=[],H=(n("4de4"),{name:"monster-map",props:{skillMap:{type:Object,default:function(){return{}}}},data:function(){return{monsterMap:[],monsterSearch:{}}},methods:{handlerSearchMonster:function(){var e=window.monsterData.data,t=this.monsterSearch,n=t.skills,s=t.rare;this.monsterMap=e.filter((function(e){var t=!0;return s&&s.length>0&&(t=s.includes(e.type)),t&&n&&n.length>0&&(t=!!e.skill&&e.skill.some((function(e){return n.includes(e.name)}))),t})).sort((function(e,t){return e.growing_num-t.growing_num}))}}}),w=H,S=Object(c["a"])(w,b,M,!1,null,"a6e8c57e",null),T=S.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",{staticStyle:{"padding-bottom":"16px"}},[e._v(" 筛选： "),n("Dropdown",{on:{"on-click":function(t){return e.skillType=t}}},[n("a",[e._v(" "+e._s(e.skillType)+" ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"全部"}},[e._v("全部")]),n("DropdownItem",{attrs:{name:"物理"}},[e._v("物理")]),n("DropdownItem",{attrs:{name:"魔法"}},[e._v("魔法")]),n("DropdownItem",{attrs:{name:"治疗"}},[e._v("治疗")]),n("DropdownItem",{attrs:{name:"被动"}},[e._v("被动")])],1)],1)],1),e._l(e.skillList,(function(t){return n("Card",{key:t.name,staticStyle:{"margin-bottom":"8px"},attrs:{title:t.name}},[n("p",[e._v(e._s(t.info))]),n("p",[e._v(" 技能类型："+e._s(function(){var e="被动";switch(t.hurt_field){case"magic_damage":e="魔法";break;case"physical_damage":e="物理";break;case"restore_damage":e="治疗";break}return e}())+" ")]),t.unit===t.unit_highest?n("p",[e._v(" 作用单位："+e._s(t.unit)+" ")]):n("p",[e._v(" 作用单位："+e._s(t.unit)+" ~ "+e._s(t.unit_highest)+" ")]),t.real_damage?n("p",[e._v("基础伤害："+e._s(t.real_damage))]):e._e(),n("p",[e._v("伤害波动："+e._s(t.min_hurt)+" ~ "+e._s(t.max_hurt))]),t.consume_num?n("p",[e._v("消耗："+e._s(t.consume_num)+"魔法")]):e._e(),n("p",[e._v("加入时间："),n("Time",{attrs:{time:t.created_at}})],1)])}))],2)},P=[],C={name:"skill-map",props:{skillMap:{type:Object,default:function(){return{}}}},data:function(){return{skillType:"技能类型"}},computed:{skillList:function(){var e=this,t=Object.keys(this.skillMap).map((function(t){return e.skillMap[t]})).sort((function(e,t){return e.level-t.level}));switch(this.skillType){case"物理":t=t.filter((function(e){return"physical_damage"===e.hurt_field}));break;case"魔法":t=t.filter((function(e){return"magic_damage"===e.hurt_field}));break;case"治疗":t=t.filter((function(e){return"restore_damage"===e.hurt_field}));break;case"被动":t=t.filter((function(e){return!e.hurt_field}));break}return t}}},I=C,$=Object(c["a"])(I,x,P,!1,null,"2e321d12",null),G=$.exports,U=(n("a9e3"),n("d3b7"),n("2909")),O={core:{ext_url:"https://github.com/imdong/YunDingOnlineSDK/raw/master/auto_login.user.js",official_login:"http://yundingxx.com:3366/login"},maps:window.globalMaps},E=function(e){var t=Number(Date.now());return new Promise((function(n){(function s(){setTimeout((function(){var o;"function"===typeof e&&(o=!e()),"number"===typeof e&&(o=Number(Date.now())-t<e),o?s():n()}),10)})()}))},L=function(e,t){var n=O.maps,s=[];function o(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=n.find((function(t){return t.id===e})),i=r.up,c=r.next,l=i.concat(c);a.length>0&&!l.some((function(e){return e===a[a.length-1]}))||l.filter((function(e){return!a.some((function(t){return t===e}))})).map((function(n){n!==t?o(n,[].concat(Object(U["a"])(a),[e])):s.push([].concat(Object(U["a"])(a),[e,n]))}))}o(e);var a=s.sort((function(e,t){return e.length-t.length}))[0];return a.splice(0,1),a.map((function(e){return n.find((function(t){return t.id===e}))}))},D=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=parseInt(Math.random()*(n-t+1)+t,10);return s.length>=n-t?null:(s.includes(o)&&(o=e(t,n,s)),o)},F=(Date.now(),{name:"Home",components:{ScreensComponent:_,MonsterMapComponent:T,SkillMapComponent:G},data:function(){return{randomNum:D,baseUrl:"".concat(location.origin).concat(location.pathname),formInline:{user:"",password:""},userList:[],openDm:!0,msgList:[],msgDm:[],sendMsg:"",dmline:0,showSkillMap:!1,skillMap:{},showMonsterMap:!1,showScreensContent:!1,screens:[],dayPlan:[],forever:!1,dayPlanOptions:[{label:"荆棘之海",value:"5eecd6110ec93271652d2940",isDone:[]},{label:"每日冒险",value:"5eef5927a447f4ad9b833648",isDone:[]},{label:"深渊幻镜",value:"5ef9ff6669e97e5e22ccd5c5",isDone:[]},{label:"宝藏山",value:"5efe93c6075268219ac2e630",isDone:[]},{label:"鹊仙桥",value:"5f44e054e7c88d4126a9df14",isDone:[]}]}},watch:{"msgList.length":{deep:!0,handler:function(e){if(0!==e){var t=this.msgList[e-1];this.msgDm.some((function(e){return e.msg===t.msg}))||(t.top=this.randomNum(0,this.dmline),t.color=this.getDmColor(t),this.msgDm.push(t))}}}},mounted:function(){var e=this,t=this.getStorageUser(),n=[];Object.keys(t).forEach((function(e){n.push({email:e,isLogin:!0,password:t[e]})})),this.userList=n,this.dmline=Math.floor(window.document.body.offsetHeight/36)-1,window.addEventListener("resize",(function(){e.dmline=Math.floor(window.document.body.offsetHeight/36)-1}));var s=Date.now(),o=0,a=[],r=[];setInterval((function(){if(e.forever){Date.now()-s>864e5&&(e.dayPlanOptions.map((function(e){return e.isDone=[]})),s=Date.now());var t=e.dayPlan,n=e.dayPlanOptions,i=e.$refs["userFrame"];i.map((function(s){var i=s.contentWindow,c=i.user,l=i.game;if(c&&l){if(c.team){if(c.isleader){var u=a.findIndex((function(e){return e==c.email}));if(u>-1)return l.leaveTeam(),void a.splice(u,1);var d=r.findIndex((function(e){return e==c.email}));if(d>-1&&(r.splice(d,1),5===c.team.users.length))return l.showMyTeam(1),void s.contentWindow.location.reload();if(c.combatName||(c.team.combat=c.tempcombat,l.switchCombatScreen(c.tempcombat),c.fighting=!0,l.startCombat(c.team.combat)),c.combatId&&(5===c.team.users.length?l.showMyTeam(0):l.showMyTeam(1)),t.length){var m=n.find((function(e){return t.includes(e.value)&&!e.isDone.includes(c.email)}));if(m){if(c.message&&c.message.msg){var p=c.message.msg[c.message.msg.length-1];p.indexOf("达挑战上限，无奖励")>-1&&(c.team.combat==m.value?m.isDone.push(c.email):o>4&&(m.isDone.push(c.email),o=0))}e.$Message.info("【".concat(c.email,"】正在执行每日计划【").concat(m.label,"】")),c.combatId?(c.tempcombatid=m.value,o++):c.team.combat!=m.value&&(c.team.combat=m.value,l.switchCombatScreen(m.value))}else c.combatId?delete c.tempcombatid:c.team.combat!=c.tempcombat&&(c.team.combat=c.tempcombat,l.switchCombatScreen(c.tempcombat))}}}else if(c.map&&(c.isleader&&l.createdTeam(c.map.id),c.teamleader&&(l.getTeamList(c.map.id),c.teams))){var f=c.teams.find((function(e){return e.leader.nickname===c.teamleader}));f?f.users.length==(f.combat||{}).player_num?c.teamleader.includes(c.teamleader)||a.includes(c.teamleader)||a.push(c.teamleader):l.addTeam(f._id):r.includes(c.teamleader)||r.push(c.teamleader)}"leave"===c.teamStatus&&s.contentWindow.location.reload()}}))}}),12e3);var i=window.monsterData.data,c={};i.map((function(e){e.skill&&e.skill.map((function(e){c[e.name]=e}))})),this.skillMap=c},methods:{frameLoad:function(e){0==e&&(this.msgList=this.$refs["userFrame"][0].contentWindow.chatMsg,this.screens=this.$refs["userFrame"][0].contentWindow.screens)},getDmColor:function(e){var t=this;return setTimeout((function(){var n=t.msgDm.findIndex((function(t){return t.key==e.key}));t.msgDm.splice(n,1)}),2e4),0==e.channel?"volcano":e.nickname==this.userList[0].email?"primary":"success"},handleSendChat:function(){this.$refs["userFrame"][0].contentWindow.game.chatSend(this.sendMsg),this.sendMsg=""},handleLogin:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.formInline,n.user&&n.password){t.next=4;break}return e.$Message.error("账号密码没填好"),t.abrupt("return");case 4:e.onAddUser(n.user,n.password);case 5:case"end":return t.stop()}}),t)})))()},saveStorageUser:function(e,t){var n=this.getStorageUser();"undefined"==typeof t?(delete n[e],localStorage.removeItem(e)):n[e]=t,localStorage.setItem("ydxxGame_userList",JSON.stringify(n))},getStorageUser:function(e){var t=JSON.parse(localStorage.getItem("ydxxGame_userList")||"{}")||{};return e?t[e]||null:t},onAddUser:function(e,t){this.saveStorageUser(e,t),this.userList.push({email:e,isLogin:!0,password:t})},handleReload:function(e){this.$refs["userFrame"][e].contentWindow.location.reload()},deleteUser:function(e){var t=this.userList.find((function(t){return t.email===e})),n=this.userList.indexOf(t);this.userList.splice(n,1),this.saveStorageUser(e)}}}),B=F,j=(n("de16"),n("c1e2"),Object(c["a"])(B,m,p,!1,null,"6a0e8444",null)),N=j.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("div",{staticClass:"user"},[n("p",[e._v(" 状态："+e._s(e.user.status)+" "+e._s(e.user.status_msg)+" "),n("ButtonGroup",{attrs:{size:"small",shape:"circle"}},[n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="装备信息",e.modalType="Eqs",e.showModal=!0}}},[e._v(" 装备 ")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="人物属性",e.modalType="Userinfo",e.showModal=!0}}},[e._v(" 属性 ")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="战斗收益",e.modalType="Gains",e.showModal=!0}}},[e._v(" 收益 ")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="宠物信息",e.modalType="Pet",e.showModal=!0}}},[e._v("宠物")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="人物技能",e.modalType="Skills",e.showModal=!0}}},[e._v("技能")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="任务中心",e.modalType="Tasks",e.showModal=!0}}},[e._v("任务")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="市场",e.modalType="Market",e.showModal=!0}}},[e._v("市场")]),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="商城",e.modalType="Shop",e.showModal=!0}}},[e._v("商城")])],1)],1),e.user.myInfo?[n("div",{staticClass:"br"}),n("p",[e._v(" LV."+e._s(e.user.myInfo.level)+" ["+e._s(Math.floor(e.user.myInfo.exp))+"/"+e._s(Math.floor(e.user.myInfo.nextExp))+"] "),e.user.myInfo.exp>e.user.myInfo.nextExp?n("a",{on:{click:function(t){return e.game.upPlayerLevel()}}},[e._v("升级")]):e._e(),e._v(" "),e.user.myInfo.potential_num>0?n("Dropdown",{attrs:{trigger:"click"}},[n("Button",{attrs:{size:"small",type:"info"}},[e._v(" 加点 ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{nativeOn:{click:function(t){return e.handleAllocationPoint(1)}}},[e._v("全力加点")]),n("DropdownItem",{nativeOn:{click:function(t){return e.handleAllocationPoint(2)}}},[e._v("全魔加点")])],1)],1):e._e()],1),n("div",{staticClass:"br"}),n("p",[e._v(" 财产："+e._s(Math.floor(e.user.myInfo.game_gold))+"仙石 "+e._s(Math.floor(e.user.myInfo.game_silver))+"灵石 "),n("Button",{attrs:{size:"small",type:"info"},on:{click:function(){e.modalTitle="储物戒指",e.modalType="Bag",e.showModal=!0}}},[e._v(" 储物戒指 ")])],1),n("div",{staticClass:"br"}),n("p",[e._v(" 气血储备："+e._s(Math.floor(e.user.myInfo.hp_store))+" 魔法储备："+e._s(Math.floor(e.user.myInfo.mp_store))+" 活力："+e._s(Math.floor(e.user.myInfo.vitality_num))+" "),n("a",{on:{click:function(t){return e.game.polyLin(3)}}},[e._v("仙蕴转活力")])])]:e._e(),e.unusecbt?[e.unusecbt.normal?[n("div",{staticClass:"br"}),e._v(" 检测到你有 "),n("span",{staticStyle:{color:"red"}},[e._v(e._s(e.unusecbt.normal.num))]),e._v(" 张没鉴定的 "),n("span",{staticStyle:{color:"red"}},[e._v("藏宝图")]),e._v(" ["),n("a",{on:{click:function(){e.game.useGoods(e.unusecbt.normal.id)}}},[e._v("鉴定一张")]),e._v("] ["),n("a",{on:{click:function(){e.readToUse={useNum:e.unusecbt.normal.num,id:e.unusecbt.normal.id,name:"藏宝图"},e.handleUseItem()}}},[e._v("全部鉴定")]),e._v("] ")]:e._e(),e.unusecbt.high?[n("div",{staticClass:"br"}),e._v(" 检测到你有 "),n("span",{staticStyle:{color:"red"}},[e._v(e._s(e.unusecbt.high.num))]),e._v(" 张没鉴定的 "),n("span",{staticStyle:{color:"red"}},[e._v("高级藏宝图")]),e._v(" ["),n("a",{on:{click:function(){e.readToUse={useNum:e.unusecbt.high.num,id:e.unusecbt.high.id,name:"高级藏宝图"},e.handleUseItem()}}},[e._v("全部鉴定")]),e._v("] ")]:e._e()]:e._e(),e.waBao.length>0?[n("div",{staticClass:"br"}),e._v(" 检测到你有 "),n("span",{staticStyle:{color:"red"}},[e._v(e._s(e.waBao.length))]),e._v(" 张藏宝图 "),n("Button",{attrs:{size:"small",type:"info"},on:{click:e.handleAutoWaBao}},[e._v(" 自动挖宝 ")])]:e._e(),e.user.map?[n("div",{staticClass:"br"}),e._v(" 地图： "),e.user.team?n("Button",{attrs:{size:"small",type:"info",disabled:""}},[e._v(" "+e._s(e.user.map.name)+" ")]):n("Dropdown",{attrs:{trigger:"click"}},[n("Button",{attrs:{size:"small",type:"info"}},[e._v(" "+e._s(e.user.map.name)+" ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.toMap,(function(t){return n("DropdownItem",{key:t.id,nativeOn:{click:function(n){return function(){e.$Message.warning("正在切图去"+t.name+"，别乱点"),e.moveToMap(t.id).then((function(){e.$Message.success(t.name+"到了")}))}()}}},[e._v(e._s(t.name))])})),1)],1)]:e._e(),e.user.team&&e.user.team.leader===e.user.email?[e._v(" 副本： "),n("Dropdown",{attrs:{trigger:"click"}},[n("Button",{attrs:{size:"small",type:"info"}},[e._v(" "+e._s(e.user.combatName||"未选择")+" ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.user.screens,(function(t){return n("DropdownItem",{key:t._id,nativeOn:{click:function(n){return function(){e.user.team.combat=t._id,e.user.tempcombat=t._id,e.game.switchCombatScreen(t._id)}()}}},[e._v(e._s(t.name))])})),1)],1),e.user.combatId?n("Dropdown",{attrs:{trigger:"click"}},[n("Button",{attrs:{size:"small",type:"info"}},[e._v(" "+e._s(e.user.tempcombatname||"未选择")+" ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.user.screens,(function(t){return n("DropdownItem",{key:t._id,nativeOn:{click:function(n){return function(){e.user.combatId=t._id}()}}},[e._v(e._s(t.name))])})),1)],1):e._e()]:e._e(),e._v(" 队伍： "),e.user.team&&e.user.team.leader===e.user.email?[e._v(" ["+e._s(e.user.team.users.length||1)+"/"+e._s(e.user.combatTotal||"未知")+"] "),n("Button",{attrs:{size:"small",type:"error"},on:{click:function(t){e.game.leaveTeam(),e.user.isleader=!1}}},[e._v(" 解散 ")]),e._v(" "),n("i-switch",{attrs:{disabled:!e.user.combatName,"true-color":"#13ce66","false-color":"#ff4949",size:"large"},on:{"on-change":function(t){e.user.fighting&&e.game.startCombat(e.user.team.combat)}},model:{value:e.user.fighting,callback:function(t){e.$set(e.user,"fighting",t)},expression:"user.fighting"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v("战斗")]),n("span",{attrs:{slot:"close"},slot:"close"},[e._v("平时")])]),n("a",{on:{click:function(){e.game.showMyTeam(0)}}},[e._v("隐藏")])]:e.user.team?[e._v(" 队长["+e._s(e.user.team.leader)+"] "),n("Button",{attrs:{size:"small",type:"warning"},on:{click:function(){e.game.leaveTeam(),delete e.user.teamleader}}},[e._v(" 离开 ")])]:[n("Button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.game.createdTeam(e.user.map.id),e.user.isleader=!0}}},[e._v(" 创建 ")]),e._v(" "),n("Dropdown",{attrs:{trigger:"click"},nativeOn:{click:function(t){return e.game.getTeamList(e.user.map.id)}}},[n("Button",{attrs:{size:"small",type:"success"}},[e._v(" 加入 ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.user.teams,(function(t){return n("DropdownItem",{key:t._id,nativeOn:{click:function(n){return function(){e.game.addTeam(t._id),e.user.teamleader=t.leader.nickname}()}}},[e._v(" "+e._s(t.leader.nickname)+" ["+e._s(t.users.length)+"/"+e._s((t.combat||{}).player_num)+"] ("+e._s((t.combat||{}).name)+") ")])})),1)],1)],n("div",{staticClass:"br"}),e._v(" 技能： "),e.user.skills?n("Dropdown",{attrs:{trigger:"click"}},[n("Button",{attrs:{size:"small",type:"warning"}},[e._v(" "+e._s(e.user.skillname||"物理攻击")+" ")]),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[0===e.user.skills.length?n("DropdownItem",[e._v(" 没技能 ")]):e._e(),e._l(e.user.skills,(function(t){return n("DropdownItem",{key:t._id,nativeOn:{click:function(n){return function(){e.$set(e.user,"skillid",t._id),e.$set(e.user,"skillname",t.name)}()}}},[e._v(e._s(t.name))])}))],2)],1):e._e(),e.user&&e.game?n("PetCatchCtrlComponent",{attrs:{user:e.user,game:e.game}}):e._e(),"object"==typeof e.user.message?n("div",[e._v(" ["+e._s(e.user.message.time)+"] "+e._s("第"+e.user.message.round_num+"轮")+" "),e.user.message.mark?n("div",{domProps:{innerHTML:e._s(e.user.message.mark)}}):e._e(),n("div",{domProps:{innerHTML:e._s(e.user.message.msg.join("<br />"))}})]):e._e(),n("Modal",{attrs:{fullscreen:"","footer-hide":"",title:e.modalTitle},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},["Gains"===e.modalType?[e.fightGains.beginTime?[n("CellGroup",[n("Cell",{attrs:{title:"开始时间",extra:""+e.gains.beginTime}}),n("Cell",{attrs:{title:"战斗时长",extra:""+e.gains.fightTime}}),n("Cell",{attrs:{title:"获得经验",extra:""+e.gains.gainExp}}),n("Cell",{attrs:{title:"战斗回合数",extra:""+e.gains.roundCount}}),n("Cell",{attrs:{title:"战斗场数",extra:""+e.gains.fightCount}}),n("Cell",{attrs:{title:"经验/分钟",extra:""+e.gains.avgExp}}),n("Cell",{attrs:{title:"战斗场数/分钟",extra:""+e.gains.avgFightCount}}),n("Cell",{attrs:{title:"战利品"}})],1),e._l(e.gains.goods,(function(t,s){return n("Tag",{key:s,attrs:{color:"pink"}},[e._v(e._s(s)+"("+e._s(t)+")")])}))]:n("div",[e._v(" "+e._s(e.gains.tips)+" ")])]:e.modalType?n(e.modalType+"Component",{tag:"component",attrs:{user:e.user,game:e.game}}):e._e()],2)],2):e._e()},A=[],R=(n("a15b"),n("fb6a"),n("b680"),n("ac1f"),n("25f0"),n("4d90"),n("5319"),n("53ca")),q=n("c3cf"),Y=n.n(q),K=!1,W="js-websocket",J="0.0.1",Q=200,V=501,X=100,Z={gameHost:"yundingxx.com",gameProtocol:"ws",loginPort:3014,gamePort:3052,loginServer:null,gameServer:null,socketPathTpl:"{protocol}://{host}:{port}/"},ee=Y.a.Package,te=Y.a.Message,ne={replaceParams:function(e,t){return e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||e}))}},se={onLoginGame:function(e){e.code==Q?this.user_info=Object.assign(this.user_info,e.data):K&&console.error("onLoginGame",e.msg)},onSaveData:function(e){var t=this;if(e.code==Q){var n=e.data||e,s=["map","myInfo","players","userTasks","wordLogds","team","teams","screens","initData"];s.forEach((function(e){n[e]&&(t.user_info[e]=n[e],"map"==e&&(t.user_info.mid=n.map.id))}))}else K&&console.error("onLoginGame",e.msg||e)}};Object.keys(se).forEach((function(e){se[e].hookMark="Core."+e}));var oe=function(e){"object"!=Object(R["a"])(e)&&"undefined"!=typeof e||(this.config=Object.assign(Z,e)),this.initConfig()};oe.isDEBUG=function(){K=!0},oe.prototype.initConfig=function(){this.socket=null,this.isStop=!1,this.email="",this.password="",this.user_info={},this.token=null,this.config.loginServer||(this.config.loginServer=this.getSocketServer(this.config.loginPort)),this.messageHandlers=[],this.messageHandlers[ee.TYPE_HANDSHAKE]=this.onHandshake,this.messageHandlers[ee.TYPE_HEARTBEAT]=this.onHeartbeat,this.messageHandlers[ee.TYPE_DATA]=this.onData,this.messageHandlers[ee.TYPE_KICK]=this.onKick,this.reqId=1,this.heartbeatInterval=0,this.heartbeatId=null,this.heartbeatTimeoutId=null,this.heartbeatTimeout=0,this.xyUpdateIntervalId=0,this.dict={},this.abbrs={},this.protoVersion=0,this.serverProtos={},this.clientProtos={},this.initCallback=null,this.callbacks=[],this.callRoutes=[],this.hookHandlers=oe.regHookHandlers},oe.regHookHandlers={onAdd:[],onLeave:[],onChatMsg:[],onMyTeamReload:[se.onSaveData],onStartBat:[se.onSaveData],onRoundBatEnd:[],"chat.chatHandler.send":[],"connector.entryHandler.enter":[],"connector.fationHandler.applyForFation":[],"connector.fationHandler.closeUserTask":[],"connector.fationHandler.createFation":[],"connector.fationHandler.donateFationFunds":[],"connector.fationHandler.doneFationApply":[],"connector.fationHandler.getFationApply":[],"connector.fationHandler.getFationList":[],"connector.fationHandler.getFationTask":[],"connector.fationHandler.initFation":[],"connector.fationHandler.leaveFation":[],"connector.fationHandler.showFationUserList":[],"connector.fationHandler.upFation":[],"connector.fationHandler.upFationUserSkill":[console.log],"connector.fationHandler.upUserFationLevel":[],"connector.loginHandler.login":[se.onSaveData],"connector.playerHandler.byGoodsToSystem":[],"connector.playerHandler.byPalyerGoods":[],"connector.playerHandler.getCopyTask":[],"connector.playerHandler.getPlayerSellGoods":[],"connector.playerHandler.init":[],"connector.playerHandler.move":[],"connector.playerHandler.moveToNewMap":[se.onSaveData],"connector.playerHandler.nextMap":[],"connector.playerHandler.payUserTask":[],"connector.playerHandler.sellGoods":[],"connector.playerHandler.sendMsg":[],"connector.playerHandler.wearUserEquipment":[],"connector.systemHandler.getRankList":[],"connector.systemHandler.getSystemSellGoods":[],"connector.systemHandler.getSystemTask":[],"connector.systemHandler.subSystemMsg":[],"connector.teamHandler.addTeam":[],"connector.teamHandler.createdTeam":[se.onSaveData],"connector.teamHandler.getAllCombatScreen":[se.onSaveData],"connector.teamHandler.getTeamList":[se.onSaveData],"connector.teamHandler.leaveTeam":[],"connector.teamHandler.roundOperating":[],"connector.teamHandler.showMyTeam":[],"connector.teamHandler.startCombat":[],"connector.teamHandler.startCombatBoss":[],"connector.teamHandler.switchCombatScreen":[],"connector.userHandler.addUserPetSkill":[],"connector.userHandler.allSellGoods":[],"connector.userHandler.allocationPoint":[],"connector.userHandler.fbProcess":[],"connector.userHandler.fitPet":[],"connector.userHandler.forgingUserEq":[],"connector.userHandler.getMyFb":[],"connector.userHandler.getMyGoods":[],"connector.userHandler.getMyPet":[],"connector.userHandler.getMyPetSkillGoods":[],"connector.userHandler.getMySkill":[],"connector.userHandler.getMyTitle":[],"connector.userHandler.getMylogs":[],"connector.userHandler.getUserEqs":[],"connector.userHandler.getUserTask":[],"connector.userHandler.makeGoods":[],"connector.userHandler.playUserPet":[],"connector.userHandler.polyLin":[],"connector.userHandler.repairUserArms":[],"connector.userHandler.resetAttribute":[],"connector.userHandler.selectMyTitle":[],"connector.userHandler.sellGoods":[],"connector.userHandler.shelfMyGoods":[],"connector.userHandler.turnIntoPet":[],"connector.userHandler.upPlayerLevel":[],"connector.playerHandler.upLevelUserSkill":[],"connector.userHandler.upUserPetLevel":[],"connector.userHandler.updateUserPrice":[],"connector.userHandler.useGoods":[],"connector.userHandler.userInfo":[],"connector.userHandler.wbt":[],"connector.userHandler.xyDuiHuan":[],"connector.userHandler.xyUpdate":[se.onSaveData],"gate.gateHandler.queryEntry":[],"connector.userHandler.getNewPet":[]},oe.prototype.getSocketServer=function(e,t,n){return"number"!=typeof e?null:ne.replaceParams(this.config.socketPathTpl,{protocol:n||this.config.gameProtocol,host:t||this.config.gameHost,port:e})},oe.prototype.regHookHandler=function(e,t,n){if(!this.hookHandlers[e]||"function"!=typeof t)return!1;var s=t.hookMark||null;if(s&&"object"==Object(R["a"])(this.hookHandlers[e]))for(var o=0;o<this.hookHandlers[e].length;o++){var a=this.hookHandlers[e][o];if(a.hookMark&&s==a.hookMark)return a}return this.hookHandlers[e].push(t),!0},oe.prototype.start=function(){this.socket||this.createWebSocket(this.config.loginServer)},oe.prototype.createWebSocket=function(e){var t=this,n=new WebSocket(e);n.binaryType="arraybuffer";var s={open:this.onOpen,message:this.onMessage,error:this.onError,close:this.onClose};return Object.keys(s).map((function(e){n.addEventListener(e,(function(n){s[e].call(t,n)}))})),this.reqId=1,this.socket=n,n},oe.prototype.onOpen=function(e){this.handShake()},oe.prototype.onMessage=function(e){var t=ee.decode(e.data);if(t.type,Array.isArray(t))for(var n=0;n<t.length;n++){var s=t[n];this.messageHandlers.call(this,[s.type](s.body))}else this.messageHandlers[t.type].call(this,t.body);this.heartbeatTimeout&&(this.nextHeartbeatTimeout=Date.now()+this.heartbeatTimeout)},oe.prototype.onError=function(e){console.log("onError",e),setTimeout((function(){window.location.reload()}),3e4+~~(60*Math.random()*1e3))},oe.prototype.onClose=function(e){console.log("onClose",e,this.isStop),this.isStop||this.login()},oe.prototype.sendMessage=function(e,t,n){2==arguments.length&&"function"==typeof t&&(n=t,t=null);var s=Y.a.strencode(JSON.stringify(e)),o=ee.TYPE_HANDSHAKE,a=null;if("string"==typeof t){var r=0;this.dict&&this.dict[t]&&(a=this.dict[t],r=1);var i=this.reqId++%255,c=i?te.TYPE_REQUEST:te.TYPE_NOTIFY;"function"!=typeof n&&"string"!=typeof n||(this.callbacks[i]=n),this.callRoutes[i]=t,s=te.encode(i,c,r,r?a:t,s),o=ee.TYPE_DATA}var l=ee.encode(o,s);this.socket.readyState===this.socket.CLOSED&&setTimeout((function(){window.location.reload()}),3e4+~~(60*Math.random()*1e3)),this.socket.send(l)},oe.prototype.onHandshake=function(e){if(e=JSON.parse(Y.a.strdecode(e)),K&&console.log("onHandshake",e),e.code===V)throw new Error("client version not fullfill");if(e.code!==Q)throw new Error("handshake fail");var t=ee.encode(ee.TYPE_HANDSHAKE_ACK);if(this.socket.send(t),e.sys&&e.sys.heartbeat){this.heartbeatInterval=1e3*e.sys.heartbeat,this.heartbeatTimeout=2*this.heartbeatInterval;var n=e.sys.dict;if(n)for(var s in this.dict=n,this.abbrs={},n)this.abbrs[n[s]]=s}if(e.sys&&e.sys.protos){var o=e.sys.protos;o&&(this.protoVersion=o.version||0,this.serverProtos=o.server||{},this.clientProtos=o.client||{})}this.initCallback&&(this.initCallback.call(this),this.initCallback=null)},oe.prototype.onHeartbeat=function(){var e=this;if(this.heartbeatInterval){var t=ee.encode(ee.TYPE_HEARTBEAT);this.heartbeatTimeoutId&&(clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),this.heartbeatId||(this.heartbeatId=setTimeout((function(){e.heartbeatId=null,e.socket.send(t),e.nextHeartbeatTimeout=Date.now()+e.heartbeatTimeout,e.heartbeatTimeoutId=setTimeout(e.heartbeatTimeoutCb,e.heartbeatTimeout)}),this.heartbeatInterval))}},oe.prototype.heartbeatTimeoutCb=function(){var e=this.nextHeartbeatTimeout-Date.now();e>X?this.heartbeatTimeoutId=setTimeout(this.heartbeatTimeoutCb,e):K&&console.error("server heartbeat timeout")},oe.prototype.onData=function(e){var t=te.decode(e);!t.route&&t.id&&this.callRoutes[t.id]&&(t.route=this.callRoutes[t.id]),t.body=JSON.parse(Y.a.strdecode(t.body));var n=[],s=!1,o=!0;if("function"==typeof this.callbacks[t.id]){var a=this.callbacks[t.id];delete this.callbacks[t.id],"string"==typeof a.hookMark&&n.push(a.hookMark),s=!0,o=!(!1===a.call(this,t.body))}if(o&&t.route&&"object"==Object(R["a"])(this.hookHandlers[t.route]))for(var r=0;r<this.hookHandlers[t.route].length;r++){var i=this.hookHandlers[t.route][r];if("string"==typeof i.hookMark){if(n.indexOf(i.hookMark)>=0)continue;n.push(i.hookMark)}s=!0,o=!(!1===i.call(this,t.body))}s||K&&console.log("onData",t.route,t.body)},oe.prototype.onKick=function(e){K&&console.log("onKick",e)},oe.prototype.Stop=function(){this.isStop=!0,this.socket&&(this.socket.close(),this.heartbeatId&&clearInterval(this.heartbeatId),this.heartbeatTimeoutId&&clearTimeout(this.heartbeatTimeoutId),this.xyUpdateIntervalId&&clearInterval(this.xyUpdateIntervalId))},oe.prototype.handShake=function(){var e={sys:{type:W,version:J,rsa:{},protoVersion:this.protoVersion}};this.sendMessage(e)},oe.prototype.login=function(e,t,n,s){var o=e||this.email,a=t||this.password,r="gate.gateHandler.queryEntry",i={login_email:o,login_pwd:a,code:"",is_r:!0};this.initCallback=function(){this.email=o,this.password=t,this.user_info.email=o,this.sendMessage(i,r,this.onLogin)},this.start()},oe.prototype.onLogin=function(e){if(e.code!=Q)return K&&console.error("onLogin",e.msg),!0;K&&console.log("onLogin",e),this.config.gamePort=e.port,this.user_info.mid=e.mid,this.token=e.token,this.isStop=!0,this.socket.close(),this.gameServer=this.getSocketServer(e.port),this.initCallback=this.loginToken,this.createWebSocket(this.gameServer)},oe.prototype.loginToken=function(){var e=this,t="connector.loginHandler.login",n={email:this.user_info.email,token:this.token};this.onClose=!1,this.sendMessage(n,t,(function(t){if(t.code!=Q)return K&&console.error("登录到游戏服务器失败",t),void e.Stop();K&&console.log("登录到游戏服务器成功",e,t),e.xyUpdateIntervalId=setInterval((function(){e.xyUpdate()}),6e4)}))},oe.prototype.chatSend=function(e){this.sendMessage({send_channel:3,send_msg:e},"chat.chatHandler.send")},oe.prototype.xyUpdate=function(){this.sendMessage({},"connector.userHandler.xyUpdate")},oe.prototype.getMylogs=function(){this.sendMessage({},"connector.userHandler.getMylogs")},oe.prototype.getMyFb=function(){this.sendMessage({},"connector.userHandler.getMyFb")},oe.prototype.upPlayerLevel=function(){this.sendMessage({},"connector.userHandler.upPlayerLevel")},oe.prototype.upLevelUserSkill=function(e,t){this.sendMessage({type:e,id:t},"connector.playerHandler.upLevelUserSkill")},oe.prototype.fbProcess=function(e,t){this.sendMessage({type:e,id:t},"connector.userHandler.fbProcess")},oe.prototype.move=function(e,t){this.sendMessage({x:e,mid:t},"connector.playerHandler.move")},oe.prototype.nextMap=function(e){this.sendMessage({type:e},"connector.playerHandler.nextMap")},oe.prototype.moveToNewMap=function(e){this.sendMessage({mid:e},"connector.playerHandler.moveToNewMap")},oe.prototype.getAllCombatScreen=function(){this.sendMessage({},"connector.teamHandler.getAllCombatScreen")},oe.prototype.switchCombatScreen=function(e){this.sendMessage({cbatid:e},"connector.teamHandler.switchCombatScreen")},oe.prototype.getTeamList=function(e){this.sendMessage({mid:e},"connector.teamHandler.getTeamList")},oe.prototype.createdTeam=function(e){this.sendMessage({mid:e},"connector.teamHandler.createdTeam")},oe.prototype.addTeam=function(e){this.sendMessage({tid:e},"connector.teamHandler.addTeam")},oe.prototype.leaveTeam=function(){this.sendMessage({},"connector.teamHandler.leaveTeam")},oe.prototype.startCombat=function(e){this.sendMessage({cbatid:e},"connector.teamHandler.startCombat")},oe.prototype.roundOperating=function(e,t,n,s){this.sendMessage({type:e,parm:t,attack_id:n,tid:s},"connector.teamHandler.roundOperating")},oe.prototype.getMyGoods=function(e){this.sendMessage({page:e},"connector.userHandler.getMyGoods")},oe.prototype.playerSellGoods=function(e,t,n){this.sendMessage({ugid:e,game_gold:t,count:n},"connector.playerHandler.sellGoods")},oe.prototype.selectMyTitle=function(e){this.sendMessage({index:e},"connector.userHandler.selectMyTitle")},oe.prototype.getMyTitle=function(){this.sendMessage({},"connector.userHandler.getMyTitle")},oe.prototype.getMyPet=function(){this.sendMessage({},"connector.userHandler.getMyPet")},oe.prototype.wbt=function(e){this.sendMessage({ugid:e},"connector.userHandler.wbt")},oe.prototype.getCopyTask=function(e){this.sendMessage({tid:e},"connector.playerHandler.getCopyTask")},oe.prototype.getMySkill=function(){this.sendMessage({},"connector.userHandler.getMySkill")},oe.prototype.repairUserArms=function(e){this.sendMessage({type:e},"connector.userHandler.repairUserArms")},oe.prototype.getUserTask=function(){this.sendMessage({},"connector.userHandler.getUserTask")},oe.prototype.useGoods=function(e){this.sendMessage({gid:e},"connector.userHandler.useGoods")},oe.prototype.userInfo=function(){this.sendMessage({},"connector.userHandler.userInfo")},oe.prototype.wearUserEquipment=function(e){this.sendMessage({ueid:e},"connector.playerHandler.wearUserEquipment")},oe.prototype.payUserTask=function(e){this.sendMessage({utid:e},"connector.playerHandler.payUserTask")},oe.prototype.turnIntoPet=function(e){this.sendMessage({pid:e},"connector.userHandler.turnIntoPet")},oe.prototype.getSystemSellGoods=function(e){this.sendMessage({pageIndex:e},"connector.systemHandler.getSystemSellGoods")},oe.prototype.shelfMyGoods=function(e){this.sendMessage({id:e},"connector.userHandler.shelfMyGoods")},oe.prototype.getPlayerSellGoods=function(e,t){this.sendMessage({pageIndex:e||1,select:t},"connector.playerHandler.getPlayerSellGoods")},oe.prototype.byPalyerGoods=function(e,t){this.sendMessage({usgid:e,type:t},"connector.playerHandler.byPalyerGoods")},oe.prototype.byGoodsToSystem=function(e,t){this.sendMessage({id:t,type:e},"connector.playerHandler.byGoodsToSystem")},oe.prototype.getSystemTask=function(){this.sendMessage({},"connector.systemHandler.getSystemTask")},oe.prototype.subSystemMsg=function(e){this.sendMessage({status:e},"connector.systemHandler.subSystemMsg")},oe.prototype.makeGoods=function(e){this.sendMessage({arr:e},"connector.userHandler.makeGoods")},oe.prototype.sellGoods=function(e){this.sendMessage({arr:e},"connector.userHandler.sellGoods")},oe.prototype.playUserPet=function(e,t){this.sendMessage({pid:e,status:t},"connector.userHandler.playUserPet")},oe.prototype.upUserPetLevel=function(e,t,n){var s={pid:e,type:t};2==t&&(n=n||{},Object.assign(s,{str:n.str||null,int:n.int||null,agi:n.agi||null,vit:n.vit||null,con:n.con||null})),this.sendMessage(s,"connector.userHandler.upUserPetLevel")},oe.prototype.send=function(e,t){this.sendMessage({send_channel:e,send_msg:t},"chat.chatHandler.send")},oe.prototype.allocationPoint=function(e,t,n,s,o){this.sendMessage({str:e,int:t,agi:n,vit:s,con:o},"connector.userHandler.allocationPoint")},oe.prototype.getUserEqs=function(){this.sendMessage({},"connector.userHandler.getUserEqs")},oe.prototype.updateUserPrice=function(){this.sendMessage({},"connector.userHandler.updateUserPrice")},oe.prototype.showMyTeam=function(e){this.sendMessage({is_show:e},"connector.teamHandler.showMyTeam")},oe.prototype.getRankList=function(e){this.sendMessage({type:e},"connector.systemHandler.getRankList")},oe.prototype.initFation=function(){this.sendMessage({},"connector.fationHandler.initFation")},oe.prototype.createFation=function(e){this.sendMessage({name:e},"connector.fationHandler.createFation")},oe.prototype.applyForFation=function(e){this.sendMessage({fid:e},"connector.fationHandler.applyForFation")},oe.prototype.doneFationApply=function(e,t){this.sendMessage({type:e,faid:t},"connector.fationHandler.doneFationApply")},oe.prototype.upUserFationLevel=function(e,t){this.sendMessage({type:e,uid:t},"connector.fationHandler.upUserFationLevel")},oe.prototype.getFationList=function(){this.sendMessage({},"connector.fationHandler.getFationList")},oe.prototype.getFationApply=function(){this.sendMessage({},"connector.fationHandler.getFationApply")},oe.prototype.showFationUserList=function(){this.sendMessage({},"connector.fationHandler.showFationUserList")},oe.prototype.leaveFation=function(){this.sendMessage({},"connector.fationHandler.leaveFation")},oe.prototype.upFationUserSkill=function(e){this.sendMessage({type:e},"connector.fationHandler.upFationUserSkill")},oe.prototype.donateFationFunds=function(){this.sendMessage({},"connector.fationHandler.donateFationFunds")},oe.prototype.getFationTask=function(){this.sendMessage({},"connector.fationHandler.getFationTask")},oe.prototype.upFation=function(e){this.sendMessage({type:e},"connector.fationHandler.upFation")},oe.prototype.polyLin=function(e){this.sendMessage({type:e},"connector.userHandler.polyLin")},oe.prototype.closeUserTask=function(e){this.sendMessage({tid:e},"connector.fationHandler.closeUserTask")},oe.prototype.allSellGoods=function(){this.sendMessage({},"connector.userHandler.allSellGoods")},oe.prototype.resetAttribute=function(){this.sendMessage({},"connector.userHandler.resetAttribute")},oe.prototype.getNewPet=function(e,t){this.sendMessage({ids:e+","+t},"connector.userHandler.getNewPet")},oe.prototype.fitPet=function(e,t){this.sendMessage({ids:e+","+t},"connector.userHandler.fitPet")},oe.prototype.addUserPetSkill=function(e,t){this.sendMessage({ugid:e,upid:t},"connector.userHandler.addUserPetSkill")},oe.prototype.getMyPetSkillGoods=function(){this.sendMessage({},"connector.userHandler.getMyPetSkillGoods")};var ae=oe;window.freshPackage=!0,window.chatMsg=[],window.screens=[];var re,ie=function(e){var t=e;function n(e){var n=[];e.map((function(e){var t=[];e.task.give_goods.map((function(n,s){t.push("".concat(n.name," x ").concat(e.task.give_goods_num[s].count))})),e.task.contribution_num&&t.push("帮贡 ".concat(e.task.contribution_num));var s=[];e.needGoods.map((function(e){s.push("".concat(e.name," [").concat(e.have_count,"/").concat(e.need_count,"]"))})),n.push({utid:e.utid,_id:e.task._id,title:e.task.name,info:e.task.info,give:t,need:s})})),t.$set(t.user,"userTasks",n)}var s=function(){};function o(e){fetch("http://yundingxx.com:3366/api/sendMailCode",{headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"email=".concat(e),method:"POST",mode:"cors",credentials:"include"}).then((function(e){return e.json()})).then((function(n){if(304==n.code){var s=n.data+1;t.$Message.info("".concat(s,"秒后自动重新获取验证码然后刷新")),setTimeout((function(){return o(e)}),1e3*s)}else location.reload()}))}s.hookMark="regHooks.emptyCb",ae.regHookHandlers["onLeave"].push(s),ae.regHookHandlers["onAdd"].push(s);var a=function(e){console.log(e);var s=t.user;return 500==e.code?(t.$set(s,"status","登录失败"),void t.$set(s,"status_msg","账号已在他处登录")):200!=e.code?(400==e.code&&o(s.email),t.$set(s,"status","登录失败"),void t.$set(s,"status_msg",e.msg||"未知错误")):void(e.token?s.status="鉴权成功":(s.status="登录成功","object"==Object(R["a"])(e.data)&&(t.$set(s,"userEqs",e.data.userEqs),t.$set(s,"myInfo",e.data.myInfo),n(e.data.userTasks),t.$set(s,"map",e.data.map),this.userInfo(),this.getSystemTask(),this.getTeamList(t.user.map.id),t.$set(s,"goods",[]),t.$set(s,"goodsPage",1),this.getMyGoods(),this.getMySkill())))};a.hookMark="regHooks.loginCb",ae.regHookHandlers["gate.gateHandler.queryEntry"].push(a),ae.regHookHandlers["connector.loginHandler.login"].push(a);var r=function(e){200==e.code?t.$set(t.user,"map",e.map):t.$Message.error(e.msg)};r.hookMark="regHooks.moveToNewMapCb",ae.regHookHandlers["connector.playerHandler.moveToNewMap"].push(r);var i=function(e){200==e.code?(t.$set(t.user,"team",{leader:this.email,users:[]}),t.$Message.success("队伍创建成功")):t.$Message.error(e.msg)};i.hookMark="regHooks.createdTeamCb",ae.regHookHandlers["connector.teamHandler.createdTeam"].push(i);var c=function(e){200==e.code?(t.$delete(t.user,"team"),t.$Message.info("已离开队伍"),this.getTeamList(t.user.map.id)):t.$Message.error(e.msg)};c.hookMark="regHooks.leaveTeamCb",ae.regHookHandlers["connector.teamHandler.leaveTeam"].push(c);var l=function(e){if(200==e.code){for(var n=e.data.combat||null,s=e.data.users[0].nickname,o=e.data.users,a=0;a<this.user_info.screens.length;a++){var r=this.user_info.screens[a];r._id==n&&(n=r.name)}t.$set(t.user,"team",{combat:n,leader:s,users:o}),t.$Message.info("已加入队伍")}else t.$Message.error(e.msg)};l.hookMark="regHooks.addTeamCb",ae.regHookHandlers["connector.teamHandler.addTeam"].push(l);var u=function(e){if(e.code&&200!=e.code)t.$Message.error(e.msg);else{var n=t.user;if(e.new_uid&&!e.team&&n.team)n.team.users.forEach((function(t,s){t._id==e.new_uid&&n.team.users.splice(s,1)}));else{if(e.data||!e.team)return e.data&&t.$set(n,"fighting",!1),t.$delete(n,"team"),void t.$delete(n,"combatName");for(var s=e.team.leader,o=[],a=0;a<e.team.users.length;a++){var r=e.team.users[a];r._id==s&&(s=r.email),o.push({_id:r._id,email:r.email,level:r.level})}t.$set(n,"team",{leader:s,users:o,combat:e.team.combat}),n.email===s&&t.user.fighting&&this.startCombat(n.tempcombatid||n.combatId||e.team.combat)}}};u.hookMark="regHooks.onMyTeamReloadCb",ae.regHookHandlers["onMyTeamReload"].push(u);var d=function(e){if(200==e.code){var n,s=t.user;if(0===window.screens.length)(n=window.screens).push.apply(n,Object(U["a"])(e.data.screens));t.$set(s,"screens",e.data.screens),t.$set(s,"teams",e.data.teams.filter((function(e){return e.users.length!==(e.combat||{}).player_num})))}else t.$Message.error(e.msg)};d.hookMark="regHooks.getTeamListCb",ae.regHookHandlers["connector.teamHandler.getTeamList"].push(d);var m=function(e){200==e.code?(t.$Message.success("切换副本成功"),this.getTeamList(t.user.map.id)):t.$Message.error(e.msg)};m.hookMark="regHooks.switchCombatScreenCb",ae.regHookHandlers["connector.teamHandler.switchCombatScreen"].push(m);var p=function(e){if(200==e.code){var n,s=t.user,o=e.data.initData,a=s.catchType?s.catchPetBySkill:s.catchPet;a&&a.includes&&(n=o.find((function(e){return 2===e.team&&a.includes(e.name.replace(/<[^>]+>/g,""))}))),n?this.roundOperating("1001","",n.id,s.team?s.team._id:""):this.roundOperating(s.skilltype||"1",s.skillid||"1","",s.team?s.team._id:"")}else t.$Message.error(e.msg)};p.hookMark="regHooks.onStartBatCb",ae.regHookHandlers["onStartBat"].push(p);var f=function(e){var n=t.user;n.myInfo.hp_store<5e3&&this.byGoodsToSystem(2,"5eef5b6e0faad0b123d709c5"),n.myInfo.mp_store<5e3&&this.byGoodsToSystem(2,"5eef5d140faad0b123d709c6"),n.fighting&&n.team&&this.startCombat(n.tempcombatid||n.combatId||n.team.combat),t.setMessage(this.email,e.data),this.userInfo()};f.hookMark="regHooks.onRoundBatEndCb",ae.regHookHandlers["onRoundBatEnd"].push(f);var h=function(e){200==e.code||t.$Message.error(e.msg)};h.hookMark="regHooks.chatSendCb",ae.regHookHandlers["chat.chatHandler.send"].push(h);var g=function(e){e.key=Date.now(),window.chatMsg.push(e)};g.hookMark="regHooks.onChatMsgCb",ae.regHookHandlers["onChatMsg"].push(g);var v=function(e){if(200==e.code){for(var n=!0,s=0;s<e.data.goods.length;s++){var o=e.data.goods[s];if(n&&o.goods&&o.goods.info&&o.goods.info.indexOf("储备值")>-1)this.useGoods(o._id),n=!1;else{var a=void 0,r=void 0,i=void 0,c=void 0;switch(o.goods_type){case"5eee25a1ba4d0b4c4ef605d0":c="蛋";break;case"5ec63cc24947081a6cd8d3a6":c="未鉴定的装备";break;case"5e77ee52b1012a6374d2bd1b":c="可装备的装备";break;case"5f01e52c0f80941f56ecc1ae":c="藏宝图";break;case"5ef04600544717379c820835":c="技能书";break;case"5ec63cb54947081a6cd8d3a5":c="材料";break;case"5f01e4990f80941f56ecc1ac":c="法宝材料";break;case"5eedd0138822d61cf3d9548a":case"5eedd0178822d61cf3d9548b":c="兽决";break;case"5eef5f0b0faad0b123d709d0":c="大补丹";break;case"5eef5f0b0faad0b123d709d0":c="大补丹";break;default:break}o.name&&o.expand?a=JSON.parse(o.expand).map:(o.name||o.goods.name).indexOf("藏宝图")>-1&&((o.name||o.goods.name).indexOf("高级藏宝图")>-1&&(i=!0),r=!0),t.user.goods.push({id:o._id,num:o.count,map:a,unusecbt:r,highcbt:i,name:o.name||o.goods.name,goodsType:c,info:o.goods||o})}}t.user.goods.length!==e.data.count&&this.getMyGoods(++t.user.goodsPage)}else t.$Message.error(e.msg)};v.hookMark="regHooks.getMyGoodsCb",ae.regHookHandlers["connector.userHandler.getMyGoods"].push(v);var y=function(e){200==e.code?(t.$Message.success(e.msg),t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};y.hookMark="regHooks.byGoodsToSystemCb",ae.regHookHandlers["connector.playerHandler.byGoodsToSystem"].push(y);var k=function(e){200==e.code?window.freshPackage&&(this.userInfo(),t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};k.hookMark="regHooks.useGoodsCb",ae.regHookHandlers["connector.userHandler.useGoods"].push(k);var _=function(e){200==e.code?this.userInfo():t.$Message.error(e.msg)};_.hookMark="regHooks.polyLinCb",ae.regHookHandlers["connector.userHandler.polyLin"].push(_);var b=function(e){200==e.code?(t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};b.hookMark="regHooks.allSellGoodsCb",ae.regHookHandlers["connector.userHandler.allSellGoods"].push(b);var M=function(e){200==e.code?(this.userInfo(),t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};k.hookMark="regHooks.sellGoodsCb",ae.regHookHandlers["connector.userHandler.sellGoods"].push(M);var H=function(e){200==e.code?(this.userInfo(),t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};k.hookMark="regHooks.wearUserEquipmentCb",ae.regHookHandlers["connector.playerHandler.wearUserEquipment"].push(H);var w=function(e){200==e.code?this.userInfo():t.$Message.error(e.msg)};w.hookMark="regHooks.upPlayerLevelCb",ae.regHookHandlers["connector.userHandler.upPlayerLevel"].push(w);var S=function(e){if(200==e.code){e.user.nextExp=e.nextLevelGetExp;var n=t.user;t.$set(n,"myInfo",e.user)}else t.$Message.error(e.msg)};S.hookMark="regHooks.userInfoCb",ae.regHookHandlers["connector.userHandler.userInfo"].push(S);var T=function(e){if(200==e.code){t.$set(t.user,"skills",e.data.skill);var n=[],s={0:"剑",1:"枪",2:"锤",3:"伞"},o={0:{name:"入门",exp:200},1:{name:"精修",exp:500},2:{name:"意境",exp:1500},3:{name:"心境",exp:3500},4:{name:"解境",exp:5e3},5:{name:"魂入体",exp:3e4},6:{name:"灵出窍",exp:1e5},7:{name:"神境",exp:5e5}};e.data.arms_exp.map((function(t,a){var r=s[a],i=o[e.data.arms_level[a]];n.push({exp:t,needExp:i.exp,name:"".concat(r).concat(i.name)})})),t.$set(t.user,"arms",n)}else t.$Message.error(e.msg)};T.hookMark="regHooks.getMySkillCb",ae.regHookHandlers["connector.userHandler.getMySkill"].push(T);var x=function(e){200==e.code?this.getMySkill():t.$Message.error(e.msg||"".concat(e.code,"错误但是没有错误信息，不知道作者搞什么鬼"))};x.hookMark="regHooks.upLevelUserSkillCb",ae.regHookHandlers["connector.playerHandler.upLevelUserSkill"].push(x);var P=function(e){200==e.code?this.userInfo():t.$Message.error(e.msg)};P.hookMark="regHooks.allocationPointCb",ae.regHookHandlers["connector.userHandler.allocationPoint"].push(P);var C=function(e){if(200==e.code){var n=[];e.data.list.map((function(e){n.push({_id:e._id,title:e.name,info:e.info})})),t.$set(t.user,"systemTask",n)}else t.$Message.error(e.msg)};C.hookMark="regHooks.getSystemTaskCb",ae.regHookHandlers["connector.systemHandler.getSystemTask"].push(C);var I=function(e){200==e.code?this.getUserTask():t.$Message.error(e.msg)};I.hookMark="regHooks.getCopyTaskCb",ae.regHookHandlers["connector.playerHandler.getCopyTask"].push(I);var $=function(e){200==e.code?n(e.data):t.$Message.error(e.msg)};$.hookMark="regHooks.getUserTaskCb",ae.regHookHandlers["connector.userHandler.getUserTask"].push($);var G=function(e){200==e.code?(t.user.goods=[],t.user.goodsPage=1,this.getMyGoods(),this.getUserTask()):t.$Message.error(e.msg)};G.hookMark="regHooks.payUserTaskCb",ae.regHookHandlers["connector.playerHandler.payUserTask"].push(G);var O=function(e){t.user.wbtResult||(t.user.wbtResult=[]),t.user.wbtResult.push(e.msg),200==e.code?(t.$Message.success({background:!0,content:e.msg}),window.freshPackage&&(t.user.goods=[],t.user.goodsPage=1,this.getMyGoods())):t.$Message.error({background:!0,content:e.msg})};O.hookMark="regHooks.wbtCb",ae.regHookHandlers["connector.userHandler.wbt"].push(O);var E=function(e){200==e.code?(t.$Message.success(e.msg),t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};E.hookMark="regHooks.makeGoodsCb",ae.regHookHandlers["connector.userHandler.makeGoods"].push(E);var L=function(e){200==e.code?t.$set(t.user,"myPets",e.data.data.sort((function(e,t){return(t.skill||[]).length-(e.skill||[]).length}))):t.$Message.error(e.msg)};L.hookMark="regHooks.getMyPetCb",ae.regHookHandlers["connector.userHandler.getMyPet"].push(L);var D=function(e){200==e.code?this.getMyPet():t.$Message.error(e.msg)};D.hookMark="regHooks.upUserPetLevelCb",ae.regHookHandlers["connector.userHandler.upUserPetLevel"].push(D);var F=function(e){if(200==e.code){if(e.data.name){var n=e.data.status?"".concat(e.data.name,"参战成功"):"".concat(e.data.name,"休息成功");t.$Message.success(n)}this.getMyPet()}else t.$Message.error(e.msg)};F.hookMark="regHooks.playUserPetCb",ae.regHookHandlers["connector.userHandler.playUserPet"].push(F);var B=function(e){this.getMyPet(),200==e.code?t.$Message.success(e.msg):t.$Message.error(e.msg)};B.hookMark="regHooks.turnIntoPetCb",ae.regHookHandlers["connector.userHandler.turnIntoPet"].push(B);var j=function(e){200==e.code?(t.$Message.success(e.msg),this.getMyPet()):t.$Message.error(e.msg)};j.hookMark="regHooks.getNewPetCb",ae.regHookHandlers["connector.userHandler.getNewPet"].push(j);var N=function(e){200==e.code?(t.$Message.success(e.msg),this.getMyPet()):t.$Message.error(e.msg)};N.hookMark="regHooks.fitPetCb",ae.regHookHandlers["connector.userHandler.fitPet"].push(N);var z=function(e){200==e.code?(t.$Message.success(e.msg),this.getMyPet()):t.$Message.error(e.msg)};z.hookMark="regHooks.addUserPetSkillCb",ae.regHookHandlers["connector.userHandler.addUserPetSkill"].push(z);var A=function(e){200==e.code?(t.$Message.success("".concat(e.data.name," x ").concat(e.data.sell.count,"上架成功")),t.user.goods=[],t.user.goodsPage=1,this.getMyGoods()):t.$Message.error(e.msg)};A.hookMark="regHooks.playerSellGoodsCb",ae.regHookHandlers["connector.playerHandler.sellGoods"].push(A);var q=function(e){var n=this;if(200==e.code)if(e.data.playerSellUser.map((function(e){t.user.market.list.push(e)})),t.user.market.list.length!==e.data.count)setTimeout((function(){user.market.pageIndex++,n.getPlayerSellGoods(user.market.pageIndex,user.market.type)}),1100);else{var s={};t.user.market.list.map((function(e){var n=e.name||e.goods.name;t.user.market.keyword&&-1===n.indexOf(t.user.market.keyword)||(s[n]||(s[n]=[]),s[n].push(e))}));var o=[];Object.keys(s).map((function(e){o.push({name:e,count:s[e].length,list:s[e].sort((function(e,t){return e.sell_game_gold/e.count-t.sell_game_gold/t.count}))})})),t.$set(t.user.market,"sellGoods",o),t.$Spin.hide()}else t.$Message.error(e.msg)};q.hookMark="regHooks.getPlayerSellGoodsCb",ae.regHookHandlers["connector.playerHandler.getPlayerSellGoods"].push(q);var Y=function(e){if(200==e.code){var n=e.data.goods,s={shopPage:0,goods:[]};t.user.shop&&(s.shopPage=n.length>0?t.user.shop.shopPage+1:t.user.shop.shopPage-1,s.goods=t.user.shop.goods.concat(n)),n.length>0&&this.getSystemSellGoods(s.shopPage+1),t.$set(t.user,"shop",s)}else t.$Message.error(e.msg)};Y.hookMark="regHooks.getSystemSellGoodsCb",ae.regHookHandlers["connector.systemHandler.getSystemSellGoods"].push(Y)},ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"good-header",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("储物戒指")]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(){return e.game.allSellGoods()}}},[e._v(" 整理 ")]),n("Input",{staticStyle:{width:"66%"},attrs:{suffix:"ios-search",placeholder:"名称、说明、属性值"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),n("div",{staticClass:"goods-box"},e._l(e.goods,(function(t,s){return n("Badge",{key:t.id+"-"+s,attrs:{count:t.selected,"overflow-count":"999"}},[n("Button",{staticClass:"good-name",style:t.style,attrs:{size:"small"},on:{click:function(n){return e.goodsHandle(t)}}},[n("label",{domProps:{innerHTML:e._s(t.name)}}),e._v("("+e._s(t.num)+") ")])],1)})),1),n("div",{staticClass:"good-info",style:e.position},[e.readToUse?[n("div",{staticClass:"info-box"},[n("div",{staticClass:"basci-info"},[n("span",{style:e.readToUse.style},[e._v(" "+e._s(e.readToUse.name)+" ")]),n("span",{style:e.readToUse.style},[e._v("价格："+e._s(e.readToUse.price))]),n("span",{style:e.readToUse.style},[e._v(e._s(e.readToUse.info))])]),e.readToUse.eq_info?[n("div",{staticClass:"eq-info"},e._l(e.readToUse.eq_info,(function(t,s){return n("span",{key:s,style:e.readToUse.style},[n("span",{style:e._f("addStyle_mixin")(s)},[e._v(e._s(s)+":")]),n("span",{style:e._f("addStyle_mixin")(s)},[e._v(e._s(t))])])})),0)]:e._e()],2),n("div",{staticClass:"button-box"},[n("Input",{attrs:{type:"number"},model:{value:e.readToUse.useNum,callback:function(t){e.$set(e.readToUse,"useNum",t)},expression:"readToUse.useNum"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("数量")])]),n("Input",{attrs:{type:"number"},model:{value:e.readToUse.sellPrice,callback:function(t){e.$set(e.readToUse,"sellPrice",t)},expression:"readToUse.sellPrice"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("总价")])]),n("ButtonGroup",{attrs:{size:"small",vertical:""}},[n("Button",{attrs:{size:"small",type:"primary"},on:{click:e.selectGood}},[e._v(" 标记 ")]),["可装备的装备"].includes(e.readToUse.goodsType)?n("Button",{attrs:{size:"small",type:"primary"},on:{click:e.handleWearItem}},[e._v(" 装备 ")]):e._e(),["未鉴定的装备","藏宝图","技能书","蛋","大补丹"].includes(e.readToUse.goodsType)?n("Button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUseItem}},[e._v(" 使用 ")]):e._e(),n("Button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSellGoods}},[e._v(" 出售 ")]),e.selectedGoods.length>1?n("Button",{attrs:{size:"small",type:"primary"},on:{click:e.makeGoods}},[e._v(" 合成 ")]):e._e(),n("Button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSellItem}},[e._v(" 分解 ")])],1)],1),n("Button",{staticClass:"close-btn",attrs:{size:"small",type:"info"},on:{click:function(t){e.position="bottom: 0"===e.position?"bottom:-120px":"bottom: 0"}}},[e._v(" "+e._s("bottom: 0"===e.position?"隐藏":"显示")+" ")])]:n("p",[e._v(" 去上面点一个物品 ")])],2),n("Modal",{attrs:{styles:{top:"85px"}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),n("span",[e._v("确定分解所有标记物品？")])],1),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{size:"small"},on:{click:function(t){e.modal=!1}}},[e._v("取消")]),n("Button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmHandle}},[e._v("确认")])],1)])],1)},le=[],ue={name:"bag",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{readToUse:null,searchText:"",selectedGoods:[],modal:!1,position:"bottom: 0"}},mounted:function(){this.bagInit()},computed:{goods:function(){var e=this,t=[];if(this.user.goods&&this.user.goods.forEach((function(n){var s=n.name,o=n.num,a=n.id,r=[null,"灵石","仙石"],i=n.info.price_type?"".concat(n.info.price/n.info.price_type).concat(r[n.info.price_type]):null,c=n.info.info,l=n.info.style,u=n.info.info.includes("蛋")?"蛋":n.goodsType,d=e.selectedGoods.find((function(e){return e.id===n.id})),m={name:s,num:o,id:a,price:i,info:c,style:l,goodsType:u,selected:d?Number(d.num):0};if("可装备的装备"===n.goodsType){var p=e.getEqsInfo_mixin(n.info);m.eq_info=p}t.push(m)})),this.searchText){var n=t.filter((function(t){var n="".concat(t.name).concat(t.info);return t.eq_info&&(n+=JSON.stringify(t.eq_info)),n.includes(e.searchText)}));return n}return t}},methods:{bagInit:function(){this.user.goods=[],this.user.goodsPage=1,this.game.getMyGoods()},handleUseItem:function(){this.useItem_mixin(this.readToUse)},handleWearItem:function(){var e=this.readToUse.id;this.game.wearUserEquipment(e)},handleSellItem:function(){var e=this.readToUse,t=e.useNum,n=e.id;e.name;if(!t||t<0)return this.$Message.error("请输入正确的数量");this.selectedGoods.length>1?this.modal=!0:this.game.sellGoods([{id:n,num:t}]),this.readToUse=null},confirmHandle:function(){this.game.sellGoods(this.selectedGoods),this.selectedGoods=[],this.readToUse=null,this.modal=!1},handleSellGoods:function(){var e=this.readToUse,t=e.useNum,n=e.id,s=(e.name,e.sellPrice);return!t||t<0?this.$Message.error("请输入正确的数量"):!s||s<0?this.$Message.error("请输入正确的总价"):(this.game.playerSellGoods(n,s,t),void(this.readToUse=null))},selectGood:function(){var e=this.readToUse,t=e.useNum,n=e.id;if(t<0)return this.$Message.error("请输入正确的数量");var s=this.selectedGoods.find((function(e){var s=e.id===n;return s&&(e.num=t),s}));s||this.selectedGoods.push({id:n,num:t}),this.selectedGoods=this.selectedGoods.filter((function(e){return e.num>0}))},makeGoods:function(){this.game.makeGoods(this.selectedGoods),this.selectedGoods=[]},goodsHandle:function(e){this.readToUse=e,this.readToUse.useNum=1}}},de=ue,me=(n("4291"),Object(c["a"])(de,ce,le,!1,null,null,null)),pe=me.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Collapse",{attrs:{simple:""}},e._l(e.eqsInfo,(function(t,s){return n("Panel",{key:t.id,attrs:{name:e._f("getIndex_mixin")(s)}},[n("img",{staticClass:"eq-img",attrs:{src:t.img}}),n("span",{style:t.style},[e._v(e._s(t.name))]),n("div",{attrs:{slot:"content"},slot:"content"},e._l(t.info,(function(s,o){return n("div",{key:o,style:"padding:2px;"+t.style},[n("span",{style:e._f("addStyle_mixin")(o)},[e._v(e._s(o)+"：")]),n("span",{style:e._f("addStyle_mixin")(o)},[e._v(e._s(s))])])})),0)])})),1)},he=[],ge={name:"eqs",data:function(){return{user:window.user,game:window.game}},computed:{eqsInfo:function(){var e=this,t=[];return this.user.userEqs&&this.user.userEqs.forEach((function(n){var s=e.getEqsInfo_mixin(n),o=n.name,a=n.style,r=n.img;t.push({name:o,style:a,img:r,info:s})})),t}}},ve=ge,ye=Object(c["a"])(ve,fe,he,!1,null,"71ca2013",null),ke=ye.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Form",{ref:"formInline",attrs:{inline:""}},[n("FormItem",[n("Select",{model:{value:e.user.market.type,callback:function(t){e.$set(e.user.market,"type",t)},expression:"user.market.type"}},[n("Option",{attrs:{value:"1"}},[e._v("装备")]),n("Option",{attrs:{value:"2"}},[e._v("材料")]),n("Option",{attrs:{value:"3"}},[e._v("技能书")]),n("Option",{attrs:{value:"4"}},[e._v("制造类")]),n("Option",{attrs:{value:"5"}},[e._v("宠物蛋")]),n("Option",{attrs:{value:"6"}},[e._v("珍稀物品")]),n("Option",{attrs:{value:"7"}},[e._v("法宝材料")]),n("Option",{attrs:{value:"8"}},[e._v("低级兽决")]),n("Option",{attrs:{value:"9"}},[e._v("高级兽决")])],1)],1),n("FormItem",[n("Input",{attrs:{type:"text",placeholder:"物品名称"},model:{value:e.user.market.keyword,callback:function(t){e.$set(e.user.market,"keyword",t)},expression:"user.market.keyword"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:e.handlerMarketSearch}},[e._v("搜索")])],1)],1),n("Collapse",e._l(e.user.market.sellGoods,(function(t){return n("Panel",{key:t.name,attrs:{name:t.name}},[e._v(" "+e._s(t.name)+" - "+e._s(t.count)+"在售 "),n("List",{attrs:{slot:"content",border:"",size:"small"},slot:"content"},e._l(t.list,(function(t){return n("ListItem",{key:t._id},[n("ListItemMeta",{attrs:{description:(t.sell_game_gold/t.count).toFixed(0)+"仙石/个，共"+t.count+"个【卖家："+t.user.nickname+"】"}}),n("template",{slot:"action"},["1"==e.user.market.type?n("li",[n("Tooltip",[n("a",[e._v("属性")]),n("div",{attrs:{slot:"content"},slot:"content"},e._l(e.getEqsInfo_mixin(t),(function(t,s){return n("p",{key:s},[n("span",{style:e._f("addStyle_mixin")(s)},[e._v(e._s(s)+":")]),n("span",{style:e._f("addStyle_mixin")(s)},[e._v(e._s(t))])])})),0)])],1):e._e(),n("li",[n("InputNumber",{attrs:{max:t.count,min:1},model:{value:t.buyNum,callback:function(n){e.$set(t,"buyNum",n)},expression:"goods.buyNum"}})],1),n("li",[n("a",{on:{click:function(){return e.handleByGoods(t)}}},[e._v("购买")])])])],2)})),1)],1)})),1)],1)},be=[],Me={name:"market",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{handleByGoods:function(e){var t=e.buyNum||1,n=e.name||e.goods.name;if(t==e.count){this.game.byPalyerGoods(e._id,2);var s=user.market.sellGoods.find((function(e){return e.name===n})).list,o=s.findIndex((function(t){return t._id===e._id}));s.splice(o,1)}else for(var a=0;a<t;a++)e.count--,this.game.byPalyerGoods(e._id,1);this.$forceUpdate(),this.$Message.success("购买".concat(n).concat(t,"个完成"))},handlerMarketSearch:function(){this.$Spin.show(),this.user.market.pageIndex=1,this.user.market.list=[],this.game.getPlayerSellGoods(this.user.market.pageIndex,this.user.market.type)}}},He=Me,we=Object(c["a"])(He,_e,be,!1,null,"08bbb3ee",null),Se=we.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Tabs",{attrs:{size:"small"},model:{value:e.tabPaneName,callback:function(t){e.tabPaneName=t},expression:"tabPaneName"}},e._l(e.petsInfo,(function(t,s){return n("TabPane",{key:s,attrs:{label:t.name+"("+t.skills.length+")",name:"name"+(s+1)}},[n("Divider",{attrs:{size:"small"}},[e._v("状态："+e._s(t.status?"已参战":"休息中"))]),0===t.skills.length?n("p",{staticStyle:{padding:"5px"}},[e._v(" 无技能 ")]):e._l(t.skills,(function(t,s){return n("Poptip",{key:s,attrs:{"word-wrap":"",transfer:"",width:"200",trigger:"hover",content:t.info}},[n("Button",{style:t.style,attrs:{size:"small"}},[e._v(e._s(t.name))])],1)})),e.tabPaneName==="name"+(s+1)?n("Table",{attrs:{"show-header":!1,columns:e.columns,data:t.data,border:""}}):e._e(),n("ButtonGroup",{staticClass:"pet-btn",attrs:{size:"small",shape:"circle"}},[n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,3)}}},[e._v("放生")]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,4)}}},[e._v("幻化")]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,1)}}},[e._v("升级")]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,2,1)}}},[e._v("全力")]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,2,2)}}},[e._v("全魔")]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,5)}}},[e._v(e._s(t.status?"休息":"参战"))]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handlePet(t,8)}}},[e._v(e._s(t.bat_num&&t.status?"主":1==t.status?"副":""))])],1),n("ButtonGroup",{staticClass:"pet-btn",attrs:{size:"small",shape:"circle"}},[n("Button",{attrs:{size:"small",type:"success"},on:{click:function(n){return e.handlePet(t,6)}}},[e._v("合宠")]),n("Button",{attrs:{size:"small",type:"success"},on:{click:function(n){return e.handlePet(t,7)}}},[e._v("打书")])],1)],2)})),1),n("Modal",{attrs:{styles:{top:"85px"}},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("Icon",{attrs:{type:"ios-information-circle"}}),n("span",[e._v("确定"+e._s(e.handleData.name)+"？")])],1),[5,8].includes(e.handleData.type)?e._e():n("div",{staticStyle:{"text-align":"center"}},[e.handleData.type<6?n("img",{staticStyle:{width:"120px","padding-top":"5px"},attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593343846064&di=97a86fe902b9754de368f02e336e4eab&imgtype=0&src=http%3A%2F%2Fwww.11xzb.com%2Fd%2Ffile%2Fmoban5%2F201909020832%2F1567158444899421.png",alt:""}}):6===e.handleData.type?n("div",{staticClass:"slelect-box"},[n("Select",{attrs:{size:"small"},model:{value:e.pet1,callback:function(t){e.pet1=t},expression:"pet1"}},e._l(e.petList,(function(t){return n("Option",{key:"pet1-"+t.value,attrs:{disabled:e._f("disabled")([t.status,t.value,e.pet2]),value:t.value}},[e._v(e._s(t.label)+"("+e._s(t.skills.length)+")")])})),1),n("p",[e._v("技能："+e._s(e.selectPet1))]),n("Select",{attrs:{size:"small"},model:{value:e.pet2,callback:function(t){e.pet2=t},expression:"pet2"}},e._l(e.petList,(function(t){return n("Option",{key:"pet2-"+t.value,attrs:{disabled:e._f("disabled")([t.status,t.value,e.pet1]),value:t.value}},[e._v(e._s(t.label)+"("+e._s(t.skills.length)+")")])})),1),n("p",[e._v("技能："+e._s(e.selectPet2))])],1):n("div",{staticClass:"slelect-box"},[n("Select",{attrs:{size:"small"},model:{value:e.pet1,callback:function(t){e.pet1=t},expression:"pet1"}},e._l(e.petList,(function(t){return n("Option",{key:"ds1-"+t.value,attrs:{disabled:e._f("disabled")([t.status,t.value,e.pet2]),value:t.value}},[e._v(e._s(t.label))])})),1),n("p",[e._v("技能："+e._s(e.selectPet1))]),n("Select",{attrs:{size:"small"},model:{value:e.pet2,callback:function(t){e.pet2=t},expression:"pet2"}},e._l(e.bookList,(function(t,s){return n("Option",{key:"ds2-"+t.value+"-"+s,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),1===e.handleData.type?n("p",[e._v("点击确认继续升级，或者点击取消关闭面板")]):e._e(),3===e.handleData.type&&1===e.handleData.data.status?n("p",[e._v("宠物正在参战...")]):e._e()]),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{size:"small"},on:{click:function(t){e.modal=!1}}},[e._v("取消")]),n("Button",{attrs:{type:"primary",size:"small",disabled:3===e.handleData.type&&1===e.handleData.data.status},on:{click:e.confirmHandle}},[e._v("确认")])],1)])],1)},xe=[],Pe={name:"pet",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{tabPaneName:"name1",columns:[{title:"column1",key:"column1",align:"center"},{title:"column2",key:"column2",width:120,align:"center"},{title:"column3",key:"column3",width:80,align:"center"}],modal:!1,handleData:{},pet1:"",pet2:""}},mounted:function(){this.game.getMyPet()},filters:{disabled:function(e){return!!e[0]||e[1]===e[2]}},computed:{petsInfo:function(){var e=this.user.myPets,t=[],n=this.rareType;return e&&e.forEach((function(e){var s=e.skill,o=e._id,a=e.name,r=e.status,i=e.bat_num,c=[{column1:"等级：".concat(e.level),column2:"类型：".concat(n[e.type]),column3:"成长：".concat(e.growing_num.toFixed(2))},{column1:"气血：".concat(Math.round(e.hp)),column2:"魔法：".concat(Math.round(e.mp)),column3:"命中：".concat(Math.round(e.hit))},{column1:"攻击资质：".concat(e.str_zz),column2:"物理伤害：".concat(Math.round(e.physical_damage)),column3:"力量：".concat(e.str)},{column1:"法力资质：".concat(e.int_zz),column2:"魔法伤害：".concat(Math.round(e.magic_damage)),column3:"魔力：".concat(e.int)}],l=[];s.forEach((function(e){l.push({name:e.name,info:e.info,style:e.high?"margin:5px;color:orchid":"margin:5px;"})}));var u=e.potential_num,d={_id:o,skills:l,name:a,data:c,status:r,point:u,bat_num:i};t.push(d)})),t},petList:function(){var e=[];return this.petsInfo.forEach((function(t){var n=[];t.skills.forEach((function(e){n.push(e.name)})),e.push({value:t._id,label:"".concat(t.name," ， ").concat(t.data[0].column3),skills:n,status:t.status})})),e},selectPet1:function(){var e=this,t=this.petList.find((function(t){return e.pet1===t.value}))||{skills:[]};return t.skills.join("，")||"无"},selectPet2:function(){var e=this,t=this.petList.find((function(t){return e.pet2===t.value}))||{skills:[]};return t.skills.join(",")||"无"},bookList:function(){var e=[];return(this.user.goods||[]).map((function(t){"兽决"===t.goodsType&&e.push({value:t.id,label:t.name})})),e}},methods:{handlePet:function(e,t,n){var s=["升级","加点","放生","幻化","参战/休息","合成","打书","主副战宠切换"],o={str:1===n?e.point:0,int:2===n?e.point:0,agi:0,vit:0,con:0};this.modal=!0,this.handleData={type:t,data:e,point:2===t?o:null,name:s[t-1]}},confirmHandle:function(){var e=this.handleData;if(e.type<4&&this.game.upUserPetLevel(e.data._id,e.type,e.point),4===e.type&&(this.game.turnIntoPet(e.data._id),this.tabPaneName="name1"),5===e.type){var t=e.data.status?0:1;this.game.playUserPet(e.data._id,t),this.tabPaneName="name1"}6===e.type&&(this.game.fitPet(this.pet1,this.pet2),this.tabPaneName="name".concat(this.petsInfo.length-1),this.pet1="",this.pet2=""),7===e.type&&(this.game.addUserPetSkill(this.pet2,this.pet1),this.pet1="",this.pet2=""),8===e.type&&this.game.playUserPet(e.data._id,3),1!==e.type&&(this.modal=!1)}}},Ce=Pe,Ie=(n("0469"),Object(c["a"])(Ce,Te,xe,!1,null,"90cf5b4e",null)),$e=Ie.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.user.arms?[e._l(e.user.arms,(function(t){return n("Tag",{key:t.name},[e._v(" "+e._s(t.name)+"["+e._s(t.exp)+"/"+e._s(t.needExp)+"] ")])})),n("div",{staticClass:"br"}),n("div",{staticClass:"br"}),n("div",{staticClass:"br"}),n("Input",{attrs:{type:"number"},model:{value:e.upSkillNum,callback:function(t){e.upSkillNum=t},expression:"upSkillNum"}},[n("Select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",transfer:""},slot:"prepend",model:{value:e.upSkillType,callback:function(t){e.upSkillType=t},expression:"upSkillType"}},[n("Option",{attrs:{value:1}},[e._v("剑修")]),n("Option",{attrs:{value:2}},[e._v("枪修")]),n("Option",{attrs:{value:3}},[e._v("锤修")]),n("Option",{attrs:{value:4}},[e._v("伞修")])],1),n("Button",{attrs:{slot:"append",type:"primary",size:"small"},on:{click:e.handleFationSkill},slot:"append"},[e._v("确定")])],1)]:e._e(),e.user.skills?e._l(e.user.skills,(function(t){return n("div",{key:t._id},[n("div",{staticClass:"br"}),n("div",{staticClass:"br"}),n("div",{staticClass:"br"}),e._v(" "+e._s(t.name)+"： "),n("ButtonGroup",{attrs:{size:"small"}},[n("Button",{on:{click:function(){return e.game.upLevelUserSkill(1,t._id)}}},[e._v(" 基础伤害"+e._s(t.real_damage)+" "),n("Icon",{attrs:{type:"md-arrow-round-up"}})],1),n("Button",{on:{click:function(){return e.game.upLevelUserSkill(2,t._id)}}},[e._v(" 属性波动【"+e._s(t.min_hurt.toFixed(2))+" ~ "+e._s(t.max_hurt.toFixed(2))+"】 "),n("Icon",{attrs:{type:"md-arrow-round-up"}})],1),n("Button",{on:{click:function(){return e.game.upLevelUserSkill(3,t._id)}}},[e._v(" 作用单位【"+e._s(t.unit)+"】 "),n("Icon",{attrs:{type:"md-arrow-round-up"}})],1)],1)],1)})):e._e()],2)},Ue=[],Oe={name:"skills",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{upSkillNum:50,upSkillType:1}},methods:{handleFationSkill:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$createElement,!(t.upSkillNum<=0)){e.next=4;break}return t.$Message.error("大胸弟，别搞事情"),e.abrupt("return");case 4:if(!(2e4*t.upSkillNum>t.user.myInfo.game_silver)){e.next=7;break}return t.$Message.error("大胸弟，你钱不够啊"),e.abrupt("return");case 7:t.$Spin.show({render:function(){return n("p",["正在自动连点技能，为避免请求次数过多和程序错乱，在此窗口关闭后再进行其他操作"])}}),s=0;case 9:if(!(s<t.upSkillNum)){e.next=16;break}return t.game.repairUserArms(t.upSkillType),e.next=13,E(50);case 13:s++,e.next=9;break;case 16:t.game.userInfo(),t.game.getMySkill(),t.$Spin.hide();case 19:case"end":return e.stop()}}),e)})))()}}},Ee=Oe,Le=Object(c["a"])(Ee,Ge,Ue,!1,null,"ceae768e",null),De=Le.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("List",e._l(e.user.userTasks,(function(t){return n("ListItem",{key:t.utid},[n("ListItemMeta",{attrs:{description:t.info+" - 所需物品："+t.need.join(",")}},[n("template",{slot:"title"},[n("p",{domProps:{innerHTML:e._s(t.title+" - 奖励物品："+t.give.join(","))}})])],2),n("template",{slot:"action"},[n("li",[n("a",{on:{click:function(n){return e.game.payUserTask(t.utid)}}},[e._v("完成")])])])],2)})),1),n("Divider",{attrs:{orientation:"left"}},[e._v("系统任务")]),n("List",e._l(e.user.systemTask,(function(t){return n("ListItem",{key:t._id},[n("ListItemMeta",{attrs:{description:""+t.info}},[n("template",{slot:"title"},[n("p",{domProps:{innerHTML:e._s(t.title)}})])],2),n("template",{slot:"action"},[n("li",[n("a",{on:{click:function(n){return e.game.getCopyTask(t._id)}}},[e._v("领取")])])])],2)})),1)],1)},Be=[],je={name:"tasks",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{}}},Ne=je,ze=Object(c["a"])(Ne,Fe,Be,!1,null,"095088da",null),Ae=ze.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CellGroup",e._l(e.userInfo,(function(e,t){return n("Cell",{key:t,attrs:{title:t,extra:""+e}})})),1)},qe=[],Ye={name:"userinfo",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{userInfo:function(){var e=this.user.myInfo,t={};return e&&(t={"等级":e.level,"经验":Math.round(e.exp),"气血":e.hp_cap,"魔法":e.mp,"命中":e.hit,"物理伤害":e.physical_damage,"物理防御":e.physical_defense,"魔法伤害":e.magic_damage,"魔法防御":e.magic_defense,"治疗能力":e.restore_damage,"速度":e.speed,"物理暴击":e.physical_crit,"法术暴击":e.magic_crit,"体质":e.con,"魔力":e.int,"力量":e.str,"耐力":e.vit,"敏捷":e.agi,"潜力":e.potential_num,"躲避":e.dodge,"活力":Math.round(e.vitality_num),"气血储备":Math.round(e.hp_store),"魔法储备":Math.round(e.mp_store),"宝宝经验":Math.round(e.pet_exp)}),t}}},Ke=Ye,We=Object(c["a"])(Ke,Re,qe,!1,null,"309ff728",null),Je=We.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"goods-box"},e._l(e.goods,(function(t,s){return n("Button",{key:s,staticClass:"good-name",style:t.style,attrs:{size:"small"},on:{click:function(n){e.currentGood=t}}},[n("label",{domProps:{innerHTML:e._s(t.name)}})])})),1),n("div",{staticClass:"info-box"},[n("div",{staticClass:"basci-info"},[n("span",{style:e.currentGood.style},[e._v(e._s(e.currentGood.name))]),n("span",{style:e.currentGood.style},[e._v("价格："+e._s(e.currentGood.price))]),n("span",{style:e.currentGood.style},[e._v(e._s(e.currentGood.info))])]),n("Button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.game.byGoodsToSystem(2,e.currentGood._id)}}},[e._v(" 购买 ")])],1)])},Ve=[],Xe={name:"shop",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{currentGood:{}}},mounted:function(){this.game.getSystemSellGoods()},computed:{goods:function(){var e=[];if(this.user.shop)return this.user.shop.goods.forEach((function(t){var n=t.name,s=t.info,o=t.style,a=t._id,r=[null,"灵石","仙石"],i=t.price_type?"".concat(t.price).concat(r[t.price_type]):null,c={name:n,price:i,info:s,style:o,_id:a};e.push(c)})),e}}},Ze=Xe,et=(n("d514"),Object(c["a"])(Ze,Qe,Ve,!1,null,"5512574c",null)),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"br"}),e._v(" 捕捉指定 "),n("i-switch",{attrs:{size:"large","true-color":"#2db7f5","false-color":"#2d8cf0",disabled:e.user.isCompose},model:{value:e.user.catchType,callback:function(t){e.$set(e.user,"catchType",t)},expression:"user.catchType"}},[n("span",{attrs:{slot:"open"},slot:"open"},[e._v("技能")]),n("span",{attrs:{slot:"close"},slot:"close"},[e._v("宠物")])]),e._v(" "),e.user.catchType?[n("div",{staticClass:"br"}),e._v(" 选择技能： "),n("Select",{staticStyle:{"max-width":"140px"},attrs:{multiple:"",size:"small"},model:{value:e.user.catchSkills,callback:function(t){e.$set(e.user,"catchSkills",t)},expression:"user.catchSkills"}},e._l(e.skillList,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),e._v(" 锁定宠物： "),n("Select",{staticStyle:{"max-width":"140px"},attrs:{multiple:"",size:"small"},model:{value:e.user.lockPet,callback:function(t){e.$set(e.user,"lockPet",t)},expression:"user.lockPet"}},e._l(e.user.myPets,(function(t){return n("Option",{key:t._id,attrs:{value:t._id}},[e._v(" "+e._s(t.name)+"["+e._s(t.skill.map((function(e){return e.name})).join("，"))+"] ")])})),1),e._v(" "),n("Checkbox",{attrs:{border:""},on:{"on-change":e.handleAutoChange},model:{value:e.user.isCompose,callback:function(t){e.$set(e.user,"isCompose",t)},expression:"user.isCompose"}},[e._v("自动合成")])]:[e._v(" 选择宠物： "),n("Select",{staticStyle:{"max-width":"300px"},attrs:{multiple:"",size:"small"},model:{value:e.user.catchPet,callback:function(t){e.$set(e.user,"catchPet",t)},expression:"user.catchPet"}},e._l(e.screenMonsterMap,(function(t){return n("Option",{key:t.monsterName,attrs:{value:t.monsterName}},[e._v(" "+e._s(t.monsterName)+" ")])})),1)],n("div",{staticClass:"br"}),n("p",[e.user.catchType&&e.user.catchPetBySkill&&e.user.catchPetBySkill.length>0?n("label",[e._v(" 捕捉目标：【"+e._s(e.user.catchPetBySkill.join("，"))+"】， ")]):e._e(),e._v(" 历史捕捉成功率：【"+e._s(e.catchRate)+"%】 ")])],2)},st=[],ot={name:"pet-catch-ctrl",props:{user:{type:Object,default:function(){return{}}},game:{type:Object,default:function(){return{}}}},data:function(){return{screenMonsterMap:[],interval:0}},computed:{skillList:function(){var e={};return this.screenMonsterMap.filter((function(e){return e.skill})).map((function(t){t.skill.map((function(t){e[t.name]=!0}))})),Object.keys(e)},catchRate:function(){return((user.catchSuccess||0)/(user.catchFail||1)*100).toFixed(2)}},watch:{"user.myPets":{deep:!0,handler:function(e){var t=this.user.lockPet;if(e&&t)for(var n=e.map((function(e){return e._id})),s=0;s<t.length;s++)n.includes(t[s])||(t.splice(s,1),s--)}},"user.catchSkills":{deep:!0,handler:function(e){if(0!==this.screenMonsterMap.length){var t=JSON.parse(JSON.stringify(e||[]));if(0!==t.length){var n=[];this.screenMonsterMap.map((function(e){var n=0;return e.skill&&e.skill.map((function(e){t.includes(e.name)&&n++})),e.tempCount=n,e})).sort((function(e,t){return t.tempCount-e.tempCount})).map((function(e){var s=!1;e.skill.map((function(e){var n=t.findIndex((function(t){return t===e.name}));n>-1&&(t.splice(n,1),s=!0)})),s&&n.push(e)})),this.user.catchPetBySkill=n.sort((function(e,t){return e.monsterLevel-t.monsterLevel})).map((function(e){return e.monsterName}))}else this.user.catchPetBySkill=[]}}}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,E((function(){return window.screens.length>0}));case 2:n=[],s=window.screens,window.monsterData.data.filter((function(e){return 3!==e.type&&e.skill&&e.skill.length>0})).map((function(e){var t=s.find((function(t){return t.monster.includes(e._id)}));t&&n.push({screenId:t._id,screenName:t.name,monsterId:e._id,monsterName:e.name,monsterLevel:e.level,skill:e.skill})})),e.screenMonsterMap=n,e.handleAutoChange(e.user.isCompose);case 7:case"end":return t.stop()}}),t)})))()},methods:{checkScreenHasPet:function(e){var t=this;if(this.user.combatName&&0!==e.length){var n=this.screenMonsterMap.filter((function(e){return e.screenName===t.user.combatName}));return n.some((function(t){return e.includes(t.monsterName)}))}},checkScreenHasSkill:function(){var e=this,t={},n=this.user.catchPetBySkill;return this.screenMonsterMap.filter((function(t){return t.screenName===e.user.combatName&&n.includes(t.monsterName)})).map((function(e){return e.skill.map((function(e){return t[e.name]=!0}))})),Object.keys(t)},checkPetInScreen:function(e){return this.screenMonsterMap.find((function(t){return t.monsterName===e})).screenId},switchCombat:function(e){var t;if(e){var n,s=this.user.catchSkills,o=this.user.catchPetBySkill,a=this.user.myPets.find((function(t){return t._id===e})),r=a.skill.map((function(e){return e.name}));if(s.map((function(e){r.includes(e)||n||(n=e)})),!n)return void this.switchCombat();var i=this.screenMonsterMap.find((function(e){return e.skill.some((function(e){return e.name===n}))&&o.includes(e.monsterName)}));t=i.screenId,this.$Message.info("下一个要抓的技能是【".concat(n,"】，去【").concat(i.screenName,"】"))}else t=this.checkPetInScreen(this.user.catchPetBySkill[0]),this.$Message.info("回到捕获目标第一只宠物重新抓");this.user.team.combat=t,this.game.switchCombatScreen(t)},handleAutoChange:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(s=t.user.lockPet,o=t.user.catchPetBySkill,s&&0!==s.length||t.$Message.warning("检测到你没有锁定宠物，现在立刻取消自动合成还来得及"),o&&0!==o.length){n.next=8;break}return t.$Message.warning("还没设置捕捉"),n.abrupt("return");case 8:if(t.user.team){n.next=12;break}return t.game.createdTeam(t.user.map.id),n.next=12,E((function(){return!!t.user.team}));case 12:if(t.user.combatName){n.next=16;break}return t.switchCombat(),n.next=16,E((function(){return!!t.user.combatName}));case 16:if(t.user.fighting||t.$set(t.user,"fighting",!0),!1!==t.checkScreenHasPet(o)){n.next=22;break}return t.$Message.warning("当前副本没有符合捕捉条件的宠物，正在切换"),t.switchCombat(),n.next=22,E(1e3);case 22:t.game.showMyTeam(0),t.game.startCombat(t.user.team.combat),t.game.getMyPet(),t.loopPetCheck();case 26:case"end":return n.stop()}}),n)})))()},discardPet:function(e,t){var n=this.user.lockPet;return!(n&&n.includes(e._id)||3==e.type||(e.skill||[]).length>=6)&&(this.$Message.info("丢弃".concat(e.name,"【").concat((e.skill||[]).map((function(e){return e.name})).join(",")||"空","】，原因【").concat(t,"】")),this.game.upUserPetLevel(e._id,3),!0)},loopPetCheck:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,s,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,E(6e3);case 2:if(e.user.isCompose){t.next=4;break}return t.abrupt("return");case 4:for(n=e.user.myPets,s=e.user.catchSkills,o=0;o<n.length;o++)a=n[o],a.skill&&0!==a.skill.length&&a.skill.some((function(e){return s.includes(e.name)}))||e.discardPet(a,"没有要的技能");e.composePet(),e.loopPetCheck();case 9:case"end":return t.stop()}}),t)})))()},composePet:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,s,o,a,r,i,c,l,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.user.myPets,s=e.user.lockPet,o=e.user.catchSkills,a=e.checkScreenHasSkill(),r=a.filter((function(e){return o.includes(e)})),l=function(t){var a=n[t],l=a.skill.map((function(e){return e.name}));if(s&&s.includes(a._id))return"continue";var u=!0;if(o.map((function(e){l.includes(e)||(u=!1)})),u)return t>9?(e.$Message.success("已经合成好多只了，自动停止脚本"),console.log("合成脚本完成",Date.now(),e.user.email),e.$set(e.user,"fighting",!1),e.$set(e.user,"isCompose",!1),{v:void 0}):"continue";if(3==a.type)return"continue";if(u=!0,r.map((function(e){l.includes(e)||(u=!1)})),!i&&u)return e.$Message.success("这个地图所有能抓的都抓了【".concat(r.join(","),"】")),e.switchCombat(a._id),{v:void 0};if(i){if(!c){var d=i.skill.map((function(e){return e.name}));l.some((function(e){return!d.includes(e)&&o.includes(e)}))?c=a:t>=9&&e.discardPet(a,"技能重复")}}else i=a;return i&&c?(e.$Message.info("合成".concat(i.name,"【").concat(i.skill.map((function(e){return e.name})).join("，"),"】和").concat(c.name,"【").concat(c.skill.map((function(e){return e.name})).join("，"),"】")),e.game.fitPet(i._id,c._id),{v:void 0}):void 0},u=0;case 7:if(!(u<n.length)){t.next=16;break}if(d=l(u),"continue"!==d){t.next=11;break}return t.abrupt("continue",13);case 11:if("object"!==Object(R["a"])(d)){t.next=13;break}return t.abrupt("return",d.v);case 13:u++,t.next=7;break;case 16:case"end":return t.stop()}}),t)})))()}}},at=ot,rt=Object(c["a"])(at,nt,st,!1,null,"6df37358",null),it=rt.exports,ct={name:"User",components:{BagComponent:pe,EqsComponent:ke,MarketComponent:Se,PetComponent:$e,SkillsComponent:De,TasksComponent:Ae,UserinfoComponent:Je,ShopComponent:tt,PetCatchCtrlComponent:it},data:function(){return{game:{},user:null,config:O,showModal:!1,modalTitle:"",modalType:"",fightGains:{goods:{},gainExp:0,beginTime:0,roundCount:0,fightCount:0}}},watch:{user:{deep:!0,handler:function(e){var t=null,n=0;if(e&&e.screens&&e.team){if(e.team.combat){var s=e.screens.find((function(t){return t._id===e.team.combat}));s&&(t=s.name,n=s.player_num)}if(e.combatId){var o=e.screens.find((function(t){return t._id===e.combatId}));e.tempcombatname=o.name}}e.combatName=t,e.combatTotal=n,this.saveStorageUserInfo(e)}}},computed:{toMap:function(){var e=this.user,t=O.maps;return e&&e.map?t.filter((function(t){return t.id!==e.map.id})):[]},waBao:function(){var e=this.user.goods,t=O.maps;if(!e)return[];var n=e.filter((function(e){return!!e.map})).map((function(e){return{id:e.map,btId:e.id,name:t.find((function(t){return t.id===e.map})).name,mapid:e.map}})).sort((function(e,t){return e.mapid-t.mapid}));return n},unusecbt:function(){var e=this.user.goods;if(!e)return null;var t=e.filter((function(e){return e.unusecbt}));if(0===t.length)return null;var n={normal:t.find((function(e){return!e.highcbt})),high:t.find((function(e){return e.highcbt}))};return n},gains:function(){var e=Date.now(),t=(e-this.fightGains.beginTime)/1e3,n=Math.floor(t/3600),s=Math.floor(t/60%60),o=Math.ceil(t%60),a="".concat(n,"小时").concat(s,"分").concat(o,"秒"),r=Math.floor(this.fightGains.gainExp/t*60),i=(this.fightGains.fightCount/t*60).toFixed(1);return{goods:this.fightGains.goods,gainExp:this.fightGains.gainExp,beginTime:new Date(this.fightGains.beginTime).toTimeString().slice(0,8),roundCount:this.fightGains.roundCount,fightCount:this.fightGains.fightCount,fightTime:a,avgExp:r,avgFightCount:i,tips:"暂无收益，请开启战斗"}}},mounted:function(){ie(this);var e=this.$route.params.email,t=this.getStorageAccount(e);this.initUser(e,t.password),setInterval((function(){var e=Date.now();e-re>3e4&&setTimeout((function(){window.location.reload()}),~~(60*Math.random()*1e3))}),6e4)},methods:{getStorageAccount:function(e){var t=JSON.parse(localStorage.getItem("ydxxGame_userList")||"{}")||{};return{email:e,password:t[e]}},saveStorageUserInfo:function(e){localStorage.setItem(e.email,JSON.stringify({fighting:e.fighting,email:e.email,skillid:e.skillid,skillname:e.skillname,tempcombat:e.tempcombat,combatId:e.combatId,catchType:e.catchType,catchSkills:e.catchSkills,catchPetBySkill:e.catchPetBySkill,catchPet:e.catchPet,catchSuccess:e.catchSuccess||0,catchFail:e.catchFail||0,lockPet:e.lockPet,isCompose:e.isCompose,isleader:e.isleader,teamleader:e.teamleader,tempcombatid:e.tempcombatid}))},getStorageUserInfo:function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)},initUser:function(e,t){var n=new ae,s=this.getStorageUserInfo(e)||{email:e,status:"已添加",teams:[],fighting:!1};this.game=n,window.game=n,s.market={type:"1"},this.user=s,window.user=this.user,n.login(e,t)},setMessage:function(e,t){var n=this;re=Date.now(),t.time=this.getDateTime(),this.fightGains.beginTime=this.fightGains.beginTime||re,this.fightGains.roundCount++,t.msg=t.round_arr.map((function(e){if(1===e.a_skill_type)return e.mark.indexOf(n.user.email)>-1&&(e.mark.indexOf("成功")>1&&(n.game.getMyPet(),n.user.catchSuccess||(n.user.catchSuccess=0),n.user.catchSuccess++),e.mark.indexOf("失败")>1&&(n.user.catchFail||(n.user.catchFail=0),n.user.catchFail++),(e.mark.indexOf("mp不足")>1||e.mark.indexOf("无法捕捉")>1)&&(n.$Message.info("自动切换技能攻击早点结束"),n.game.roundOperating(n.user.skilltype||"1",n.user.skillid||"1","",n.user.team?n.user.team._id:""))),e.mark;var t="";e.a_trigger.length>0&&(t="【",t+=e.a_trigger.join("，"),t+="！！！】");var s="";e.a_id!=e.a_name&&(s="".concat(e.a_id,"的"));var o="".concat(s).concat(e.a_name),a="【".concat(e.b_name,"】"),r=e.hurt.map(Math.floor).join(",");return 1===e.hurt_type?"".concat(o,"：").concat(e.process,"！").concat(t).concat(a,"随即受到了【").concat(r,"】点伤害"):"".concat(o,"：").concat(e.process,"！").concat(t,"然后胸一甩，对").concat(a,"奶了一口[").concat(r,"]")})),t.die_arr&&t.die_arr.length&&t.msg.push("死亡单位【".concat(t.die_arr.map((function(e){return"".concat(e)})).join(","),"】")),1===t.win&&(t.exp.forEach((function(s){s.name==e&&(t.msg.push("获得经验【".concat(Math.floor(s.exp)||"没经验了","】")),n.fightGains.gainExp+=Math.floor(s.exp),n.fightGains.fightCount++)})),t.player_reward.forEach((function(s){if(s.name==e)if(s.mark)t.msg.push(s.mark);else{var o=[];s.goods.forEach((function(e){o.push(e.gname)})),o.length>0&&(t.msg.push("战利品【".concat(o.join(","),"】")),n.user.updateGoods=!0,o.forEach((function(e){n.fightGains.goods.hasOwnProperty(e)?n.fightGains.goods[e]++:n.fightGains.goods[e]=1})))}}))),2===t.win&&(this.fightGains.fightCount++,this.gains.roundCount>0&&!this.gains.avgExp&&(this.user.teamStatus="leave")),this.$set(this.user,"message",t)},handleAllocationPoint:function(e){var t=this.user.myInfo.potential_num;1===e&&this.game.allocationPoint(t,0,0,0,0),2===e&&this.game.allocationPoint(0,t,0,0,0)},getDateTime:function(){var e=new Date;return"H:i:s".replace(/[His]/g,(function(t){var n="";switch(t){case"H":n=e.getHours();break;case"i":n=e.getMinutes();break;case"s":n=e.getSeconds();break;default:break}return n.toString().padStart(2,"0")}))},handleAutoWaBao:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$createElement,!(e.user.team||e.user.fighting||e.user.message)){t.next=6;break}return e.game.leaveTeam(),e.$Message.warning("想办法把战斗停下来，然后重新加载至没有战斗信息为止，否则会触发刷新重连"),e.$set(e.user,"fighting",!1),t.abrupt("return");case 6:e.$Message.warning("开始全部挖藏宝图，别乱点"),window.freshPackage=!1,s=0;case 9:if(!(s<e.waBao.length)){t.next=21;break}return o=e.waBao[s],e.$Message.success("正在挖第".concat(s+1,"/").concat(e.waBao.length,"个藏宝图")),t.next=14,e.moveToMap(o.mapid);case 14:return t.next=16,E(5e3);case 16:e.$Message.success("正在挥动洛阳铲"),e.game.wbt(o.btId);case 18:s++,t.next=9;break;case 21:return t.next=23,E(1e3);case 23:e.$Modal.info({render:function(){return n("div",[e.user.wbtResult.map((function(e){return n("div",[e])}))])}}),window.freshPackage=!0,e.game.userInfo(),e.user.goods=[],e.user.goodsPage=1,e.game.getMyGoods(),e.readToUse=null;case 30:case"end":return t.stop()}}),t)})))()},moveToMap:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var s,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.user.map.id!==e){n.next=2;break}return n.abrupt("return");case 2:s=L(t.user.map.id,e),o=0;case 4:if(!(o<s.length)){n.next=13;break}return a=s[o],t.$Message.success("正在切图去".concat(a.name)),n.next=9,E(5e3);case 9:t.game.moveToNewMap(a.id);case 10:o++,n.next=4;break;case 13:case"end":return n.stop()}}),n)})))()},handleUseItem:function(){this.useItem_mixin(this.readToUse)}}},lt=ct,ut=(n("2441"),n("93c3"),Object(c["a"])(lt,z,A,!1,null,"709aa2bc",null)),dt=ut.exports;s["default"].use(d["a"]);var mt=[{path:"/",name:"Home",component:N},{path:"/user/:email",name:"user",component:dt}],pt=new d["a"]({routes:mt}),ft=pt,ht=n("2f62");s["default"].use(ht["a"]);var gt=new ht["a"].Store({state:{},mutations:{},actions:{},modules:{}}),vt={data:function(){return{rareType:["普通","稀有","传说","PY"]}},filters:{addStyle_mixin:function(e){var t=["体质","魔力","力量","耐力","敏捷"],n=["物理暴击","法术暴击","特技"];return t.includes(e)?"color:green;font-weight: 600;":n.includes(e)?"color:orchid;":""},getIndex_mixin:function(e){var t=e+1;return t.toString()}},methods:{useItem_mixin:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var s,o,a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=t.$createElement,o=e.useNum,a=e.id,r=e.name,o&&!(o<0)){n.next=4;break}return n.abrupt("return",t.$Message.error("请输入正确的数量"));case 4:window.freshPackage=!1,t.$Spin.show({render:function(){return s("p",["正在连续使用物品",r,o,"个，为避免请求次数过多和程序错乱，在此窗口关闭后再进行其他操作"])}}),i=0;case 7:if(!(i<o)){n.next=14;break}return t.game.useGoods(a),n.next=11,E(1100);case 11:i++,n.next=7;break;case 14:window.freshPackage=!0,t.game.userInfo(),t.user.goods=[],t.user.goodsPage=1,t.game.getMyGoods(),t.readToUse=null,t.$Spin.hide();case 21:case"end":return n.stop()}}),n)})))()},getEqsInfo_mixin:function(e){var t={"佩戴等级":e.wear_level,"物理伤害":e.physical_damage,"物理防御":e.physical_defense,"魔法伤害":e.magic_damage,"魔法防御":e.magic_defense,"治疗能力":e.restore_damage,"气血":e.a,"速度":e.speed,"体质":e.con,"魔力":e.int,"力量":e.str,"耐力":e.vit,"敏捷":e.agi,"物理暴击":e.physical_crit,"法术暴击":e.magic_crit,"特技":e.skill?"".concat(e.skill.name,"--").concat(e.skill.info):"","评分":Math.round(e.score)},n={};for(var s in t)if(t.hasOwnProperty(s)){var o=t[s];o&&(n[s]=o)}return n}}},yt=n("f825"),kt=n.n(yt);n("f8ce");s["default"].use(kt.a),s["default"].mixin(vt),s["default"].config.productionTip=!1,new s["default"]({router:ft,store:gt,render:function(e){return e(u)}}).$mount("#app")},"7c55":function(e,t,n){"use strict";var s=n("2395"),o=n.n(s);o.a},"8d91":function(e,t,n){},"93c3":function(e,t,n){"use strict";var s=n("a869"),o=n.n(s);o.a},9728:function(e,t,n){},a869:function(e,t,n){},b1f1:function(e,t,n){},bcab:function(e,t,n){},c1e2:function(e,t,n){"use strict";var s=n("b1f1"),o=n.n(s);o.a},c3cf:function(e,t,n){(function(s){var o;n("fb6a"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),o=function(e,t,n){(function(e,t,s){var o=e,a=4,r=1,i=2,c=1,l=65535,u=1,d=7,m=o.Package={},p=o.Message={};m.TYPE_HANDSHAKE=1,m.TYPE_HANDSHAKE_ACK=2,m.TYPE_HEARTBEAT=3,m.TYPE_DATA=4,m.TYPE_KICK=5,p.TYPE_REQUEST=0,p.TYPE_NOTIFY=1,p.TYPE_RESPONSE=2,p.TYPE_PUSH=3,o.strencode=function(e){for(var n=new t(3*e.length),s=0,o=0;o<e.length;o++){var a=e.charCodeAt(o),r=null;r=a<=127?[a]:a<=2047?[192|a>>6,128|63&a]:[224|a>>12,128|(4032&a)>>6,128|63&a];for(var i=0;i<r.length;i++)n[s]=r[i],++s}var c=new t(s);return f(c,0,n,0,s),c},o.strdecode=function(e){var n=new t(e),s=[],o=0,a=0,r=n.length;while(o<r)n[o]<128?(a=n[o],o+=1):n[o]<224?(a=((63&n[o])<<6)+(63&n[o+1]),o+=2):(a=((15&n[o])<<12)+((63&n[o+1])<<6)+(63&n[o+2]),o+=3),s.push(a);var i,c="",l=8192;for(i=0;i<s.length/l;i++)c+=String.fromCharCode.apply(null,s.slice(i*l,(i+1)*l));return c+=String.fromCharCode.apply(null,s.slice(i*l)),c},m.encode=function(e,n){var s=n?n.length:0,o=new t(a+s),r=0;return o[r++]=255&e,o[r++]=s>>16&255,o[r++]=s>>8&255,o[r++]=255&s,n&&f(o,r,n,0,s),o},m.decode=function(e){var n=0,s=new t(e),o=0,a=[];while(n<s.length){var r=s[n++];o=(s[n++]<<16|s[n++]<<8|s[n++])>>>0;var i=o?new t(o):null;f(i,0,s,n,o),n+=o,a.push({type:r,body:i})}return 1===a.length?a[0]:a},p.encode=function(e,n,s,a,l){var u=h(n)?v(e):0,d=r+u;if(g(n))if(s){if("number"!==typeof a)throw new Error("error flag for number route!");d+=i}else if(d+=c,a){if(a=o.strencode(a),a.length>255)throw new Error("route maxlength is overflow");d+=a.length}l&&(d+=l.length);var m=new t(d),p=0;return p=y(n,s,m,p),h(n)&&(p=k(e,m,p)),g(n)&&(p=_(s,a,m,p)),l&&(p=b(l,m,p)),m},p.decode=function(e){var n=new t(e),s=n.length||n.byteLength,a=0,r=0,i=null,c=n[a++],l=c&u,m=c>>1&d;if(h(m)){var p=parseInt(n[a]),v=0;do{p=parseInt(n[a]);r+=(127&p)*Math.pow(2,7*v),a++,v++}while(p>=128)}if(g(m))if(l)i=n[a++]<<8|n[a++];else{var y=n[a++];y?(i=new t(y),f(i,0,n,a,y),i=o.strdecode(i)):i="",a+=y}var k=s-a,_=new t(k);return f(_,0,n,a,k),{id:r,type:m,compressRoute:l,route:i,body:_}};var f=function(e,t,n,s,o){if("function"===typeof n.copy)n.copy(e,t,s,s+o);else for(var a=0;a<o;a++)e[t++]=n[s++]},h=function(e){return e===p.TYPE_REQUEST||e===p.TYPE_RESPONSE},g=function(e){return e===p.TYPE_REQUEST||e===p.TYPE_NOTIFY||e===p.TYPE_PUSH},v=function(e){var t=0;do{t+=1,e>>=7}while(e>0);return t},y=function(e,t,n,s){if(e!==p.TYPE_REQUEST&&e!==p.TYPE_NOTIFY&&e!==p.TYPE_RESPONSE&&e!==p.TYPE_PUSH)throw new Error("unkonw message type: "+e);return n[s]=e<<1|(t?1:0),s+r},k=function(e,t,n){do{var s=e%128,o=Math.floor(e/128);0!==o&&(s+=128),t[n++]=s,e=o}while(0!==e);return n},_=function(e,t,n,s){if(e){if(t>l)throw new Error("route number is overflow");n[s++]=t>>8&255,n[s++]=255&t}else t?(n[s++]=255&t.length,f(n,s,t,0,t.length),s+=t.length):n[s++]=0;return s},b=function(e,t,n){return f(t,n,e,0,e.length),n+e.length};n.exports=o,"undefined"!=typeof window&&(window.Protocol=o)})("undefined"==typeof window?n.exports:this.Protocol={},"undefined"==typeof window?s:Uint8Array)}.call(t,n,t,e),void 0===o||(e.exports=o)}).call(this,n("b639").Buffer)},d514:function(e,t,n){"use strict";var s=n("9728"),o=n.n(s);o.a},de16:function(e,t,n){"use strict";var s=n("8d91"),o=n.n(s);o.a},f495:function(e,t,n){}});
//# sourceMappingURL=app.ae58f1dd.js.map