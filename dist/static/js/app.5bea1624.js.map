{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/User.vue?d54e","webpack:///./src/views/Home.vue?8a6b","webpack:///./src/App.vue?7356","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?3783","webpack:///./src/config.js","webpack:///./src/libs/tools.js","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2b8c","webpack:///./src/views/Home.vue","webpack:///./src/views/User.vue?aee3","webpack:///./src/libs/YunDingOnlineSDK.js","webpack:///./src/libs/regHooks.js","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?3db7","webpack:///./src/views/User.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?74c1","webpack:///./src/views/User.vue?a85f","webpack:///./src/libs/protocol.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","mounted","$Message","config","background","duration","component","staticClass","ref","formInline","model","callback","$$v","$set","expression","on","handleLogin","_v","handleSCKEYChange","SCKEY","handleDMflag","openDm","slot","handleSendChat","sendMsg","_e","_l","user","index","email","$event","handleReload","isLogin","deleteUser","refInFor","baseUrl","e","frameLoad","directives","rawName","msg","style","top","color","_s","nickname","domProps","staticStyle","serverChanUrl","globalMaps","sleep","method","start","Number","Date","now","Promise","resolve","selfRecursion","setTimeout","flag","findMapPath","nowid","toid","maps","configData","topath","circleCalcle","nid","pre","find","id","up","next","allId","concat","some","filter","map","nicePath","sort","randomNum","minNum","maxNum","Infinity","exclude","parseInt","Math","random","includes","password","userList","showChat","dmflag","msgList","msgDm","dmline","localStorage","getItem","watch","deep","handler","dm","getDmColor","keys","users","forEach","floor","document","body","offsetHeight","addEventListener","setInterval","frames","us","team","emptyTeamUser","methods","setItem","$refs","contentWindow","chatMsg","channel","game","chatSend","saveStorageUser","getStorageUser","onAddUser","passwd","location","reload","status","status_msg","showEqsInfo","showUserInfo","showGains","myInfo","level","exp","nextExp","upPlayerLevel","potential_num","handleAllocationPoint","game_gold","game_silver","openBag","hp_store","mp_store","vitality_num","polyLin","arm","needExp","upSkillNum","upSkillType","handleFationSkill","unusecbt","normal","num","useGoods","readToUse","useNum","handleUseItem","payUserTask","hightcbtTask","utid","getCopyTask","hightcbtTaskId","high","waBao","handleAutoWaBao","item","moveToNewMap","leader","combatName","_id","combat","switchCombatScreen","leaveTeam","fighting","startCombat","createdTeam","getTeamList","addTeam","player_num","skillname","skills","monster","showMypets","message","time","round_num","mark","join","opened","searchText","selected","goodsHandle","price","info","_f","goodsType","selectGood","handleWearItem","selectedGoods","makeGoods","handleSellItem","fightGains","beginTime","gains","tips","img","tabPaneName","skill","columns","handlePet","modal","handleData","type","pet1","pet2","label","selectPet1","selectPet2","confirmHandle","DEBUG","JS_WS_CLIENT_TYPE","JS_WS_CLIENT_VERSION","RES_OK","RES_OLD_CLIENT","gapThreshold","default_config","gameHost","gameProtocol","loginPort","gamePort","loginServer","gameServer","socketPathTpl","Package","Protocol","Message","Tool","replaceParams","str","replaceMaps","replace","full_match","CoreHooks","onLoginGame","code","user_info","assign","console","error","onSaveData","datas","save_keys","mid","hookMark","GameApi","initConfig","isDEBUG","socket","isStop","token","getSocketServer","messageHandlers","TYPE_HANDSHAKE","onHandshake","TYPE_HEARTBEAT","onHeartbeat","TYPE_DATA","onData","TYPE_KICK","onKick","reqId","heartbeatInterval","heartbeatId","heartbeatTimeoutId","heartbeatTimeout","xyUpdateIntervalId","dict","abbrs","protoVersion","serverProtos","clientProtos","initCallback","callbacks","callRoutes","hookHandlers","regHookHandlers","log","port","host","protocol","regHookHandler","route","cb","position","cbMark","cb_item","createWebSocket","url","WebSocket","binaryType","bindEvents","open","onOpen","onMessage","onError","close","onClose","enevtName","event","handShake","messages","decode","Array","isArray","nextHeartbeatTimeout","login","sendMessage","arguments","bytes","strencode","JSON","stringify","pkg_type","routeId","compressRoute","TYPE_REQUEST","TYPE_NOTIFY","encode","packet","readyState","CLOSED","send","parse","strdecode","Error","TYPE_HANDSHAKE_ACK","sys","heartbeat","protos","version","server","client","clearTimeout","heartbeatTimeoutCb","gap","is_call","is_bubble","indexOf","Stop","clearInterval","handshakeBuffer","rsa","_email","pwd","is_r","login_email","login_pwd","onLogin","loginToken","xyUpdate","send_msg","send_channel","getMylogs","getMyFb","fbProcess","move","x","nextMap","getAllCombatScreen","cbatid","tid","roundOperating","attack_id","mtid","parm","getMyGoods","page","playerSellGoods","ugid","count","selectMyTitle","getMyTitle","getMyPet","wbt","getMySkill","repairUserArms","getUserTask","gid","userInfo","wearUserEquipment","ueid","turnIntoPet","pid","getSystemSellGoods","pageIndex","shelfMyGoods","getPlayerSellGoods","select","byPalyerGoods","usgid","byGoodsToSystem","getSystemTask","selectGoodsArr","arr","sellGoods","playUserPet","upUserPetLevel","point","parms","int","agi","vit","con","allocationPoint","getUserEqs","updateUserPrice","showMyTeam","is_show","getRankList","initFation","createFation","applyForFation","fid","doneFationApply","fation_apply_id","faid","upUserFationLevel","uid","getFationList","getFationApply","showFationUserList","leaveFation","upFationUserSkill","donateFationFunds","getFationTask","upFation","closeUserTask","allSellGoods","resetAttribute","getNewPet","a_id","b_id","ids","fitPet","addUserPetSkill","upid","getMyPetSkillGoods","freshPackage","_app","app","emptyCb","loginCb","userEqs","userTasks","moveToNewMapCb","createdTeamCb","success","leaveTeamCb","$delete","addTeamCb","screens","screen","onMyTeamReloadCb","new_uid","getTeamListCb","teams","ts","switchCombatScreenCb","onStartBatCb","battleUnit","initData","bu","is_palyer","monsterList","catchTarget","catchPet","skilltype","skillid","onRoundBatEndCb","setMessage","roundOperatingCb","chatSendCb","onChatMsgCb","getMyGoodsCb","goods","good","highcbt","goods_type","expand","goodsPage","byGoodsToSystemCb","useGoodsCb","polyLinCb","sellGoodsCb","wearUserEquipmentCb","upPlayerLevelCb","userInfoCb","nextLevelGetExp","getMySkillCb","arms","typeMap","0","1","2","3","levelMap","4","5","6","7","arms_exp","typeName","arms_level","allocationPointCb","getCopyTaskCb","getUserTaskCb","payUserTaskCb","wbtCb","wbtResult","content","makeGoodsCb","getMyPetCb","upUserPetLevelCb","playUserPetCb","turnIntoPetCb","getNewPetCb","fitPetCb","addUserPetSkillCb","gainExp","roundCount","fightCount","saveStorageUserInfo","list","filters","addStyle","arr1","val","arr2","getIndex","toString","disabled","computed","toMap","toMaps","gds","btId","mapid","btMaps","unuse","ele","obj","eq_info","fightTime","avgExp","avgFightCount","eqsInfo","等级","经验","round","气血","hp_cap","魔法","mp","命中","hit","物理伤害","physical_damage","物理防御","physical_defense","魔法伤害","magic_damage","魔法防御","magic_defense","治疗能力","restore_damage","速度","speed","物理暴击","physical_crit","法术暴击","magic_crit","体质","魔力","力量","耐力","敏捷","潜力","躲避","dodge","活力","气血储备","魔法储备","宝宝经验","pet_exp","petsInfo","pets","petList","options","pet","bookList","regHooks","initUser","messageTime","getStorageAccount","getStorageUserInfo","getDateTime","round_arr","ra","a_skill_type","die_arr","win","player_reward","reward","gname","pointNum","full","date","getHours","getMinutes","getSeconds","padStart","updateGoods","res","getEqsInfo","佩戴等级","wear_level","a","特技","评分","score","eq_data","element","points","Vue","use","VueRouter","routes","path","Home","User","router","Vuex","Store","state","mutations","actions","viewDesign","productionTip","store","render","h","App","$mount","define","require","ByteArray","global","PKG_HEAD_BYTES","MSG_FLAG_BYTES","MSG_ROUTE_CODE_BYTES","MSG_ROUTE_LEN_BYTES","MSG_ROUTE_CODE_MAX","MSG_COMPRESS_ROUTE_MASK","MSG_TYPE_MASK","TYPE_RESPONSE","TYPE_PUSH","byteArray","offset","charCode","charCodeAt","codes","_buffer","copyArray","buffer","array","end","chunk","String","fromCharCode","rs","idBytes","msgHasId","caculateMsgIdBytes","msgLen","msgHasRoute","encodeMsgFlag","encodeMsgId","encodeMsgRoute","encodeMsgBody","bytesLen","byteLength","pow","routeLen","bodyLen","dest","doffset","src","soffset","copy","len","tmp","Buffer","Uint8Array"],"mappings":"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","file":"static/js/app.5bea1624.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=260d9d7f&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=260d9d7f&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=2bb7ed36&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=2bb7ed36&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n<script>\nexport default {\n  mounted () {\n    this.$Message.config({\n      background: true,\n      duration: 3\n    })\n  }\n}\n</script>\n<style lang=\"less\">\nhtml, body, #app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n}\n.ivu-card-body {\n  width: 100%;\n  height: calc(100% - 51px);\n  padding: 8px!important;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=449e6588&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.formInline,\"inline\":\"\"}},[_c('FormItem',{staticClass:\"formitem\",attrs:{\"prop\":\"user\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"账号\"},model:{value:(_vm.formInline.user),callback:function ($$v) {_vm.$set(_vm.formInline, \"user\", $$v)},expression:\"formInline.user\"}})],1),_c('FormItem',{staticClass:\"formitem\",attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},model:{value:(_vm.formInline.password),callback:function ($$v) {_vm.$set(_vm.formInline, \"password\", $$v)},expression:\"formInline.password\"}})],1),_c('FormItem',{staticClass:\"formitem\"},[_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleLogin}},[_vm._v(\"添加账号\")])],1),_c('FormItem',[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"serverChan SCKEY\"},on:{\"on-change\":_vm.handleSCKEYChange},model:{value:(_vm.SCKEY),callback:function ($$v) {_vm.SCKEY=$$v},expression:\"SCKEY\"}})],1),_c('FormItem',[_vm._v(\" 弹幕 \"),_c('i-switch',{on:{\"on-change\":_vm.handleDMflag},model:{value:(_vm.openDm),callback:function ($$v) {_vm.openDm=$$v},expression:\"openDm\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"开\")]),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"关\")])])],1),_c('FormItem',[(_vm.openDm)?_c('Input',{attrs:{\"search\":\"\",\"enter-button\":\"发送\",\"placeholder\":\"快来发送弹幕吧\"},on:{\"on-search\":_vm.handleSendChat},model:{value:(_vm.sendMsg),callback:function ($$v) {_vm.sendMsg=$$v},expression:\"sendMsg\"}}):_vm._e()],1)],1),_c('div',{staticClass:\"card-container\"},[_c('Row',{attrs:{\"gutter\":8}},_vm._l((_vm.userList),function(user,index){return _c('Col',{key:user.email,attrs:{\"xs\":24,\"md\":12,\"xl\":8,\"xxl\":4}},[_c('Card',{staticClass:\"card\",attrs:{\"title\":user.email}},[_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[(user.isLogin)?_c('a',{on:{\"click\":function($event){return _vm.handleReload(index)}}},[_vm._v(\"重新加载\")]):_vm._e(),_vm._v(\" \"),(user.isLogin)?_c('a',{on:{\"click\":function($event){user.isLogin = false}}},[_vm._v(\"登出\")]):_vm._e(),_vm._v(\" \"),(!user.isLogin)?_c('a',{on:{\"click\":function($event){user.isLogin = true}}},[_vm._v(\"登入\")]):_vm._e(),_vm._v(\" \"),_c('a',{on:{\"click\":function($event){return _vm.deleteUser(user.email)}}},[_vm._v(\"删除\")])]),(user.isLogin)?_c('iframe',{ref:\"userFrame\",refInFor:true,attrs:{\"src\":(_vm.baseUrl + \"#/user/\" + (user.email))},on:{\"load\":function (e) { return _vm.frameLoad(index); }}}):_vm._e()])],1)}),1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.openDm),expression:\"openDm\"}]},_vm._l((_vm.msgDm),function(msg){return _c('Tag',{key:msg.key,staticClass:\"dm\",style:({ top: ((msg.top * 32) + \"px\") }),attrs:{\"color\":msg.color,\"size\":\"large\"}},[_vm._v(\" \"+_vm._s(msg.nickname || '系统')+\"：\"),_c('label',{domProps:{\"innerHTML\":_vm._s(msg.msg)}})])}),1),(_vm.serverChanUrl)?_c('iframe',{staticStyle:{\"display\":\"none\"},attrs:{\"src\":_vm.serverChanUrl},on:{\"onload\":function($event){_vm.serverChanUrl = null}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default {\r\n  \"core\": {\r\n      \"ext_url\": \"https://github.com/imdong/YunDingOnlineSDK/raw/master/auto_login.user.js\",\r\n      \"official_login\": \"http://yundingxx.com:3366/login\"\r\n  },\r\n  \"maps\": window.globalMaps\r\n}","import configData from \"@/config.js\";\r\n\r\nexport const sleep = function (method) {\r\n  const start = Number(Date.now())\r\n  return new Promise((resolve) => {\r\n    (function selfRecursion () {\r\n      setTimeout(() => {\r\n        let flag\r\n        if (typeof method === 'function') {\r\n          flag = !method()\r\n        }\r\n        if (typeof method === 'number') {\r\n          flag = Number(Date.now()) - start < method\r\n        }\r\n        if (flag) {\r\n          selfRecursion()\r\n        } else {\r\n          resolve()\r\n        }\r\n      }, 10)\r\n    })()\r\n  })\r\n}\r\n\r\nexport const findMapPath = function (nowid, toid) {\r\n  const maps = configData.maps\r\n  const topath = []\r\n\r\n  function circleCalcle (nid, pre = []) {\r\n    const { up, next } = maps.find(m => m.id === nid)\r\n    const allId = up.concat(next)\r\n    if (pre.length > 0 && !allId.some(id => id === pre[pre.length - 1])) return\r\n    allId.filter(id => !pre.some(p => p === id)).map(id => {\r\n      if (id === toid) {\r\n        topath.push([...pre, nid, id])\r\n        return\r\n      }\r\n      circleCalcle(id, [...pre, nid])\r\n    })\r\n  }\r\n\r\n  circleCalcle(nowid)\r\n  const nicePath = topath.sort((n, m) => n.length - m.length)[0]\r\n  nicePath.splice(0, 1)\r\n  return nicePath.map(id => maps.find(m => m.id === id))\r\n}\r\n\r\nexport const randomNum = function (minNum , maxNum = Infinity, exclude = []) {\r\n  let result = parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10)\r\n  if (exclude.length >= (maxNum - minNum)) {\r\n    return null\r\n  }\r\n  if (exclude.includes(result)) {\r\n    result = randomNum(minNum, maxNum, exclude)\r\n  }\r\n  return result\r\n}","<template>\r\n  <div class=\"home\">\r\n    <Form\r\n      ref=\"formInline\"\r\n      :model=\"formInline\"\r\n      inline\r\n    >\r\n      <FormItem prop=\"user\" class=\"formitem\">\r\n        <Input type=\"text\" v-model=\"formInline.user\" placeholder=\"账号\" />\r\n      </FormItem>\r\n      <FormItem prop=\"password\" class=\"formitem\">\r\n        <Input type=\"password\" v-model=\"formInline.password\" placeholder=\"密码\"/>\r\n      </FormItem>\r\n      <FormItem class=\"formitem\">\r\n        <Button type=\"primary\" size=\"small\" @click=\"handleLogin\">添加账号</Button>\r\n      </FormItem>\r\n      <FormItem>\r\n        <Input type=\"password\" v-model=\"SCKEY\" @on-change=\"handleSCKEYChange\" placeholder=\"serverChan SCKEY\" />\r\n      </FormItem>\r\n      <FormItem>\r\n        弹幕\r\n        <i-switch v-model=\"openDm\" @on-change=\"handleDMflag\">\r\n          <span slot=\"open\">开</span>\r\n          <span slot=\"close\">关</span>\r\n        </i-switch>\r\n      </FormItem>\r\n      <FormItem>\r\n        <Input v-if=\"openDm\" search enter-button=\"发送\" placeholder=\"快来发送弹幕吧\" @on-search=\"handleSendChat\" v-model=\"sendMsg\"/>\r\n      </FormItem>\r\n    </Form>\r\n    <div class=\"card-container\">\r\n      <Row :gutter=\"8\">\r\n          <Col\r\n            :xs=\"24\"\r\n            :md=\"12\"\r\n            :xl=\"8\"\r\n            :xxl=\"4\"\r\n            v-for=\"(user, index) in userList\"\r\n            :key=\"user.email\"\r\n          >\r\n            <Card :title=\"user.email\" class=\"card\">\r\n              <div slot=\"extra\">\r\n                <a v-if=\"user.isLogin\" @click=\"handleReload(index)\">重新加载</a>\r\n                &nbsp;\r\n                <a v-if=\"user.isLogin\" @click=\"user.isLogin = false\">登出</a>\r\n                &nbsp;\r\n                <a v-if=\"!user.isLogin\" @click=\"user.isLogin = true\">登入</a>\r\n                &nbsp;\r\n                <a @click=\"deleteUser(user.email)\">删除</a>\r\n              </div>\r\n              <iframe\r\n                v-if=\"user.isLogin\"\r\n                ref=\"userFrame\"\r\n                :src=\"`${baseUrl}#/user/${user.email}`\"\r\n                @load=\"e => frameLoad(index)\"\r\n              />\r\n            </Card>\r\n          </Col>\r\n      </Row>\r\n    </div>\r\n    <div v-show=\"openDm\">\r\n      <Tag\r\n        v-for=\"msg in msgDm\"\r\n        :key=\"msg.key\"\r\n        class=\"dm\"\r\n        :style=\"{ top: `${msg.top * 32}px` }\"\r\n        :color=\"msg.color\"\r\n        size=\"large\"\r\n      >\r\n        {{msg.nickname || '系统'}}：<label v-html=\"msg.msg\" />\r\n      </Tag>\r\n    </div>\r\n    <iframe :src=\"serverChanUrl\" v-if=\"serverChanUrl\" @onload=\"serverChanUrl = null\" style=\"display:none;\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nlet lastServerChanSend = 0;\r\n\r\nimport { sleep, randomNum } from \"@libs/tools\";\r\nexport default {\r\n  name: 'Home',\r\n  data () {\r\n    const dmflag = localStorage.getItem('dmflag')\r\n    return {\r\n      randomNum,\r\n      baseUrl: `${location.origin}${location.pathname}`,\r\n      formInline: {\r\n        user: '',\r\n        password: ''\r\n      },\r\n      userList: [],\r\n      showChat: false,\r\n      openDm: dmflag ? dmflag === 'true': true,\r\n      msgList: [],\r\n      msgDm: [],\r\n      sendMsg: '',\r\n      dmline: 0,\r\n      SCKEY: localStorage.getItem('sckey'),\r\n      serverChanUrl: null\r\n    }\r\n  },\r\n  watch: {\r\n    'msgList.length': {\r\n      deep: true,\r\n      handler (length) {\r\n        if (length === 0) return\r\n        const dm = this.msgList[length - 1]\r\n        dm.top = this.randomNum(0, this.dmline)\r\n        dm.color = this.getDmColor(dm)\r\n        this.msgDm.push(dm)\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    // 加载历史账号\r\n    const users = this.getStorageUser();\r\n    const userList = []\r\n    Object.keys(users).forEach((email) => {\r\n      userList.push({ email, isLogin: true, password: users[email] });\r\n    });\r\n    this.userList = userList\r\n\r\n    this.dmline = Math.floor(window.document.body.offsetHeight / 36) - 1\r\n    window.addEventListener('resize', () => {\r\n      this.dmline = Math.floor(window.document.body.offsetHeight / 36) - 1\r\n    })\r\n\r\n    // 每隔5分钟检测有没有队伍\r\n    setInterval(() => {\r\n      if (!this.SCKEY) return\r\n      const frames = this.$refs['userFrame']\r\n      const emptyTeamUser = []\r\n      frames.map(fms => {\r\n        const us = fms.contentWindow.user\r\n        if (!us.team) {\r\n          emptyTeamUser.push(us.email)\r\n        }\r\n      })\r\n      if (emptyTeamUser.length === 0) return\r\n      this.serverChanUrl = `https://sc.ftqq.com/${this.SCKEY}.send?text=来自夏影的温馨提醒&desp=你的这些账号[${emptyTeamUser.join('，')}]已经不在队伍里面，我怀疑已经掉线了`\r\n    }, 310000);\r\n  },\r\n  methods: {\r\n    handleDMflag () {\r\n      localStorage.setItem('dmflag', this.openDm)\r\n    },\r\n    handleSCKEYChange () {\r\n      localStorage.setItem('sckey', this.SCKEY)\r\n    },\r\n    frameLoad (index) {\r\n      if (index != 0) return;\r\n      this.msgList = this.$refs['userFrame'][0].contentWindow.chatMsg\r\n    },\r\n    getDmColor (msg) {\r\n      // 回收弹幕\r\n      setTimeout(() => {\r\n        const dmindex = this.msgDm.findIndex(m => m.key == msg.key)\r\n        this.msgDm.splice(dmindex, 1)\r\n      }, 20000)\r\n      if (msg.channel == 0) {\r\n        return 'volcano'\r\n      }\r\n      return msg.nickname == this.userList[0].email ? 'primary': 'success'\r\n    },\r\n    handleSendChat () {\r\n      this.$refs['userFrame'][0].contentWindow.game.chatSend(this.sendMsg)\r\n      this.sendMsg = ''\r\n    },\r\n    async handleLogin () {\r\n      const formInline = this.formInline;\r\n      if (!formInline.user || !formInline.password) {\r\n        this.$Message.error('账号密码没填好');\r\n        return;\r\n      }\r\n      this.onAddUser(formInline.user, formInline.password)\r\n    },\r\n    /**\r\n     * 将账号密码保存到 localStorage 中\r\n     * @param {*} email\r\n     * @param {*} password\r\n     */\r\n    saveStorageUser: function (email, password) {\r\n        let users = this.getStorageUser();\r\n        if ('undefined' == typeof password) {\r\n            delete users[email];\r\n            localStorage.removeItem(email)\r\n        } else {\r\n            users[email] = password;\r\n        }\r\n        localStorage.setItem('ydxxGame_userList', JSON.stringify(users));\r\n    },\r\n    /**\r\n     * 从 localStorage 中取出账号密码\r\n     * @param {*} email 可选\r\n     */\r\n    getStorageUser: function (email) {\r\n        let users = JSON.parse(localStorage.getItem('ydxxGame_userList') || '{}') || {};\r\n        return email ? (users[email] || null) : users;\r\n    },\r\n    /**\r\n      * 页面表单 添加用户\r\n      * @param {*} event\r\n      */\r\n    onAddUser: function (email, passwd) {\r\n      // 保存账号密码\r\n      this.saveStorageUser(email, passwd);\r\n      // 添加进去\r\n      this.userList.push({ email, isLogin: true, password: passwd })\r\n    },\r\n    handleReload (index) {\r\n      this.$refs['userFrame'][index].contentWindow.location.reload()\r\n    },\r\n    /**\r\n      * 删除用户\r\n      * @param {*} row\r\n      */\r\n    deleteUser: function (email) {\r\n      const user = this.userList.find(ul => ul.email === email)\r\n      const index = this.userList.indexOf(user)\r\n      // 从列表删除此用户\r\n      this.userList.splice(index, 1);\r\n\r\n      // 更新保存用户\r\n      this.saveStorageUser(email);\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.home {\r\n  padding: 16px;\r\n  position: relative;\r\n  overflow-x: hidden;\r\n  height: 100%;\r\n  .formitem {\r\n    width: 100px;\r\n  }\r\n  .dm {\r\n    word-break: keep-all;\r\n    position: absolute;\r\n    z-index: 9999;\r\n    animation: dmframe 20s linear;\r\n    top: 0;\r\n    left: 100%;\r\n    @keyframes dmframe {\r\n      0% { left: 100%; }\r\n      100% { left: -100%; }\r\n    }\r\n  }\r\n  .card-container {\r\n    width: 100%;\r\n    .card {\r\n      display: inline-block;\r\n      width: 100%;\r\n      height: 430px;\r\n      margin: 0 8px 8px 0;\r\n      vertical-align: top;;\r\n    }\r\n  }\r\n  iframe {\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 0;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=2bb7ed36&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=2bb7ed36&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2bb7ed36\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('div',{staticClass:\"user\"},[_c('p',[_vm._v(\" 状态：\"+_vm._s(_vm.user.status)+\" \"+_vm._s(_vm.user.status_msg && (\"\" + (_vm.user.status_msg)))+\" \"),_c('ButtonGroup',{attrs:{\"size\":\"small\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.showEqsInfo = true}}},[_vm._v(\" 装备 \")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.showUserInfo = true}}},[_vm._v(\" 属性 \")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.showGains = true}}},[_vm._v(\" 收益 \")])],1)],1),(_vm.user.myInfo)?[_c('div',{staticClass:\"br\"}),_c('p',[_vm._v(\" LV.\"+_vm._s(_vm.user.myInfo.level)+\" [\"+_vm._s(Math.floor(_vm.user.myInfo.exp))+\"/\"+_vm._s(Math.floor(_vm.user.myInfo.nextExp))+\"] \"),(_vm.user.myInfo.exp > _vm.user.myInfo.nextExp)?_c('a',{on:{\"click\":function($event){return _vm.game.upPlayerLevel()}}},[_vm._v(\"升级\")]):_vm._e(),_vm._v(\" \"),(_vm.user.myInfo.potential_num > 0)?_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\" 加点 \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('a',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleAllocationPoint(1)}}},[_vm._v(\" 全力加点 \")]),_c('a',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleAllocationPoint(2)}}},[_vm._v(\" 全魔加点 \")])])],1):_vm._e()],1),_c('div',{staticClass:\"br\"}),_c('p',[_vm._v(\" 财产：\"+_vm._s(Math.floor(_vm.user.myInfo.game_gold))+\"仙石 \"+_vm._s(Math.floor(_vm.user.myInfo.game_silver))+\"灵石 \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.openBag}},[_vm._v(\" 储物戒指 \")])],1),_c('div',{staticClass:\"br\"}),_c('p',[_vm._v(\" 气血储备：\"+_vm._s(Math.floor(_vm.user.myInfo.hp_store))+\" 魔法储备：\"+_vm._s(Math.floor(_vm.user.myInfo.mp_store))+\" 活力：\"+_vm._s(Math.floor(_vm.user.myInfo.vitality_num))+\" \"),_c('a',{on:{\"click\":function($event){return _vm.game.polyLin(3)}}},[_vm._v(\"仙蕴转活力\")])])]:_vm._e(),(_vm.user.arms)?[_c('div',{staticClass:\"br\"}),_c('div',[_vm._l((_vm.user.arms),function(arm){return _c('Tag',{key:arm.name},[_vm._v(\" \"+_vm._s(arm.name)+\"[\"+_vm._s(arm.exp)+\"/\"+_vm._s(arm.needExp)+\"] \")])}),_vm._v(\" \"),_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\" 点技能 \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('Input',{staticStyle:{\"width\":\"180px\"},attrs:{\"type\":\"number\"},model:{value:(_vm.upSkillNum),callback:function ($$v) {_vm.upSkillNum=$$v},expression:\"upSkillNum\"}},[_c('Select',{staticStyle:{\"width\":\"60px\"},attrs:{\"slot\":\"prepend\",\"transfer\":\"\"},slot:\"prepend\",model:{value:(_vm.upSkillType),callback:function ($$v) {_vm.upSkillType=$$v},expression:\"upSkillType\"}},[_c('Option',{attrs:{\"value\":1}},[_vm._v(\"剑修\")]),_c('Option',{attrs:{\"value\":2}},[_vm._v(\"枪修\")])],1),_c('Button',{attrs:{\"slot\":\"append\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleFationSkill},slot:\"append\"},[_vm._v(\"确定\")])],1)],1)],1)],2)]:_vm._e(),[(_vm.unusecbt)?[(_vm.unusecbt.normal)?[_c('div',{staticClass:\"br\"}),_vm._v(\" 检测到你有 \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.unusecbt.normal.num))]),_vm._v(\" 张没鉴定的 \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"藏宝图\")]),_vm._v(\" [\"),_c('a',{on:{\"click\":function () {\n          _vm.game.useGoods(_vm.unusecbt.normal.id)\n        }}},[_vm._v(\"鉴定一张\")]),_vm._v(\"] [\"),_c('a',{on:{\"click\":function () {\n          _vm.readToUse = {\n            useNum: _vm.unusecbt.normal.num,\n            id: _vm.unusecbt.normal.id,\n            name: '藏宝图'\n          };\n          _vm.handleUseItem()\n        }}},[_vm._v(\"全部鉴定\")]),_vm._v(\"] \"),(_vm.unusecbt.normal.num >= 12)?[_c('div',{staticClass:\"br\"}),(_vm.hightcbtTask)?_c('a',{on:{\"click\":function($event){return _vm.game.payUserTask(_vm.hightcbtTask.utid)}}},[_vm._v(\" 完成 \")]):_c('a',{on:{\"click\":function($event){return _vm.game.getCopyTask(_vm.hightcbtTaskId)}}},[_vm._v(\" 领取 \")]),_vm._v(\" 高级宝图任务 \")]:_vm._e()]:_vm._e(),(_vm.unusecbt.high)?[_c('div',{staticClass:\"br\"}),_vm._v(\" 检测到你有 \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.unusecbt.high.num))]),_vm._v(\" 张没鉴定的 \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"高级藏宝图\")]),_vm._v(\" [\"),_c('a',{on:{\"click\":function () {\n          _vm.readToUse = {\n            useNum: _vm.unusecbt.high.num,\n            id: _vm.unusecbt.high.id,\n            name: '高级藏宝图'\n          };\n          _vm.handleUseItem();\n        }}},[_vm._v(\"全部鉴定\")]),_vm._v(\"] \")]:_vm._e()]:_vm._e()],(_vm.waBao.length > 0)?[_c('div',{staticClass:\"br\"}),_vm._v(\" 检测到你有 \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.waBao.length))]),_vm._v(\" 张藏宝图 \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.handleAutoWaBao}},[_vm._v(\" 自动挖宝 \")])]:_vm._e(),(_vm.user.map)?[_c('div',{staticClass:\"br\"}),_vm._v(\" 地图： \"),(_vm.user.team)?_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\",\"disabled\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.user.map.name)+\" \")]):_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.user.map.name)+\" \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.toMap),function(item){return _c('p',{key:item.id},[_c('a',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\"},on:{\"click\":function () {\n            _vm.game.moveToNewMap(item.id);\n          }}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])])}),0)],1)]:_vm._e(),(_vm.user.team && _vm.user.team.leader === _vm.user.email)?[_c('div',{staticClass:\"br\"}),_vm._v(\" 副本： \"),_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.user.combatName || '未选择')+\" \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.user.screens),function(item){return _c('p',{key:item._id},[_c('a',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\"},on:{\"click\":function () {\n            _vm.user.team.combat = item._id;\n            _vm.game.switchCombatScreen(item._id);\n          }}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])])}),0)],1)]:_vm._e(),_c('div',{staticClass:\"br\"}),_vm._v(\" 队伍： \"),(_vm.user.team && _vm.user.team.leader === _vm.user.email)?[_vm._v(\" [\"+_vm._s(_vm.user.team.users.length || 1)+\"/5] \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"error\"},on:{\"click\":function($event){return _vm.game.leaveTeam()}}},[_vm._v(\" 解散 \")]),_vm._v(\" \"),_c('i-switch',{attrs:{\"disabled\":!_vm.user.combatName,\"true-color\":\"#13ce66\",\"false-color\":\"#ff4949\",\"size\":\"large\"},on:{\"on-change\":function (flag) {\n        _vm.user.fighting && _vm.game.startCombat(_vm.user.team.combat)\n      }},model:{value:(_vm.user.fighting),callback:function ($$v) {_vm.$set(_vm.user, \"fighting\", $$v)},expression:\"user.fighting\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"战斗\")]),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"平时\")])])]:(_vm.user.team)?[_vm._v(\" 队长[\"+_vm._s(_vm.user.team.leader)+\"] \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.game.leaveTeam()}}},[_vm._v(\" 离开 \")])]:[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.game.createdTeam(_vm.user.map.id)}}},[_vm._v(\" 创建 \")]),_vm._v(\" \"),_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.game.getTeamList(_vm.user.map.id)}}},[_vm._v(\" 加入 \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.user.teams),function(item){return _c('p',{key:item._id},[_c('a',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.game.addTeam(item._id)}}},[_vm._v(\" \"+_vm._s(item.leader.nickname)+\" (\"+_vm._s(item.leader.level)+\") [\"+_vm._s(item.users.length)+\"/\"+_vm._s((item.combat || {}).player_num)+\"] \")])])}),0)],1)],_c('div',{staticClass:\"br\"}),_vm._v(\" 技能： \"),(_vm.user.skills)?_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.user.skillname || '物理攻击')+\" \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[(_vm.user.skills.length === 0)?[_vm._v(\" 没技能 \")]:_vm._l((_vm.user.skills),function(item){return _c('p',{key:item._id},[_c('a',{staticStyle:{\"width\":\"100%\"},on:{\"click\":function () {\n            _vm.$set(_vm.user, 'skillid', item._id);\n            _vm.$set(_vm.user, 'skillname', item.name);\n          }}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])])})],2)],1):_vm._e(),_c('div',{staticClass:\"br\"}),_vm._v(\" 捕捉： \"),_c('Select',{staticStyle:{\"width\":\"auto\"},attrs:{\"multiple\":\"\",\"size\":\"small\"},model:{value:(_vm.user.catchPet),callback:function ($$v) {_vm.$set(_vm.user, \"catchPet\", $$v)},expression:\"user.catchPet\"}},_vm._l((_vm.monsterList),function(monster){return _c('Option',{key:monster,attrs:{\"value\":monster}},[_vm._v(\" \"+_vm._s(monster)+\" \")])}),1),_vm._v(\" 丢弃 \"),_c('Select',{staticStyle:{\"width\":\"auto\"},attrs:{\"multiple\":\"\",\"size\":\"small\"},model:{value:(_vm.user.discardPet),callback:function ($$v) {_vm.$set(_vm.user, \"discardPet\", $$v)},expression:\"user.discardPet\"}},_vm._l((_vm.monsterList),function(monster){return _c('Option',{key:monster,attrs:{\"value\":monster}},[_vm._v(\" \"+_vm._s(monster)+\" \")])}),1),_c('div',{staticClass:\"br\"}),_vm._v(\" 宠物： \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){_vm.showMypets=true}}},[_vm._v(\"查看\")]),_c('div',{staticClass:\"br\"}),('object' == typeof _vm.user.message)?_c('div',[_vm._v(\" [\"+_vm._s(_vm.user.message.time)+\"] \"+_vm._s('第' + _vm.user.message.round_num + '轮')+\" \"),_c('div',{staticStyle:{\"display\":\"inline-block\"},domProps:{\"innerHTML\":_vm._s(_vm.user.message.mark)}}),_c('div',{staticStyle:{\"display\":\"inline-block\"},domProps:{\"innerHTML\":_vm._s(_vm.user.message.msg.join('<br />'))}})]):_vm._e(),_c('Modal',{attrs:{\"fullscreen\":\"\",\"footer-hide\":\"\"},model:{value:(_vm.opened),callback:function ($$v) {_vm.opened=$$v},expression:\"opened\"}},[_c('div',{staticClass:\"good-header\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"储物戒指\")]),_c('Input',{staticStyle:{\"width\":\"66%\"},attrs:{\"suffix\":\"ios-search\",\"placeholder\":\"名称、说明、属性值\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),_c('div',{staticClass:\"goods-box\"},_vm._l((_vm.goods),function(item){return _c('Badge',{key:item.id,attrs:{\"count\":item.selected,\"overflow-count\":\"999\"}},[_c('Button',{staticClass:\"good-name\",style:(item.style),attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.goodsHandle(item)}}},[_c('label',{domProps:{\"innerHTML\":_vm._s(item.name)}}),_vm._v(\"(\"+_vm._s(item.num)+\") \")])],1)}),1),_c('div',{staticClass:\"good-info\"},[(!_vm.readToUse)?_c('p',[_vm._v(\" 去上面点一个物品 \")]):[_c('div',{staticClass:\"info-box\"},[_c('div',{staticClass:\"basci-info\"},[_c('span',{style:(_vm.readToUse.style)},[_vm._v(\" \"+_vm._s(_vm.readToUse.name)+\" \")]),_c('span',{style:(_vm.readToUse.style)},[_vm._v(\"价格：\"+_vm._s(_vm.readToUse.price))]),_c('span',{style:(_vm.readToUse.style)},[_vm._v(_vm._s(_vm.readToUse.info))])]),(_vm.readToUse.eq_info)?[_c('div',{staticClass:\"eq-info\"},_vm._l((_vm.readToUse.eq_info),function(value,key){return _c('span',{key:key,style:(_vm.readToUse.style)},[_c('span',{style:(_vm._f(\"addStyle\")(key))},[_vm._v(_vm._s(key)+\":\")]),_c('span',{style:(_vm._f(\"addStyle\")(key))},[_vm._v(_vm._s(value))])])}),0)]:_vm._e()],2),_c('div',{staticClass:\"button-box\"},[(_vm.readToUse.goodsType !== '可装备的装备')?_c('InputNumber',{attrs:{\"max\":_vm.readToUse.num,\"min\":1},model:{value:(_vm.readToUse.useNum),callback:function ($$v) {_vm.$set(_vm.readToUse, \"useNum\", $$v)},expression:\"readToUse.useNum\"}}):_vm._e(),_c('ButtonGroup',{attrs:{\"size\":\"small\",\"vertical\":\"\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.selectGood}},[_vm._v(\" 标记 \")]),(['可装备的装备'].includes(_vm.readToUse.goodsType))?_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleWearItem}},[_vm._v(\" 装备 \")]):_vm._e(),(['未鉴定的装备', '藏宝图', '技能书', '蛋', '大补丹'].includes(_vm.readToUse.goodsType))?_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleUseItem}},[_vm._v(\" 使用 \")]):_vm._e(),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function () { return _vm.$Message.info('还没做嘤嘤嘤'); }}},[_vm._v(\" 出售 \")]),(_vm.selectedGoods.length > 1)?_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.makeGoods}},[_vm._v(\" 合成 \")]):_vm._e(),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleSellItem}},[_vm._v(\" 分解 \")])],1)],1)]],2)]),_c('Modal',{attrs:{\"fullscreen\":\"\",\"footer-hide\":\"\",\"title\":\"战斗收益\"},model:{value:(_vm.showGains),callback:function ($$v) {_vm.showGains=$$v},expression:\"showGains\"}},[(!_vm.fightGains.beginTime)?_c('div',[_vm._v(\" \"+_vm._s(_vm.gains.tips)+\" \")]):[_c('CellGroup',[_c('Cell',{attrs:{\"title\":\"开始时间\",\"extra\":(\"\" + (_vm.gains.beginTime))}}),_c('Cell',{attrs:{\"title\":\"战斗时长\",\"extra\":(\"\" + (_vm.gains.fightTime))}}),_c('Cell',{attrs:{\"title\":\"获得经验\",\"extra\":(\"\" + (_vm.gains.gainExp))}}),_c('Cell',{attrs:{\"title\":\"战斗回合数\",\"extra\":(\"\" + (_vm.gains.roundCount))}}),_c('Cell',{attrs:{\"title\":\"战斗场数\",\"extra\":(\"\" + (_vm.gains.fightCount))}}),_c('Cell',{attrs:{\"title\":\"经验/分钟\",\"extra\":(\"\" + (_vm.gains.avgExp))}}),_c('Cell',{attrs:{\"title\":\"战斗场数/分钟\",\"extra\":(\"\" + (_vm.gains.avgFightCount))}}),_c('Cell',{attrs:{\"title\":\"战利品\"}})],1),_vm._l((_vm.gains.goods),function(value,key){return _c('Tag',{key:key,attrs:{\"color\":\"pink\"}},[_vm._v(_vm._s(key)+\"(\"+_vm._s(value)+\")\")])})]],2),_c('Modal',{attrs:{\"fullscreen\":\"\",\"footer-hide\":\"\",\"title\":\"装备信息\"},model:{value:(_vm.showEqsInfo),callback:function ($$v) {_vm.showEqsInfo=$$v},expression:\"showEqsInfo\"}},[_c('Collapse',{attrs:{\"simple\":\"\"}},_vm._l((_vm.eqsInfo),function(item,index){return _c('Panel',{key:item.id,attrs:{\"name\":_vm._f(\"getIndex\")(index)}},[_c('img',{staticClass:\"eq-img\",attrs:{\"src\":item.img}}),_c('span',{style:(item.style)},[_vm._v(_vm._s(item.name))]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((item.info),function(value,key){return _c('div',{key:key,style:((\"padding:2px;\" + (item.style)))},[_c('span',{style:(_vm._f(\"addStyle\")(key))},[_vm._v(_vm._s(key)+\"：\")]),_c('span',{style:(_vm._f(\"addStyle\")(key))},[_vm._v(_vm._s(value))])])}),0)])}),1)],1),_c('Modal',{attrs:{\"fullscreen\":\"\",\"footer-hide\":\"\",\"title\":\"人物属性\"},model:{value:(_vm.showUserInfo),callback:function ($$v) {_vm.showUserInfo=$$v},expression:\"showUserInfo\"}},[_c('CellGroup',_vm._l((_vm.userInfo),function(value,key){return _c('Cell',{key:key,attrs:{\"title\":key,\"extra\":(\"\" + value)}})}),1)],1),_c('Modal',{attrs:{\"fullscreen\":\"\",\"footer-hide\":\"\",\"title\":\"宠物信息\"},model:{value:(_vm.showMypets),callback:function ($$v) {_vm.showMypets=$$v},expression:\"showMypets\"}},[_c('Tabs',{attrs:{\"size\":\"small\"},model:{value:(_vm.tabPaneName),callback:function ($$v) {_vm.tabPaneName=$$v},expression:\"tabPaneName\"}},_vm._l((_vm.petsInfo),function(item,index){return _c('TabPane',{key:item.id,attrs:{\"label\":item.name,\"name\":(\"name\" + (index+1))}},[_c('Divider',{attrs:{\"size\":\"small\"}},[_vm._v(\"状态：\"+_vm._s(item.status?'已参战':'休息中'))]),(item.skills.length === 0)?_c('p',{staticStyle:{\"padding\":\"5px\"}},[_vm._v(\" 无技能 \")]):_vm._l((item.skills),function(skill,index){return _c('Poptip',{key:index,attrs:{\"word-wrap\":\"\",\"transfer\":\"\",\"width\":\"200\",\"trigger\":\"hover\",\"content\":skill.info}},[_c('Button',{style:(skill.style),attrs:{\"size\":\"small\"}},[_vm._v(_vm._s(skill.name))])],1)}),(_vm.tabPaneName === (\"name\" + (index+1)))?_c('Table',{attrs:{\"show-header\":false,\"columns\":_vm.columns,\"data\":item.data,\"border\":\"\"}}):_vm._e(),_c('ButtonGroup',{staticClass:\"pet-btn\",attrs:{\"size\":\"small\",\"shape\":\"circle\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePet(item,3)}}},[_vm._v(\"放生\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePet(item,4)}}},[_vm._v(\"幻化\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePet(item,1)}}},[_vm._v(\"升级\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePet(item,2,1)}}},[_vm._v(\"全力\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePet(item,2,2)}}},[_vm._v(\"全魔\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePet(item,5)}}},[_vm._v(_vm._s(item.status?\"休息\":\"参战\"))])],1),_c('ButtonGroup',{staticClass:\"pet-btn\",attrs:{\"size\":\"small\",\"shape\":\"circle\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.handlePet(item, 6)}}},[_vm._v(\"合宠\")]),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.handlePet(item, 7)}}},[_vm._v(\"打书\")])],1)],2)}),1)],1),_c('Modal',{attrs:{\"styles\":{top: '85px'}},model:{value:(_vm.modal),callback:function ($$v) {_vm.modal=$$v},expression:\"modal\"}},[_c('p',{staticStyle:{\"color\":\"#f60\",\"text-align\":\"center\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('Icon',{attrs:{\"type\":\"ios-information-circle\"}}),_c('span',[_vm._v(\"确定\"+_vm._s(_vm.handleData.name)+\"？\")])],1),(_vm.handleData.name !== '放生')?_c('div',{staticStyle:{\"text-align\":\"center\"}},[(_vm.handleData.type<6)?_c('img',{staticStyle:{\"width\":\"120px\",\"padding-top\":\"5px\"},attrs:{\"src\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593343846064&di=97a86fe902b9754de368f02e336e4eab&imgtype=0&src=http%3A%2F%2Fwww.11xzb.com%2Fd%2Ffile%2Fmoban5%2F201909020832%2F1567158444899421.png\",\"alt\":\"\"}}):(_vm.handleData.type===6)?_c('div',{staticClass:\"slelect-box\"},[_c('Select',{attrs:{\"size\":\"small\"},model:{value:(_vm.pet1),callback:function ($$v) {_vm.pet1=$$v},expression:\"pet1\"}},_vm._l((_vm.petList),function(item){return _c('Option',{key:item.value,attrs:{\"disabled\":_vm._f(\"disabled\")([item.status,item.value,_vm.pet2]),\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1),_c('p',[_vm._v(\"技能：\"+_vm._s(_vm.selectPet1))]),_c('Select',{attrs:{\"size\":\"small\"},model:{value:(_vm.pet2),callback:function ($$v) {_vm.pet2=$$v},expression:\"pet2\"}},_vm._l((_vm.petList),function(item){return _c('Option',{key:item.value,attrs:{\"disabled\":_vm._f(\"disabled\")([item.status,item.value,_vm.pet1]),\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1),_c('p',[_vm._v(\"技能：\"+_vm._s(_vm.selectPet2))])],1):_c('div',{staticClass:\"slelect-box\"},[_c('Select',{attrs:{\"size\":\"small\"},model:{value:(_vm.pet1),callback:function ($$v) {_vm.pet1=$$v},expression:\"pet1\"}},_vm._l((_vm.petList),function(item){return _c('Option',{key:item.value,attrs:{\"disabled\":_vm._f(\"disabled\")([item.status,item.value,_vm.pet2]),\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1),_c('p',[_vm._v(\"技能：\"+_vm._s(_vm.selectPet1))]),_c('Select',{attrs:{\"size\":\"small\"},model:{value:(_vm.pet2),callback:function ($$v) {_vm.pet2=$$v},expression:\"pet2\"}},_vm._l((_vm.bookList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1),(_vm.handleData.type === 1)?_c('p',[_vm._v(\"点击确认继续升级，或者点击取消关闭面板\")]):_vm._e(),(_vm.handleData.type === 3 && _vm.handleData.data.status===1)?_c('p',[_vm._v(\"宠物正在参战...\")]):_vm._e()]):_vm._e(),_c('div',{staticStyle:{\"text-align\":\"center\"},attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.modal=false}}},[_vm._v(\"取消\")]),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.handleData.type === 3 && _vm.handleData.data.status===1},on:{\"click\":_vm.confirmHandle}},[_vm._v(\"确认\")])],1)])],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Protocol from './protocol'\r\n// 调试模式\r\nlet DEBUG = false;\r\n\r\n/**\r\n * 一些常量\r\n */\r\nconst JS_WS_CLIENT_TYPE = 'js-websocket';\r\nconst JS_WS_CLIENT_VERSION = '0.0.1';\r\n\r\n/**\r\n * 返回消息状态码\r\n */\r\nconst RES_OK = 200;         // 成功\r\nconst RES_FAIL = 500;       // 失败\r\nconst RES_OLD_CLIENT = 501; // 客户端版本不符\r\n\r\nconst gapThreshold = 100;   // heartbeat gap threashold\r\n\r\n/**\r\n * {object} 默认配置\r\n */\r\nlet default_config = {\r\n    gameHost: 'yundingxx.com',\r\n    gameProtocol: 'ws',\r\n    loginPort: 3014,\r\n    gamePort: 3052,\r\n    loginServer: null,\r\n    gameServer: null,\r\n    socketPathTpl: '{protocol}://{host}:{port}/'\r\n};\r\n\r\nlet Package = Protocol.Package,\r\n    Message = Protocol.Message;\r\n\r\n/**\r\n * 工具类\r\n */\r\nlet Tool = {\r\n    /**\r\n     * 替换字符串中的变量占位符\r\n     *\r\n     * @param {string} str           需要替换的字符串\r\n     * @param {object} replaceMaps   替换关系\r\n     */\r\n    replaceParams: function (str, replaceMaps) {\r\n        return str.replace(/{([^}]+)}/g, function (full_match, key) {\r\n            return replaceMaps[key] || full_match;\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Hooks 默认的\r\n */\r\nlet CoreHooks = {\r\n    /**\r\n     * 登录游戏成功回调\r\n     * @param {*} data\r\n     */\r\n    onLoginGame: function (data) {\r\n        if (data.code != RES_OK) {\r\n            DEBUG && console.error('onLoginGame', data.msg);\r\n            return;\r\n        }\r\n\r\n        this.user_info = Object.assign(this.user_info, data.data);\r\n    },\r\n    /**\r\n        * 主要是用于保存数据\r\n        * @param {*} data\r\n        */\r\n    onSaveData: function (data) {\r\n        if (data.code != RES_OK) {\r\n            DEBUG && console.error('onLoginGame', data.msg || data);\r\n            return;\r\n        }\r\n\r\n        let datas = data.data || data,\r\n            save_keys = ['map', 'myInfo', 'players', 'userTasks', 'wordLogds', 'team', 'teams', 'screens', 'initData'];\r\n        save_keys.forEach((key) => {\r\n            if (!datas[key]) {\r\n                return;\r\n            }\r\n            this.user_info[key] = datas[key];\r\n\r\n            if (key == 'map') {\r\n                this.user_info.mid = datas.map.id;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n// 给Hook绑定 Mark\r\nObject.keys(CoreHooks).forEach((name) => {\r\n    CoreHooks[name].hookMark = 'Core.' + name;\r\n});\r\n\r\n/**\r\n* YunDingXX Online API\r\n*\r\n* @param {object} config   配置信息\r\n*/\r\nlet GameApi = function (config) {\r\n    // 加载配置\r\n    if ('object' == typeof config || 'undefined' == typeof config) {\r\n        this.config = Object.assign(default_config, config);\r\n    }\r\n\r\n    // 初始化配置\r\n    this.initConfig();\r\n};\r\n\r\n// 设置调试模式\r\nGameApi.isDEBUG = function () {\r\n    DEBUG = true;\r\n}\r\n\r\n/**\r\n* 初始化配置信息\r\n*/\r\nGameApi.prototype.initConfig = function () {\r\n    // WebSocket 链接对象\r\n    this.socket = null;\r\n\r\n    // 用于标记自己要停止\r\n    this.isStop = false;\r\n\r\n    // 玩家信息都存在这里 渲染视图请读取这里\r\n    this.email = '';\r\n    this.password = ''; // 用于自动重连\r\n    this.user_info = {};\r\n\r\n    // 登录 Token 我猜你不会偷这个吧?\r\n    this.token = null;\r\n\r\n    // 生成服务器链接地址\r\n    if (!this.config.loginServer) {\r\n        this.config.loginServer = this.getSocketServer(this.config.loginPort);\r\n    }\r\n\r\n    // 消息处理分发\r\n    this.messageHandlers = [];\r\n    this.messageHandlers[Package.TYPE_HANDSHAKE] = this.onHandshake;\r\n    this.messageHandlers[Package.TYPE_HEARTBEAT] = this.onHeartbeat;\r\n    this.messageHandlers[Package.TYPE_DATA] = this.onData;\r\n    this.messageHandlers[Package.TYPE_KICK] = this.onKick;\r\n\r\n    // 维持心跳\r\n    this.reqId = 1;\r\n    this.heartbeatInterval = 0;\r\n    this.heartbeatId = null;\r\n    this.heartbeatTimeoutId = null;\r\n    this.heartbeatTimeout = 0;\r\n    this.xyUpdateIntervalId = 0;\r\n\r\n    // 路由字典\r\n    this.dict = {};\r\n    this.abbrs = {};\r\n\r\n    // 协议相关???\r\n    this.protoVersion = 0;\r\n    this.serverProtos = {};\r\n    this.clientProtos = {};\r\n\r\n    // 一些无法命名的回调\r\n    this.initCallback = null;   // 初始化完毕的回调\r\n    this.callbacks = [];        // 根据 SeqId 来区分回调(如果有)\r\n    this.callRoutes = [];       // 和上面一样 只是区分 Route\r\n\r\n    // 注册各路由的回调钩子\r\n    this.hookHandlers = GameApi.regHookHandlers;\r\n}\r\n\r\n/**\r\n* 用于批量提前注册，避免每次创建都要注册一次\r\n*/\r\nGameApi.regHookHandlers = {\r\n    \"onAdd\": [],    //* 玩家上线?\r\n    \"onLeave\": [],    //* 玩家离开\r\n    \"onChatMsg\": [],    //* 收到消息\r\n    \"onMyTeamReload\": [ // 重新载入队伍\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"onStartBat\": [ // 战斗开始\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"onRoundBatEnd\": [ // 战斗结束\r\n\r\n    ],\r\n    \"chat.chatHandler.send\": [],    //  发送消息\r\n    \"connector.entryHandler.enter\": [],\r\n    \"connector.fationHandler.applyForFation\": [],    //  申请工会\r\n    \"connector.fationHandler.closeUserTask\": [],    //  放弃任务\r\n    \"connector.fationHandler.createFation\": [],    //  创建工会\r\n    \"connector.fationHandler.donateFationFunds\": [],    //  捐赠\r\n    \"connector.fationHandler.doneFationApply\": [],    //  同意入会\r\n    \"connector.fationHandler.getFationApply\": [],    //  查看申请\r\n    \"connector.fationHandler.getFationList\": [],    //  打开工会列表\r\n    \"connector.fationHandler.getFationTask\": [],    //  领取任务\r\n    \"connector.fationHandler.initFation\": [],    //  初始聚仙阁楼页面\r\n    \"connector.fationHandler.leaveFation\": [],    //  脱离工会\r\n    \"connector.fationHandler.showFationUserList\": [],    //  查看工会人员\r\n    \"connector.fationHandler.upFation\": [],    //  升级工会\r\n    \"connector.fationHandler.upFationUserSkill\": [console.log],    //  点技能\r\n    \"connector.fationHandler.upUserFationLevel\": [],    //  升降职位\r\n    \"connector.loginHandler.login\": [      //  登录 Token\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.playerHandler.byGoodsToSystem\": [],    //  购买系统物品\r\n    \"connector.playerHandler.byPalyerGoods\": [],    //  购买玩家物品\r\n    \"connector.playerHandler.getCopyTask\": [],\r\n    \"connector.playerHandler.getPlayerSellGoods\": [],    //  初始仙坊集市\r\n    \"connector.playerHandler.init\": [],\r\n    \"connector.playerHandler.move\": [],    //  移动\r\n    \"connector.playerHandler.moveToNewMap\": [      //  移动至新地图\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.playerHandler.nextMap\": [],    //  切换地图\r\n    \"connector.playerHandler.payUserTask\": [],    //  完成任务\r\n    \"connector.playerHandler.sellGoods\": [],\r\n    \"connector.playerHandler.sendMsg\": [],\r\n    \"connector.playerHandler.wearUserEquipment\": [],    //  佩戴拆卸装备\r\n    \"connector.systemHandler.getRankList\": [],    //  排行榜\r\n    \"connector.systemHandler.getSystemSellGoods\": [],    //  初始系统中出售物品\r\n    \"connector.systemHandler.getSystemTask\": [],    //  初始任务中心\r\n    \"connector.teamHandler.addTeam\": [],    // 加入队伍\r\n    \"connector.teamHandler.createdTeam\": [ // //  创建队伍\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.teamHandler.getAllCombatScreen\": [ // 获取战斗场景\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.teamHandler.getTeamList\": [  // 获取队伍列表\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.teamHandler.leaveTeam\": [],    //  离开队伍\r\n    \"connector.teamHandler.roundOperating\": [],    //  回合操作\r\n    \"connector.teamHandler.showMyTeam\": [],    //  显示我的团队\r\n    \"connector.teamHandler.startCombat\": [],\r\n    \"connector.teamHandler.switchCombatScreen\": [], // 切换战斗场景\r\n    \"connector.userHandler.addUserPetSkill\": [],    //  添加用户宠物技能\r\n    \"connector.userHandler.allSellGoods\": [],    //  整理\r\n    \"connector.userHandler.allocationPoint\": [],    //  保存/分配属性点\r\n    \"connector.userHandler.fbProcess\": [],    //  法宝点击\r\n    \"connector.userHandler.fitPet\": [],    //  确认合成\r\n    \"connector.userHandler.getMyFb\": [],    //  获取我的法宝\r\n    \"connector.userHandler.getMyGoods\": [],    //  初始我得物品\r\n    \"connector.userHandler.getMyPet\": [],    //  初始我得宠物\r\n    \"connector.userHandler.getMyPetSkillGoods\": [],    //  获取我的宠物用品\r\n    \"connector.userHandler.getMySkill\": [],    //  初始我得技能\r\n    \"connector.userHandler.getMyTitle\": [],    //  称号弹框\r\n    \"connector.userHandler.getMylogs\": [],    //  查看我的日志\r\n    \"connector.userHandler.getUserEqs\": [],    //  获取我得装备列表\r\n    \"connector.userHandler.getUserTask\": [],\r\n    \"connector.userHandler.makeGoods\": [],    //  合成物品\r\n    \"connector.userHandler.playUserPet\": [],    //  出战宠物\r\n    \"connector.userHandler.polyLin\": [],    //  聚灵\r\n    \"connector.userHandler.repairUserArms\": [],    //  修炼装备\r\n    \"connector.userHandler.resetAttribute\": [],    //  重置属性\r\n    \"connector.userHandler.selectMyTitle\": [],    //  选择我的称号\r\n    \"connector.userHandler.sellGoods\": [],\r\n    \"connector.userHandler.shelfMyGoods\": [],    //  取回到背包\r\n    \"connector.userHandler.turnIntoPet\": [],    //  幻化宠物\r\n    \"connector.userHandler.upPlayerLevel\": [],\r\n    \"connector.userHandler.upUserPetLevel\": [],    //  升级宠物\r\n    \"connector.userHandler.updateUserPrice\": [],    //  更新玩家货币\r\n    \"connector.userHandler.useGoods\": [],    //  使用物品\r\n    \"connector.userHandler.userInfo\": [],\r\n    \"connector.userHandler.wbt\": [],    //  挖宝图\r\n    \"connector.userHandler.xyDuiHuan\": [],\r\n    \"connector.userHandler.xyUpdate\": [ // //  仙蕴提交\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"gate.gateHandler.queryEntry\": [], // *登录游戏\r\n    \"connector.userHandler.getNewPet\": [] // 预览合宠\r\n};\r\n\r\n/**\r\n* 生成服务器链接地址\r\n* @param {*} port\r\n*/\r\nGameApi.prototype.getSocketServer = function (port, host, protocol) {\r\n    if ('number' != typeof port) {\r\n        return null;\r\n    }\r\n\r\n    return Tool.replaceParams(this.config.socketPathTpl, {\r\n        protocol: protocol || this.config.gameProtocol,\r\n        host: host || this.config.gameHost,\r\n        port: port\r\n    });\r\n}\r\n\r\n/**\r\n* 注册路由回调钩子\r\n* @param {string}   route      挂载的路由地址\r\n* @param {function} cb         回调\r\n* @param {string}   position   用于 触发时机 暂不可用\r\n*/\r\nGameApi.prototype.regHookHandler = function (route, cb, position) {\r\n    // 检查 route 和 cn 是否有效\r\n    if (!this.hookHandlers[route] || 'function' != typeof cb) {\r\n        return false;\r\n    }\r\n\r\n    // 如果有 Mark 就尝试去重\r\n    let cbMark = cb.hookMark || null;\r\n    if (cbMark && 'object' == typeof this.hookHandlers[route]) {\r\n        for (let i = 0; i < this.hookHandlers[route].length; i++) {\r\n            const cb_item = this.hookHandlers[route][i];\r\n            if (cb_item.hookMark && cbMark == cb_item.hookMark) {\r\n                return cb_item;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 追加到结果\r\n    this.hookHandlers[route].push(cb);\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n* 启动实例\r\n*/\r\nGameApi.prototype.start = function () {\r\n    if (this.socket) {\r\n        return;\r\n    }\r\n    // 建立 ws 链接\r\n    this.createWebSocket(this.config.loginServer);\r\n}\r\n\r\n/**\r\n* 创建一个 WebSocket 连接并初始化\r\n*\r\n* @param {string} url 服务地址 ws://host:prot/path\r\n*/\r\nGameApi.prototype.createWebSocket = function (url) {\r\n    // 创建对象\r\n    let socket = new WebSocket(url);\r\n\r\n    // 指定传输数据类型\r\n    socket.binaryType = 'arraybuffer';\r\n\r\n    /**\r\n        * 批量绑定相关回调事件\r\n        */\r\n    let bindEvents = {\r\n        open: this.onOpen,\r\n        message: this.onMessage,\r\n        error: this.onError,\r\n        close: this.onClose\r\n    };\r\n\r\n    // 遍历事件列表 添加 绑定\r\n    Object.keys(bindEvents).map((enevtName) => {\r\n        socket.addEventListener(enevtName, (event) => {\r\n            bindEvents[enevtName].call(this, event);\r\n        });\r\n    });\r\n\r\n    // 将 reqId 重置\r\n    this.reqId = 1;\r\n    this.socket = socket;\r\n\r\n    return socket;\r\n}\r\n\r\n/**\r\n* WebSocket 建立连接的回调\r\n*\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onOpen = function (event) {\r\n    // 发送握手包\r\n    this.handShake();\r\n};\r\n\r\n/**\r\n* WebSocket 收到消息时的回调\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onMessage = function (event) {\r\n    let messages = Package.decode(event.data);\r\n    if (messages.type != 3) {\r\n        // console.log('onMessage', messages);\r\n    }\r\n\r\n    // 根据事件类型分发到对应的处理程序\r\n    if (Array.isArray(messages)) {\r\n        for (let i = 0; i < messages.length; i++) {\r\n            let msg = messages[i];\r\n            this.messageHandlers.call(this, [msg.type](msg.body));\r\n        }\r\n    } else {\r\n        this.messageHandlers[messages.type].call(this, messages.body);\r\n    }\r\n\r\n    // 重新计算心跳包时间\r\n    if (this.heartbeatTimeout) {\r\n        this.nextHeartbeatTimeout = Date.now() + this.heartbeatTimeout;\r\n    }\r\n};\r\n\r\n/**\r\n* WebSocket 报错时的回调\r\n*\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onError = function (event) {\r\n    console.log('onError', event);\r\n    window.location.reload();\r\n};\r\n\r\n/**\r\n* WebSocket 断开时的回调\r\n*\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onClose = function (event) {\r\n    console.log('onClose', event, this.isStop);\r\n    if (this.isStop) {\r\n        return;\r\n    }\r\n\r\n    // 重连\r\n    this.login();\r\n};\r\n\r\n/**\r\n* 发送消息到服务器(自动处理编码信息)\r\n*\r\n* @param {object} data\r\n* @param {string} type\r\n*/\r\nGameApi.prototype.sendMessage = function (data, route, cb) {\r\n    // 分析参数\r\n    if (arguments.length == 2 && 'function' == typeof route) {\r\n        cb = route;\r\n        route = null;\r\n    }\r\n\r\n    // 解包消息\r\n    let bytes = Protocol.strencode(JSON.stringify(data)),\r\n        pkg_type = Package.TYPE_HANDSHAKE,\r\n        routeId = null;\r\n\r\n    // 分析路由情况\r\n    if ('string' == typeof route) {\r\n        // 是否压缩路由 (存在 Dict 的就压缩)\r\n        let compressRoute = 0;\r\n        if (this.dict && this.dict[route]) {\r\n            routeId = this.dict[route];\r\n            compressRoute = 1;\r\n        }\r\n\r\n        // 然后生成 Message\r\n        let reqId = this.reqId++ % 255;\r\n        let type = reqId ? Message.TYPE_REQUEST : Message.TYPE_NOTIFY;\r\n\r\n        // 设置回调\r\n        if ('function' == typeof cb || 'string' == typeof cb) {\r\n            this.callbacks[reqId] = cb;\r\n        }\r\n\r\n        // 设置回调路由表\r\n        this.callRoutes[reqId] = route;\r\n\r\n        // 将消息打包\r\n        bytes = Message.encode(reqId, type, compressRoute, compressRoute ? routeId : route, bytes);\r\n        pkg_type = Package.TYPE_DATA;\r\n    }\r\n\r\n    // 封装到最终格式\r\n    let packet = Package.encode(pkg_type, bytes);\r\n\r\n    if (this.socket.readyState === this.socket.CLOSED) {\r\n        location.reload()\r\n    }\r\n\r\n    // 发出封包 这里应该有发送失败的处理\r\n    this.socket.send(packet);\r\n}\r\n\r\n/**\r\n* 处理握手返回包\r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onHandshake = function (data) {\r\n    // 解码数据\r\n    data = JSON.parse(Protocol.strdecode(data));\r\n    DEBUG && console.log('onHandshake', data);\r\n\r\n    // 报错的话\r\n    if (data.code === RES_OLD_CLIENT) {\r\n        throw new Error('client version not fullfill');\r\n        return;\r\n    }\r\n\r\n    // 其他错误\r\n    if (data.code !== RES_OK) {\r\n        throw new Error('handshake fail');\r\n        return;\r\n    }\r\n\r\n    // 要发送握手回复\r\n    let packet = Package.encode(Package.TYPE_HANDSHAKE_ACK);\r\n    this.socket.send(packet);\r\n\r\n    // 保存心跳时间\r\n    if (data.sys && data.sys.heartbeat) {\r\n        // 超时信息\r\n        this.heartbeatInterval = data.sys.heartbeat * 1000;   // heartbeat interval\r\n        this.heartbeatTimeout = this.heartbeatInterval * 2;        // max heartbeat timeout\r\n\r\n        // 保存字典\r\n        let dict = data.sys.dict;\r\n\r\n        // Init compress dict\r\n        if (dict) {\r\n            this.dict = dict;\r\n            this.abbrs = {};\r\n\r\n            for (let route in dict) {\r\n                this.abbrs[dict[route]] = route;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 保存 protos 信息\r\n    if (data.sys && data.sys.protos) {\r\n        let protos = data.sys.protos;\r\n\r\n        // Init protobuf protos\r\n        if (protos) {\r\n            this.protoVersion = protos.version || 0;\r\n            this.serverProtos = protos.server || {};\r\n            this.clientProtos = protos.client || {};\r\n        }\r\n    }\r\n\r\n    // if (typeof handshakeCallback === 'function') {\r\n    //     handshakeCallback(data.user);\r\n    // }\r\n\r\n    // 握手成功有回调的话\r\n    if (this.initCallback) {\r\n        this.initCallback.call(this);\r\n        this.initCallback = null;\r\n    }\r\n};\r\n\r\n/**\r\n* 保持心跳\r\n*/\r\nGameApi.prototype.onHeartbeat = function () {\r\n    if (!this.heartbeatInterval) {\r\n        // no heartbeat\r\n        return;\r\n    }\r\n\r\n    let packet = Package.encode(Package.TYPE_HEARTBEAT);\r\n    if (this.heartbeatTimeoutId) {\r\n        clearTimeout(this.heartbeatTimeoutId);\r\n        this.heartbeatTimeoutId = null;\r\n    }\r\n\r\n    if (this.heartbeatId) {\r\n        // already in a heartbeat interval\r\n        return;\r\n    }\r\n    this.heartbeatId = setTimeout(() => {\r\n        this.heartbeatId = null;\r\n        this.socket.send(packet);\r\n\r\n        this.nextHeartbeatTimeout = Date.now() + this.heartbeatTimeout;\r\n        this.heartbeatTimeoutId = setTimeout(this.heartbeatTimeoutCb, this.heartbeatTimeout);\r\n    }, this.heartbeatInterval);\r\n};\r\n\r\n/**\r\n* 心跳超时的回调\r\n*/\r\nGameApi.prototype.heartbeatTimeoutCb = function () {\r\n    let gap = this.nextHeartbeatTimeout - Date.now();\r\n    if (gap > gapThreshold) {\r\n        this.heartbeatTimeoutId = setTimeout(this.heartbeatTimeoutCb, gap);\r\n    } else {\r\n        DEBUG && console.error('server heartbeat timeout');\r\n    }\r\n};\r\n\r\n/**\r\n* 收到数据回复\r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onData = function (data) {\r\n    let msg = Message.decode(data);\r\n\r\n    // 从发包请求中取回 Route\r\n    if (!msg.route && msg.id && this.callRoutes[msg.id]) {\r\n        msg.route = this.callRoutes[msg.id];\r\n    }\r\n\r\n    // 解码 Body\r\n    msg.body = JSON.parse(Protocol.strdecode(msg.body));\r\n\r\n    // 检查是否有回调\r\n    let cbMark = [], is_call = false, is_bubble = true;\r\n    if ('function' == typeof this.callbacks[msg.id]) {\r\n        let cb = this.callbacks[msg.id];\r\n        delete this.callbacks[msg.id];\r\n        if ('string' == typeof cb.hookMark) {\r\n            cbMark.push(cb.hookMark);\r\n        }\r\n\r\n        is_call = true;\r\n        is_bubble = !(cb.call(this, msg.body) === false);\r\n    }\r\n\r\n    // 检查钩子\r\n    if (is_bubble && msg.route && 'object' == typeof this.hookHandlers[msg.route]) {\r\n        for (let i = 0; i < this.hookHandlers[msg.route].length; i++) {\r\n            const cb = this.hookHandlers[msg.route][i];\r\n            if ('string' == typeof cb.hookMark) {\r\n                if (cbMark.indexOf(cb.hookMark) >= 0) {\r\n                    continue;\r\n                }\r\n                cbMark.push(cb.hookMark);\r\n            }\r\n\r\n            is_call = true;\r\n            is_bubble = !(cb.call(this, msg.body) === false);\r\n            if (is_bubble) continue;\r\n        }\r\n    }\r\n\r\n    // 如果没有人接收 就打印出来\r\n    if (!is_call) {\r\n        DEBUG && console.log('onData', msg.route, msg.body);\r\n    }\r\n};\r\n\r\n/**\r\n* 被踢么？\r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onKick = function (data) {\r\n    DEBUG && console.log('onKick', data);\r\n};\r\n\r\n/**\r\n* 停止进程\r\n*/\r\nGameApi.prototype.Stop = function () {\r\n    // 标记自己要停止了\r\n    this.isStop = true;\r\n\r\n    // 如果都没建立 就不存在退出了\r\n    if (!this.socket) {\r\n        return;\r\n    }\r\n\r\n    // 断开 WS 链接\r\n    this.socket.close();\r\n\r\n    // 停止心跳\r\n    if (this.heartbeatId) {\r\n        clearInterval(this.heartbeatId)\r\n    }\r\n    if (this.heartbeatTimeoutId) {\r\n        clearTimeout(this.heartbeatTimeoutId);\r\n    }\r\n    if (this.xyUpdateIntervalId) {\r\n        clearInterval(this.xyUpdateIntervalId)\r\n    }\r\n}\r\n\r\n//======= 下面是游戏事件封装区 =======//\r\n\r\n/**\r\n* 发送握手包\r\n*\r\n* WebSocket 链接成功后自动发送\r\n*/\r\nGameApi.prototype.handShake = function () {\r\n    let handshakeBuffer = {\r\n        'sys': {\r\n            type: JS_WS_CLIENT_TYPE,\r\n            version: JS_WS_CLIENT_VERSION,\r\n            rsa: {},\r\n            protoVersion: this.protoVersion\r\n        }\r\n    };\r\n\r\n    this.sendMessage(handshakeBuffer);\r\n}\r\n\r\n/**\r\n* 登录游戏\r\n*\r\n* @param {*} email\r\n* @param {*} pwd\r\n* @param {*} code\r\n*/\r\nGameApi.prototype.login = function (_email, pwd, code, is_r) {\r\n    let email = _email || this.email,\r\n        password = pwd || this.password,\r\n        route = 'gate.gateHandler.queryEntry',\r\n        data = {\r\n            login_email: email,\r\n            login_pwd: password,\r\n            code: '',\r\n            is_r: true\r\n        };\r\n\r\n    // 设置握手回调\r\n    this.initCallback = function () {\r\n        // 尝试保存账号\r\n        this.email = email;\r\n        this.password = pwd;\r\n        this.user_info.email = email;\r\n\r\n        // 设置消息回调\r\n        this.sendMessage(data, route, this.onLogin);\r\n    }\r\n    this.start();\r\n}\r\n\r\n/**\r\n* 登录成功的回调\r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onLogin = function (data) {\r\n    if (data.code != RES_OK) {\r\n        DEBUG && console.error('onLogin', data.msg);\r\n        return true;\r\n    }\r\n    DEBUG && console.log('onLogin', data)\r\n\r\n    // 保存端口等信息\r\n    this.config.gamePort = data.port;\r\n    this.user_info.mid = data.mid;\r\n    this.token = data.token;\r\n\r\n    // 断开登录链接 重新连接到游戏服务器\r\n    this.isStop = true; // 先标记停止 然后等下再开起来\r\n    this.socket.close();\r\n    this.gameServer = this.getSocketServer(data.port);\r\n    this.initCallback = this.loginToken;\r\n    this.createWebSocket(this.gameServer);\r\n}\r\n\r\n/**\r\n* 使用 Token 登录游戏服务器\r\n*/\r\nGameApi.prototype.loginToken = function () {\r\n    let route = 'connector.loginHandler.login',\r\n        data = {\r\n            email: this.user_info.email,\r\n            token: this.token\r\n        };\r\n\r\n    // 标记自己开工了\r\n    this.onClose = false;\r\n\r\n    // 先清空工作台\r\n    // DEBUG && console.clear();\r\n\r\n    // 如果登录成功\r\n    this.sendMessage(data, route, (data) => {\r\n        if (data.code != RES_OK) {\r\n            DEBUG && console.error('登录到游戏服务器失败', data);\r\n            this.Stop();\r\n            return;\r\n        }\r\n\r\n        DEBUG && console.log('登录到游戏服务器成功', this, data);\r\n\r\n        // 开始定时提交仙蕴\r\n        this.xyUpdateIntervalId = setInterval(() => {\r\n            this.xyUpdate()\r\n        }, 60000);\r\n    });\r\n}\r\n\r\n/**\r\n* 发送消息\r\n*/\r\nGameApi.prototype.chatSend = function (send_msg) {\r\n    this.sendMessage({\r\n        send_channel: 3,\r\n        send_msg\r\n    }, \"chat.chatHandler.send\")\r\n}\r\n\r\n/**\r\n* 仙蕴提交\r\n*/\r\nGameApi.prototype.xyUpdate = function () {\r\n    this.sendMessage({}, \"connector.userHandler.xyUpdate\");\r\n}\r\n\r\n/**\r\n* 查看我的日志\r\n*/\r\nGameApi.prototype.getMylogs = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMylogs\");\r\n}\r\n\r\n/**\r\n* 获取我的法宝\r\n*/\r\nGameApi.prototype.getMyFb = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyFb\");\r\n}\r\n\r\n/**\r\n* 获取我的法宝\r\n*/\r\nGameApi.prototype.upPlayerLevel = function () {\r\n    this.sendMessage({}, \"connector.userHandler.upPlayerLevel\");\r\n}\r\n\r\n/**\r\n* 法宝点击\r\n* @param type 1 升星 2共生 3养灵 4佩戴\r\n* @param id\r\n*/\r\nGameApi.prototype.fbProcess = function (type, id) {\r\n    this.sendMessage({\r\n        type, id\r\n    }, \"connector.userHandler.fbProcess\");\r\n}\r\n\r\n/**\r\n* 移动\r\n* @param x     横坐标\r\n* @param mid   地图id\r\n*/\r\nGameApi.prototype.move = function (x, mid) {\r\n    this.sendMessage({\r\n        x: x,\r\n        mid: mid\r\n    }, \"connector.playerHandler.move\");\r\n}\r\n\r\n/**\r\n* 切换地图\r\n* @param type 0 | 1\r\n*/\r\nGameApi.prototype.nextMap = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.playerHandler.nextMap\");\r\n}\r\n\r\n/**\r\n* 移动至新地图\r\n*/\r\nGameApi.prototype.moveToNewMap = function (mid) {\r\n    this.sendMessage({\r\n        mid: mid\r\n    }, \"connector.playerHandler.moveToNewMap\");\r\n}\r\n\r\n/**\r\n* 获取战斗场景列表\r\n*/\r\nGameApi.prototype.getAllCombatScreen = function () {\r\n    this.sendMessage({}, \"connector.teamHandler.getAllCombatScreen\");\r\n}\r\n\r\n/**\r\n* 切换战斗场景\r\n* @param {*} cbatid\r\n*/\r\nGameApi.prototype.switchCombatScreen = function (cbatid) {\r\n    this.sendMessage({\r\n        cbatid: cbatid\r\n    }, \"connector.teamHandler.switchCombatScreen\");\r\n}\r\n\r\n/**\r\n* 获取队伍列表\r\n*/\r\nGameApi.prototype.getTeamList = function (mid) {\r\n    this.sendMessage({\r\n        mid: mid\r\n    }, \"connector.teamHandler.getTeamList\");\r\n}\r\n\r\n/**\r\n* 创建队伍\r\n*/\r\nGameApi.prototype.createdTeam = function (mid) {\r\n    this.sendMessage({\r\n        mid: mid\r\n    }, \"connector.teamHandler.createdTeam\");\r\n}\r\n\r\n/**\r\n* 加入队伍\r\n*/\r\nGameApi.prototype.addTeam = function (tid) {\r\n    this.sendMessage({\r\n        tid: tid\r\n    }, \"connector.teamHandler.addTeam\");\r\n}\r\n\r\n/**\r\n* 离开队伍\r\n*/\r\nGameApi.prototype.leaveTeam = function () {\r\n    this.sendMessage({}, \"connector.teamHandler.leaveTeam\");\r\n}\r\n\r\n/**\r\n* 开始战斗\r\n*/\r\nGameApi.prototype.startCombat = function (cbatid) {\r\n    this.sendMessage({ cbatid: cbatid }, 'connector.teamHandler.startCombat');\r\n}\r\n\r\n/**\r\n* 回合操作\r\n*\r\n* @param type      类型 捕捉 1001 技能 1\r\n* @param skill     操作 技能\r\n* @param attack_id 目标\r\n* @param tid       队伍ID?\r\n*/\r\nGameApi.prototype.roundOperating = function (type, skill, attack_id, mtid) {\r\n    this.sendMessage({\r\n        type: type,\r\n        parm: skill,\r\n        attack_id: attack_id,\r\n        tid: mtid\r\n    }, \"connector.teamHandler.roundOperating\");\r\n}\r\n\r\n/**\r\n* 初始我得物品\r\n*/\r\nGameApi.prototype.getMyGoods = function (page) {\r\n    this.sendMessage({\r\n        page\r\n    }, \"connector.userHandler.getMyGoods\");\r\n}\r\n\r\n/**\r\n* 出售物品\r\n*/\r\nGameApi.prototype.playerSellGoods = function (ugid, price, count) {\r\n    this.sendMessage({\r\n        ugid: ugid,\r\n        game_gold: price,\r\n        count\r\n    }, \"connector.playerHandler.sellGoods\");\r\n}\r\n\r\n/**\r\n* 选择我的称号\r\n*/\r\nGameApi.prototype.selectMyTitle = function (index) {\r\n    this.sendMessage({\r\n        index\r\n    }, \"connector.userHandler.selectMyTitle\");\r\n}\r\n\r\n/**\r\n* 称号弹框\r\n*/\r\nGameApi.prototype.getMyTitle = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyTitle\");\r\n}\r\n\r\n/**\r\n* 初始我得宠物\r\n*/\r\nGameApi.prototype.getMyPet = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyPet\");\r\n}\r\n\r\n/**\r\n* 挖宝图\r\n*/\r\nGameApi.prototype.wbt = function (ugid) {\r\n    this.sendMessage({\r\n        ugid\r\n    }, \"connector.userHandler.wbt\");\r\n}\r\n\r\n/**\r\n* 领高级宝图任务\r\n*/\r\nGameApi.prototype.getCopyTask = function (tid) {\r\n    this.sendMessage({\r\n        tid\r\n    }, \"connector.playerHandler.getCopyTask\");\r\n}\r\n\r\n/**\r\n* 初始我得技能\r\n*/\r\nGameApi.prototype.getMySkill = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMySkill\");\r\n}\r\n\r\n/**\r\n* 修炼装备\r\n*/\r\nGameApi.prototype.repairUserArms = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.userHandler.repairUserArms\");\r\n}\r\n\r\n/**\r\n* 获取任务列表\r\n*/\r\nGameApi.prototype.getUserTask = function () {\r\n    this.sendMessage({\r\n    }, \"connector.userHandler.getUserTask\");\r\n}\r\n\r\n/**\r\n* 使用物品\r\n*/\r\nGameApi.prototype.useGoods = function (gid) {\r\n    this.sendMessage({\r\n        gid\r\n    }, \"connector.userHandler.useGoods\");\r\n}\r\n\r\n/**\r\n* 更新角色信息\r\n*/\r\nGameApi.prototype.userInfo = function () {\r\n    this.sendMessage({\r\n    }, \"connector.userHandler.userInfo\");\r\n}\r\n\r\n/**\r\n* 佩戴拆卸装备\r\n*/\r\nGameApi.prototype.wearUserEquipment = function (ueid) {\r\n    this.sendMessage({\r\n        ueid\r\n    }, \"connector.playerHandler.wearUserEquipment\");\r\n}\r\n\r\n/**\r\n* 完成任务\r\n*/\r\nGameApi.prototype.payUserTask = function (utid) {\r\n    this.sendMessage({\r\n        utid\r\n    }, \"connector.playerHandler.payUserTask\");\r\n}\r\n\r\n/**\r\n* 幻化宠物\r\n*/\r\nGameApi.prototype.turnIntoPet = function (pid) {\r\n    this.sendMessage({\r\n        pid\r\n    }, \"connector.userHandler.turnIntoPet\");\r\n}\r\n\r\n/**\r\n* 初始系统中出售物品\r\n*/\r\nGameApi.prototype.getSystemSellGoods = function (pageIndex) {\r\n    this.sendMessage({\r\n        pageIndex\r\n    }, \"connector.systemHandler.getSystemSellGoods\");\r\n}\r\n\r\n/**\r\n* 取回到背包\r\n*/\r\nGameApi.prototype.shelfMyGoods = function (id) {\r\n    this.sendMessage({\r\n        id: id\r\n    }, \"connector.userHandler.shelfMyGoods\");\r\n}\r\n\r\n/**\r\n* 初始仙坊集市\r\n*/\r\nGameApi.prototype.getPlayerSellGoods = function (pageIndex, type) {\r\n    this.sendMessage({\r\n        pageIndex: pageIndex ? pageIndex : 1,\r\n        select: type\r\n    }, \"connector.playerHandler.getPlayerSellGoods\");\r\n}\r\n\r\n/**\r\n* 购买玩家物品\r\n*/\r\nGameApi.prototype.byPalyerGoods = function (id, type) {\r\n    this.sendMessage({\r\n        usgid: id, type\r\n    }, \"connector.playerHandler.byPalyerGoods\");\r\n}\r\n\r\n/**\r\n* 购买系统物品\r\n*/\r\nGameApi.prototype.byGoodsToSystem = function (type, id) {\r\n    this.sendMessage({\r\n        id, type\r\n    }, \"connector.playerHandler.byGoodsToSystem\");\r\n}\r\n\r\n/**\r\n* 初始任务中心\r\n*/\r\nGameApi.prototype.getSystemTask = function () {\r\n    this.sendMessage({}, \"connector.systemHandler.getSystemTask\");\r\n}\r\n\r\n/**\r\n* 合成物品\r\n*/\r\nGameApi.prototype.makeGoods = function (selectGoodsArr) {\r\n    this.sendMessage({\r\n        arr: selectGoodsArr\r\n    }, \"connector.userHandler.makeGoods\");\r\n}\r\n\r\n/**\r\n* 分解物品\r\n*/\r\nGameApi.prototype.sellGoods = function (selectGoodsArr) {\r\n    this.sendMessage({\r\n        arr: selectGoodsArr\r\n    }, \"connector.userHandler.sellGoods\");\r\n}\r\n\r\n/**\r\n* 出战宠物\r\n*/\r\nGameApi.prototype.playUserPet = function (id, status) {\r\n    this.sendMessage({\r\n        pid: id,\r\n        status\r\n    }, \"connector.userHandler.playUserPet\");\r\n}\r\n\r\n/**\r\n* 升级宠物  type==1升级  type==2分配潜力 type==3放生\r\n*/\r\nGameApi.prototype.upUserPetLevel = function (pid, type, point) {\r\n    let parms = { pid: pid, type };\r\n    if (type == 2) {\r\n        point = point || {};\r\n        Object.assign(parms, {\r\n            str: point.str || null,\r\n            int: point.int || null,\r\n            agi: point.agi || null,\r\n            vit: point.vit || null,\r\n            con: point.con || null\r\n        });\r\n    }\r\n    this.sendMessage(parms, \"connector.userHandler.upUserPetLevel\");\r\n}\r\n\r\n/**\r\n* 发送消息\r\n*/\r\nGameApi.prototype.send = function (send_channel, send_msg) {\r\n    this.sendMessage({\r\n        send_channel,\r\n        send_msg\r\n    }, \"chat.chatHandler.send\");\r\n}\r\n\r\n/**\r\n* 保存/分配属性点\r\n*/\r\nGameApi.prototype.allocationPoint = function (str, int, agi, vit, con) {\r\n    this.sendMessage({\r\n        str: str, // 力量\r\n        int: int, // 智力\r\n        agi: agi, // 敏捷\r\n        vit: vit, // 耐力\r\n        con: con  // 体质\r\n    }, \"connector.userHandler.allocationPoint\");\r\n}\r\n\r\n/**\r\n* 获取我得装备列表\r\n*/\r\nGameApi.prototype.getUserEqs = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getUserEqs\");\r\n}\r\n\r\n/**\r\n* 更新玩家货币\r\n*/\r\nGameApi.prototype.updateUserPrice = function () {\r\n    this.sendMessage({}, \"connector.userHandler.updateUserPrice\");\r\n}\r\n\r\n/**\r\n* 显示我的团队\r\n*/\r\nGameApi.prototype.showMyTeam = function (is_show) {\r\n    this.sendMessage({ is_show }, \"connector.teamHandler.showMyTeam\");\r\n}\r\n\r\n/**\r\n* 排行榜?\r\n* @param type 1=等级 2=兽宠 3=神兵\r\n*/\r\nGameApi.prototype.getRankList = function (type) {\r\n    this.sendMessage({ type }, \"connector.systemHandler.getRankList\");\r\n}\r\n\r\n/**\r\n* 初始聚仙阁楼页面\r\n*/\r\nGameApi.prototype.initFation = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.initFation\");\r\n}\r\n\r\n/**\r\n* 创建工会\r\n*/\r\nGameApi.prototype.createFation = function (name) {\r\n    this.sendMessage({\r\n        name\r\n    }, \"connector.fationHandler.createFation\");\r\n}\r\n\r\n/**\r\n* 申请工会\r\n*/\r\nGameApi.prototype.applyForFation = function (fid) {\r\n    this.sendMessage({\r\n        fid\r\n    }, \"connector.fationHandler.applyForFation\");\r\n}\r\n\r\n\r\n/**\r\n* 同意入会\r\n* @param type              1=同意 2=拒绝\r\n* @param fation_apply_id\r\n*/\r\nGameApi.prototype.doneFationApply = function (type, fation_apply_id) {\r\n    this.sendMessage({\r\n        type, faid: fation_apply_id\r\n    }, \"connector.fationHandler.doneFationApply\");\r\n}\r\n\r\n/**\r\n* 升降职位\r\n*/\r\nGameApi.prototype.upUserFationLevel = function (type, uid) {\r\n    this.sendMessage({\r\n        type, uid\r\n    }, \"connector.fationHandler.upUserFationLevel\");\r\n}\r\n\r\n/**\r\n* 打开工会列表\r\n*/\r\nGameApi.prototype.getFationList = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.getFationList\");\r\n}\r\n\r\n/**\r\n* 查看申请\r\n*/\r\nGameApi.prototype.getFationApply = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.getFationApply\");\r\n}\r\n\r\n/**\r\n* 查看工会人员\r\n*/\r\nGameApi.prototype.showFationUserList = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.showFationUserList\");\r\n}\r\n\r\n/**\r\n* 脱离工会\r\n*/\r\nGameApi.prototype.leaveFation = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.leaveFation\");\r\n}\r\n\r\n/**\r\n* 点技能\r\n*/\r\nGameApi.prototype.upFationUserSkill = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.fationHandler.upFationUserSkill\");\r\n}\r\n\r\n/**\r\n* 捐赠\r\n*/\r\nGameApi.prototype.donateFationFunds = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.donateFationFunds\");\r\n}\r\n\r\n/**\r\n* 领取任务\r\n*/\r\nGameApi.prototype.getFationTask = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.getFationTask\");\r\n}\r\n\r\n/**\r\n* 升级工会\r\n*/\r\nGameApi.prototype.upFation = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.fationHandler.upFation\");\r\n}\r\n\r\n/**\r\n* 聚灵\r\n*/\r\nGameApi.prototype.polyLin = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.userHandler.polyLin\");\r\n}\r\n\r\n/**\r\n* 放弃任务\r\n*/\r\nGameApi.prototype.closeUserTask = function (tid) {\r\n    this.sendMessage({\r\n        tid: tid\r\n    }, \"connector.fationHandler.closeUserTask\");\r\n}\r\n\r\n/**\r\n* 整理\r\n*/\r\nGameApi.prototype.allSellGoods = function () {\r\n    this.sendMessage({}, \"connector.userHandler.allSellGoods\");\r\n}\r\n\r\n/**\r\n* 重置属性\r\n*/\r\nGameApi.prototype.resetAttribute = function () {\r\n    this.sendMessage({}, \"connector.userHandler.resetAttribute\");\r\n}\r\n\r\n/**\r\n* 预览合宠\r\n*/\r\nGameApi.prototype.getNewPet = function (a_id, b_id) {\r\n    this.sendMessage({\r\n        ids: a_id + \",\" + b_id\r\n    }, \"connector.userHandler.getNewPet\");\r\n}\r\n\r\n/**\r\n* 确认合成\r\n*/\r\nGameApi.prototype.fitPet = function (a_id, b_id) {\r\n    this.sendMessage({\r\n        ids: a_id + \",\" + b_id\r\n    }, \"connector.userHandler.fitPet\");\r\n}\r\n\r\n/**\r\n* 添加用户宠物技能?\r\n*/\r\nGameApi.prototype.addUserPetSkill = function (ugid,upid) {\r\n    this.sendMessage({\r\n        ugid, upid\r\n    }, \"connector.userHandler.addUserPetSkill\");\r\n}\r\n\r\n/**\r\n* 获取我的宠物用品?\r\n*/\r\nGameApi.prototype.getMyPetSkillGoods = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyPetSkillGoods\");\r\n}\r\n\r\nexport default GameApi\r\n","import GameApi from './YunDingOnlineSDK'\r\n\r\nwindow.freshPackage = true\r\nwindow.chatMsg = []\r\n\r\n// 暴露一个接口 用来接收 app 对象\r\nexport default function (_app) {\r\n    const app = _app;\r\n\r\n    // 创建空函数 屏蔽 onLeave onAdd 消息刷屏\r\n    let emptyCb = () => {};\r\n    emptyCb.hookMark = 'regHooks.emptyCb';\r\n    GameApi.regHookHandlers['onLeave'].push(emptyCb);\r\n    GameApi.regHookHandlers['onAdd'].push(emptyCb);\r\n\r\n    // 接管登录成功的回调\r\n    let loginCb = function (data) {\r\n        let user = app.user;\r\n        // 检查错误\r\n        if (data.code == 500) {\r\n            user.status = \"登录失败\";\r\n            user.status_msg = \"账号已在他处登录\";\r\n            return;\r\n        } else if (data.code != 200) {\r\n            user.status = \"登录失败\";\r\n            user.status_msg = data.msg || '未知错误';\r\n            return;\r\n        }\r\n\r\n        // 登录成功\r\n        if (data.token) {\r\n            user.status = '鉴权成功';\r\n            return;\r\n        }\r\n        user.status = '登录成功';\r\n\r\n        // 没有数据就不在继续了\r\n        if ('object' != typeof data.data) {\r\n            return;\r\n        }\r\n        app.$set(user, 'userEqs', data.data.userEqs);\r\n        app.$set(user, 'myInfo', data.data.myInfo);\r\n        app.$set(user, 'userTasks', data.data.userTasks);\r\n        // 记录地图位置\r\n        app.$set(user, 'map', data.data.map);\r\n        // 获取一些初始化的信息\r\n        this.userInfo();\r\n        // 获取地图队伍列表\r\n        this.getTeamList(app.user.map.id);\r\n        // 获取物品信息\r\n        app.$set(user, 'goods', []);\r\n        app.$set(user, 'goodsPage', 1);\r\n        this.getMyGoods();\r\n        // 获取技能信息\r\n        this.getMySkill();\r\n        this.getMyPet();\r\n    }\r\n    loginCb.hookMark = \"regHooks.loginCb\";\r\n    GameApi.regHookHandlers['gate.gateHandler.queryEntry'].push(loginCb);\r\n    GameApi.regHookHandlers['connector.loginHandler.login'].push(loginCb);\r\n\r\n    // 移动地图的返回\r\n    let moveToNewMapCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        // 更新地图位置\r\n        app.$set(app.user, 'map', data.map);\r\n    };\r\n    moveToNewMapCb.hookMark = \"regHooks.moveToNewMapCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.moveToNewMap'].push(moveToNewMapCb);\r\n\r\n    // 创建队伍回调\r\n    let createdTeamCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        // 保存队长信息\r\n        app.$set(app.user, 'team', {\r\n            leader: this.email,\r\n            users: []\r\n        });\r\n\r\n        app.$Message.success('队伍创建成功');\r\n    }\r\n    createdTeamCb.hookMark = \"regHooks.createdTeamCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.createdTeam'].push(createdTeamCb);\r\n\r\n    // 离开队伍的回调\r\n    let leaveTeamCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$delete(app.user, 'team');\r\n        app.$Message.info('已离开队伍');\r\n\r\n        app.game.getTeamList(app.user.map.id)\r\n    }\r\n    leaveTeamCb.hookMark = \"regHooks.leaveTeamCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.leaveTeam'].push(leaveTeamCb);\r\n\r\n    // 加入队伍\r\n    let addTeamCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        // 整理结构\r\n        let combat = data.data.combat || null,\r\n            leader = data.data.users[0].nickname,\r\n            users = data.data.users;\r\n\r\n        for (let i = 0; i < this.user_info.screens.length; i++) {\r\n            const screen = this.user_info.screens[i];\r\n            if (screen._id == combat) {\r\n                combat = screen.name;\r\n            }\r\n        }\r\n\r\n        app.$set(app.user, 'team', {\r\n            combat: combat,\r\n            leader: leader,\r\n            users: users\r\n        });\r\n        app.$Message.info('已加入队伍');\r\n    }\r\n    addTeamCb.hookMark = \"regHooks.addTeamCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.addTeam'].push(addTeamCb);\r\n\r\n    // 重新接收队伍信息\r\n    let onMyTeamReloadCb = function (data) {\r\n        if (data.code && data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        let user = app.user;\r\n\r\n        // 队员退出\r\n        if (data.new_uid && !data.team && user.team) {\r\n            // 移除队员\r\n            user.team.users.forEach((item, index) => {\r\n                if (item._id == data.new_uid) {\r\n                    user.team.users.splice(index, 1);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        if (data.data || !data.team) {\r\n            if (data.data) {\r\n                app.$set(user, 'fighting', false)\r\n            }\r\n            app.$delete(user, 'team')\r\n            app.$delete(user, 'combatName')\r\n            return;\r\n        }\r\n\r\n        // 获取队长信息\r\n        let leader = data.team.leader,\r\n            users = [];\r\n\r\n        for (let i = 0; i < data.team.users.length; i++) {\r\n            const user = data.team.users[i];\r\n            if (user._id == leader) {\r\n                leader = user.email;\r\n            }\r\n            users.push({\r\n                _id: user._id,\r\n                email: user.email,\r\n                level: user.level\r\n            })\r\n        }\r\n\r\n        app.$set(user, 'team', {\r\n            leader: leader,\r\n            users: users,\r\n            combat: data.team.combat\r\n        });\r\n\r\n        if (user.email === leader && app.user.fighting) {\r\n            this.startCombat(data.team.combat);\r\n        }\r\n    }\r\n    onMyTeamReloadCb.hookMark = \"regHooks.onMyTeamReloadCb\";\r\n    GameApi.regHookHandlers['onMyTeamReload'].push(onMyTeamReloadCb);\r\n\r\n    // 获取队伍列表\r\n    let getTeamListCb = function (data) {\r\n\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        let user = app.user;\r\n\r\n        app.$set(user, 'screens', data.data.screens);\r\n        app.$set(user, 'teams', data.data.teams.filter(ts => ts.users.length !== ((ts.combat || {}).player_num)));\r\n    }\r\n    getTeamListCb.hookMark = \"regHooks.getTeamListCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.getTeamList'].push(getTeamListCb);\r\n\r\n    // 切换场景回调\r\n    let switchCombatScreenCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        app.$Message.success(\"切换副本成功\");\r\n        app.game.getTeamList(app.user.map.id)\r\n    }\r\n    switchCombatScreenCb.hookMark = \"regHooks.switchCombatScreenCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.switchCombatScreen'].push(switchCombatScreenCb);\r\n\r\n    // 战斗开始\r\n    let onStartBatCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        const user = app.user\r\n        const battleUnit = data.data.initData\r\n\r\n        // 储存怪物列表，用以指定捕捉\r\n        battleUnit.filter(bu => !bu.is_palyer).map(bu => {\r\n            if (!app.monsterList.includes(bu.name)) {\r\n                app.monsterList.push(bu.name)\r\n            }\r\n        })\r\n        \r\n        // 匹配捕捉的宠物名称\r\n        const catchTarget = battleUnit.find(bu => user.catchPet.includes(bu.name) && bu.skills.length > 0)\r\n        this.roundOperating(\r\n            catchTarget ? '1001' : (user.skilltype || '1'),\r\n            catchTarget ? '' : (user.skillid || '1'),\r\n            catchTarget ? catchTarget.id: '',\r\n            user.team ? user.team._id : ''\r\n        );\r\n    }\r\n    onStartBatCb.hookMark = \"regHooks.onStartBatCb\";\r\n    GameApi.regHookHandlers['onStartBat'].push(onStartBatCb);\r\n\r\n    // 战斗结束\r\n    let onRoundBatEndCb = function (data) {\r\n        // 开启新的战斗\r\n        // data.data.win 判断战斗结果\r\n        const user = app.user\r\n        if (user.myInfo.hp_store < 5000) {\r\n            this.byGoodsToSystem(2, '5eef5b6e0faad0b123d709c5');\r\n        }\r\n        if (user.myInfo.mp_store < 5000) {\r\n            this.byGoodsToSystem(2, '5eef5d140faad0b123d709c6');\r\n        }\r\n        if (user.fighting) {\r\n            this.startCombat(user.team.combat);\r\n        }\r\n\r\n        // 保存战斗消息\r\n        app.setMessage(this.email, data.data);\r\n        this.userInfo();\r\n    }\r\n    onRoundBatEndCb.hookMark = \"regHooks.onRoundBatEndCb\";\r\n    GameApi.regHookHandlers['onRoundBatEnd'].push(onRoundBatEndCb);\r\n\r\n    // 回合操作\r\n    let roundOperatingCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n    }\r\n    roundOperatingCb.hookMark = \"regHooks.roundOperatingCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.roundOperating'].push(roundOperatingCb);\r\n\r\n    // 发送消息\r\n    let chatSendCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n    }\r\n    chatSendCb.hookMark = \"regHooks.chatSendCb\";\r\n    GameApi.regHookHandlers['chat.chatHandler.send'].push(chatSendCb);\r\n\r\n    // 接收消息\r\n    let onChatMsgCb = function (data) {\r\n        data.key = Date.now();\r\n        window.chatMsg.push(data);\r\n    }\r\n    onChatMsgCb.hookMark = \"regHooks.onChatMsgCb\";\r\n    GameApi.regHookHandlers['onChatMsg'].push(onChatMsgCb);\r\n\r\n    // 获取我的背包物品\r\n    let getMyGoodsCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        let flag = true;\r\n        for (let i = 0; i < data.data.goods.length; i++) {\r\n            const good = data.data.goods[i];\r\n            if (flag && good.goods && good.goods.info && good.goods.info.indexOf('储备值') > -1) {\r\n                this.useGoods(good._id);\r\n                flag = false;\r\n            } else {\r\n                let map, unusecbt, highcbt, goodsType\r\n                // 转换物品类型\r\n                switch (good.goods_type) {\r\n                    case '5eee25a1ba4d0b4c4ef605d0':\r\n                        goodsType = '蛋';\r\n                        break;\r\n                    case '5ec63cc24947081a6cd8d3a6':\r\n                        goodsType = '未鉴定的装备';\r\n                        break;\r\n                    case '5e77ee52b1012a6374d2bd1b':\r\n                        goodsType = '可装备的装备';\r\n                        break;\r\n                    case '5f01e52c0f80941f56ecc1ae':\r\n                        goodsType = '藏宝图';\r\n                        break;\r\n                    case '5ef04600544717379c820835':\r\n                        goodsType = '技能书';\r\n                        break;\r\n                    case '5ec63cb54947081a6cd8d3a5':\r\n                        goodsType = '材料';\r\n                        break;\r\n                    case '5f01e4990f80941f56ecc1ac':\r\n                        goodsType = '法宝材料';\r\n                        break;\r\n                    case '5eedd0138822d61cf3d9548a':\r\n                        goodsType = '兽决';\r\n                        break;\r\n                    case '5eef5f0b0faad0b123d709d0':\r\n                        goodsType = '大补丹';\r\n                        break;\r\n                    default:\r\n                        goodsType = `这个${good.goods_type}俺不知道`;\r\n                        break;\r\n                }\r\n\r\n                // 解析宝图位置\r\n                if (good.name && good.expand) {\r\n                    map = JSON.parse(good.expand).map\r\n                } else if ((good.name || good.goods.name).indexOf('藏宝图') > -1) {\r\n                    if ((good.name || good.goods.name).indexOf('高级藏宝图') > -1) {\r\n                        highcbt = true\r\n                    }\r\n                    unusecbt = true\r\n                }\r\n\r\n                app.user.goods.push({\r\n                    id: good._id,\r\n                    num: good.count,\r\n                    map,\r\n                    unusecbt,\r\n                    highcbt,\r\n                    name: good.name || good.goods.name,\r\n                    goodsType,\r\n                    info: good.goods || good\r\n                });\r\n            }\r\n        }\r\n\r\n        if (app.user.goods.length !== data.data.count) {\r\n            this.getMyGoods(++app.user.goodsPage);\r\n        }\r\n    }\r\n    getMyGoodsCb.hookMark = \"regHooks.getMyGoodsCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getMyGoods'].push(getMyGoodsCb);\r\n\r\n    // 购买蓝药血药\r\n    let byGoodsToSystemCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success('正在自动补气补蓝');\r\n\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    byGoodsToSystemCb.hookMark = \"regHooks.byGoodsToSystemCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.byGoodsToSystem'].push(byGoodsToSystemCb);\r\n\r\n    // 使用物品回调\r\n    let useGoodsCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        if (!window.freshPackage) return;\r\n        this.userInfo();\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    useGoodsCb.hookMark = \"regHooks.useGoodsCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.useGoods'].push(useGoodsCb);\r\n\r\n    // 仙蕴聚灵\r\n    let polyLinCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n    }\r\n    polyLinCb.hookMark = \"regHooks.polyLinCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.polyLin'].push(polyLinCb);\r\n\r\n    // 分解物品回调\r\n    let sellGoodsCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    useGoodsCb.hookMark = \"regHooks.sellGoodsCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.sellGoods'].push(sellGoodsCb);\r\n\r\n    // 佩戴拆卸装备\r\n    let wearUserEquipmentCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    useGoodsCb.hookMark = \"regHooks.wearUserEquipmentCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.wearUserEquipment'].push(wearUserEquipmentCb);\r\n\r\n    // 升级回调\r\n    let upPlayerLevelCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n    }\r\n    upPlayerLevelCb.hookMark = \"regHooks.upPlayerLevelCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.upPlayerLevel'].push(upPlayerLevelCb);\r\n\r\n    // 获取用户信息\r\n    let userInfoCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        data.user.nextExp = data.nextLevelGetExp\r\n        let user = app.user;\r\n        app.$set(user, 'myInfo', data.user);\r\n    }\r\n    userInfoCb.hookMark = \"regHooks.userInfoCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.userInfo'].push(userInfoCb);\r\n\r\n    // 获取用户技能\r\n    let getMySkillCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$set(app.user, 'skills', data.data.skill);\r\n\r\n        const arms = [];\r\n        const typeMap = {\r\n            0: '剑', 1: '枪', 2: '锤', 3: '伞'\r\n        };\r\n        const levelMap = {\r\n            0: { name: '入门', exp: 200 },\r\n            1: { name: '精修', exp: 500 },\r\n            2: { name: '意境', exp: 1500 },\r\n            3: { name: '心境', exp: 3500 },\r\n            4: { name: '解境', exp: 5000 },\r\n            5: { name: '魂入体', exp: 30000 },\r\n            6: { name: '灵出窍', exp: 100000 },\r\n            7: { name: '神境', exp: 500000 }\r\n        };\r\n        data.data.arms_exp.map((exp, index) => {\r\n            if (index >= 2) return\r\n            const typeName = typeMap[index];\r\n            const level = levelMap[data.data.arms_level[index]];\r\n            arms.push({ exp, needExp: level.exp, name: `${typeName}${level.name}` });\r\n        });\r\n        app.$set(app.user, 'arms', arms);\r\n    }\r\n    getMySkillCb.hookMark = \"regHooks.getMySkillCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getMySkill'].push(getMySkillCb);\r\n\r\n    // 分配属性点回调\r\n    let allocationPointCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n    }\r\n    allocationPointCb.hookMark = \"regHooks.allocationPointCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.allocationPoint'].push(allocationPointCb);\r\n\r\n    // 领取高级宝图任务\r\n    let getCopyTaskCb = function (data) {\r\n        \r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.getUserTask();\r\n    }\r\n    getCopyTaskCb.hookMark = \"regHooks.getCopyTaskCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.getCopyTask'].push(getCopyTaskCb);\r\n\r\n    // 获取任务列表\r\n    let getUserTaskCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$set(app.user, 'userTasks', data.data);\r\n    }\r\n    getUserTaskCb.hookMark = \"regHooks.getUserTaskCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getUserTask'].push(getUserTaskCb);\r\n\r\n    // 完成任务回调\r\n    let payUserTaskCb = function (data) {\r\n        \r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success('成功领到高级藏宝图，正在刷新背包');\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n        this.getUserTask();\r\n    }\r\n    payUserTaskCb.hookMark = \"regHooks.payUserTaskCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.payUserTask'].push(payUserTaskCb);\r\n\r\n    // 挖宝图回调\r\n    let wbtCb = function (data) {\r\n        if (!app.user.wbtResult) {\r\n            app.user.wbtResult = []\r\n        }\r\n        app.user.wbtResult.push(data.msg);\r\n        if (data.code != 200) {\r\n            app.$Message.error({\r\n                background: true,\r\n                content: data.msg\r\n            });\r\n            return;\r\n        }\r\n        app.$Message.success({\r\n            background: true,\r\n            content: data.msg\r\n        });\r\n        if (!window.freshPackage) return;\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    wbtCb.hookMark = \"regHooks.wbtCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.wbt'].push(wbtCb);\r\n    // 合成物品回调\r\n    let makeGoodsCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success(data.msg);\r\n\r\n        // 重置背包\r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    makeGoodsCb.hookMark = \"regHooks.makeGoodsCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.makeGoods'].push(makeGoodsCb);\r\n\r\n\r\n\r\n    //获取宠物信息\r\n    let getMyPetCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        app.$set(app.user, 'myPets', data.data.data);\r\n    }\r\n    getMyPetCb.hookMark = \"regHooks.getMyPetCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getMyPet'].push(getMyPetCb);\r\n\r\n    //宠物升级、加点，放生\r\n\r\n    let upUserPetLevelCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        this.getMyPet()\r\n    }\r\n\r\n\r\n    upUserPetLevelCb.hookMark = \"regHooks.upUserPetLevelCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.upUserPetLevel'].push(upUserPetLevelCb);\r\n\r\n    //宠物出战\r\n\r\n    let playUserPetCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        const msg = data.data.status ? `${data.data.name}参战成功` : `${data.data.name}休息成功`\r\n        app.$Message.success(msg);\r\n        this.getMyPet()\r\n    }\r\n\r\n\r\n    playUserPetCb.hookMark = \"regHooks.playUserPetCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.playUserPet'].push(playUserPetCb);\r\n\r\n\r\n    //宠物幻化\r\n\r\n    let turnIntoPetCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success(data.msg);\r\n        this.getMyPet()\r\n    }\r\n\r\n    turnIntoPetCb.hookMark = \"regHooks.turnIntoPetCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.turnIntoPet'].push(turnIntoPetCb);\r\n\r\n    //预览合宠\r\n\r\n    let getNewPetCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success(data.msg);\r\n        this.getMyPet()\r\n    }\r\n\r\n    getNewPetCb.hookMark = \"regHooks.getNewPetCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getNewPet'].push(getNewPetCb);\r\n\r\n    //确认合宠\r\n\r\n    let fitPetCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success(data.msg);\r\n        this.getMyPet()\r\n    }\r\n\r\n    fitPetCb.hookMark = \"regHooks.fitPetCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.fitPet'].push(fitPetCb);\r\n\r\n    //打书\r\n    let addUserPetSkillCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success(data.msg);\r\n        this.getMyPet()\r\n    }\r\n\r\n    addUserPetSkillCb.hookMark = \"regHooks.addUserPetSkillCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.addUserPetSkill'].push(addUserPetSkillCb);\r\n\r\n\r\n}","<template>\r\n  <div\r\n    v-if=\"user\"\r\n    class=\"user\"\r\n  >\r\n    <p>\r\n      状态：{{user.status}}&nbsp;{{ user.status_msg && `${user.status_msg}` }}\r\n      <ButtonGroup size=\"small\">\r\n        <Button\r\n          size=\"small\"\r\n          type=\"info\"\r\n          @click=\"showEqsInfo = true\"\r\n        >\r\n          装备\r\n        </Button>\r\n        <Button\r\n          size=\"small\"\r\n          type=\"info\"\r\n          @click=\"showUserInfo = true\"\r\n        >\r\n          属性\r\n        </Button>\r\n        <Button\r\n          size=\"small\"\r\n          type=\"info\"\r\n          @click=\"showGains = true\"\r\n        >\r\n          收益\r\n        </Button>\r\n      </ButtonGroup>\r\n    </p>\r\n    <template v-if=\"user.myInfo\">\r\n      <div class=\"br\" />\r\n      <p>\r\n        LV.{{user.myInfo.level}}&nbsp;\r\n        [{{ Math.floor(user.myInfo.exp) }}/{{ Math.floor(user.myInfo.nextExp) }}]\r\n        &nbsp;\r\n        <a\r\n          v-if=\"user.myInfo.exp > user.myInfo.nextExp\"\r\n          @click=\"game.upPlayerLevel()\"\r\n        >升级</a>\r\n        &nbsp;\r\n        <Poptip\r\n          v-if=\"user.myInfo.potential_num > 0\"\r\n          transfer\r\n          placement=\"bottom\"\r\n        >\r\n          <Button\r\n            size=\"small\"\r\n            type=\"info\"\r\n          >\r\n            加点\r\n          </Button>\r\n          <div slot=\"content\">\r\n            <a\r\n              @click=\"handleAllocationPoint(1)\"\r\n              size=\"small\"\r\n            >\r\n              全力加点\r\n            </a>\r\n            <a\r\n              @click=\"handleAllocationPoint(2)\"\r\n              size=\"small\"\r\n            >\r\n              全魔加点\r\n            </a>\r\n          </div>\r\n        </Poptip>\r\n      </p>\r\n      <div class=\"br\" />\r\n      <p>\r\n        财产：{{ Math.floor(user.myInfo.game_gold) }}仙石\r\n        &nbsp;\r\n        {{ Math.floor(user.myInfo.game_silver) }}灵石\r\n        &nbsp;\r\n        <Button\r\n          size=\"small\"\r\n          type=\"info\"\r\n          @click=\"openBag\"\r\n        >\r\n          储物戒指\r\n        </Button>\r\n      </p>\r\n      <div class=\"br\" />\r\n      <p>\r\n        气血储备：{{ Math.floor(user.myInfo.hp_store) }}\r\n        &nbsp;魔法储备：{{ Math.floor(user.myInfo.mp_store) }}\r\n        &nbsp;活力：{{ Math.floor(user.myInfo.vitality_num) }}\r\n        &nbsp;<a @click=\"game.polyLin(3)\">仙蕴转活力</a>\r\n      </p>\r\n    </template>\r\n    <!-- 修炼 -->\r\n    <template v-if=\"user.arms\">\r\n      <div class=\"br\" />\r\n      <div>\r\n        <Tag v-for=\"arm in user.arms\" :key=\"arm.name\">\r\n          {{arm.name}}[{{arm.exp}}/{{arm.needExp}}]\r\n        </Tag>\r\n        &nbsp;\r\n        <Poptip\r\n          transfer\r\n          placement=\"bottom\"\r\n        >\r\n          <Button\r\n            size=\"small\"\r\n            type=\"info\"\r\n          >\r\n            点技能\r\n          </Button>\r\n          <div slot=\"content\">\r\n            <Input v-model=\"upSkillNum\" type=\"number\" style=\"width: 180px\">\r\n              <Select transfer v-model=\"upSkillType\" slot=\"prepend\" style=\"width: 60px;\">\r\n                <Option :value=\"1\">剑修</Option>\r\n                <Option :value=\"2\">枪修</Option>\r\n              </Select>\r\n              <Button slot=\"append\" type=\"primary\" size=\"small\" @click=\"handleFationSkill\">确定</Button>\r\n            </Input>\r\n          </div>\r\n        </Poptip>\r\n      </div>\r\n    </template>\r\n    <!-- 挖宝 ↓ -->\r\n    <template>\r\n      <template v-if=\"unusecbt\">\r\n        <template v-if=\"unusecbt.normal\">\r\n          <div class=\"br\" />\r\n          检测到你有\r\n          <span style=\"color: red\">{{unusecbt.normal.num}}</span>\r\n          张没鉴定的\r\n          <span style=\"color: red\">藏宝图</span>\r\n          [<a @click=\"() => {\r\n            game.useGoods(unusecbt.normal.id)\r\n          }\">鉴定一张</a>]\r\n          [<a @click=\"() => {\r\n            readToUse = {\r\n              useNum: unusecbt.normal.num,\r\n              id: unusecbt.normal.id,\r\n              name: '藏宝图'\r\n            };\r\n            handleUseItem()\r\n          }\">全部鉴定</a>]\r\n          <template v-if=\"unusecbt.normal.num >= 12\">\r\n            <div class=\"br\" />\r\n            <a\r\n              v-if=\"hightcbtTask\"\r\n              @click=\"game.payUserTask(hightcbtTask.utid)\"\r\n            >\r\n              完成\r\n            </a>\r\n            <a\r\n              v-else\r\n              @click=\"game.getCopyTask(hightcbtTaskId)\"\r\n            >\r\n              领取\r\n            </a>\r\n            高级宝图任务\r\n          </template>\r\n        </template>\r\n        <template v-if=\"unusecbt.high\">\r\n          <div class=\"br\" />\r\n          检测到你有\r\n          <span style=\"color: red\">{{unusecbt.high.num}}</span>\r\n          张没鉴定的\r\n          <span style=\"color: red\">高级藏宝图</span>\r\n          [<a @click=\"() => {\r\n            readToUse = {\r\n              useNum: unusecbt.high.num,\r\n              id: unusecbt.high.id,\r\n              name: '高级藏宝图'\r\n            };\r\n            handleUseItem();\r\n          }\">全部鉴定</a>]\r\n        </template>\r\n      </template>\r\n    </template>\r\n    <template v-if=\"waBao.length > 0\">\r\n      <div class=\"br\" />\r\n      检测到你有\r\n      <span style=\"color: red\">{{waBao.length}}</span>\r\n      张藏宝图\r\n      &nbsp;\r\n      <Button\r\n        @click=\"handleAutoWaBao\"\r\n        size=\"small\"\r\n        type=\"info\"\r\n      >\r\n        自动挖宝\r\n      </Button>\r\n    </template>\r\n    <!-- 挖宝 ↑ -->\r\n    <!-- 地图 ↓ -->\r\n    <template v-if=\"user.map\">\r\n      <div class=\"br\" />\r\n      地图：\r\n      <Button\r\n        v-if=\"user.team\"\r\n        size=\"small\"\r\n        type=\"info\"\r\n        disabled\r\n      >\r\n        {{ user.map.name }}\r\n      </Button>\r\n      <Poptip\r\n        v-else\r\n        transfer\r\n        placement=\"bottom\"\r\n      >\r\n        <Button\r\n          size=\"small\"\r\n          type=\"info\"\r\n        >\r\n          {{ user.map.name }}\r\n        </Button>\r\n        <div slot=\"content\">\r\n          <p\r\n            v-for=\"item in toMap\"\r\n            :key=\"item.id\"\r\n          >\r\n            <a\r\n              @click=\"() => {\r\n              game.moveToNewMap(item.id);\r\n            }\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            >\r\n              {{item.name}}\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </Poptip>\r\n    </template>\r\n    <!-- 地图 ↑ -->\r\n    <!-- 副本 ↓ -->\r\n    <template v-if=\"user.team && user.team.leader === user.email\">\r\n      <div class=\"br\" />\r\n      副本：\r\n      <Poptip\r\n        transfer\r\n        placement=\"bottom\"\r\n      >\r\n        <Button\r\n          size=\"small\"\r\n          type=\"info\"\r\n        >\r\n          {{ user.combatName || '未选择' }}\r\n        </Button>\r\n        <div slot=\"content\">\r\n          <p\r\n            v-for=\"item in user.screens\"\r\n            :key=\"item._id\"\r\n          >\r\n            <a\r\n              @click=\"() => {\r\n              user.team.combat = item._id;\r\n              game.switchCombatScreen(item._id);\r\n            }\"\r\n              size=\"small\"\r\n              style=\"width: 100%;\"\r\n            >\r\n              {{item.name}}\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </Poptip>\r\n    </template>\r\n    <!-- 副本 ↑ -->\r\n    <div class=\"br\" />\r\n    <!-- 组队 ↓ -->\r\n    队伍：\r\n    <template v-if=\"user.team && user.team.leader === user.email\">\r\n      [{{ user.team.users.length || 1 }}/5]\r\n      <Button\r\n        @click=\"game.leaveTeam()\"\r\n        size=\"small\"\r\n        type=\"error\"\r\n      >\r\n        解散\r\n      </Button>\r\n      &nbsp;\r\n      <i-switch\r\n        v-model=\"user.fighting\"\r\n        :disabled=\"!user.combatName\"\r\n        true-color=\"#13ce66\"\r\n        false-color=\"#ff4949\"\r\n        @on-change=\"flag => {\r\n          user.fighting && game.startCombat(user.team.combat)\r\n        }\"\r\n        size=\"large\"\r\n      >\r\n        <span slot=\"open\">战斗</span>\r\n        <span slot=\"close\">平时</span>\r\n      </i-switch>\r\n    </template>\r\n    <template v-else-if=\"user.team\">\r\n      队长[{{user.team.leader}}]\r\n      <Button\r\n        size=\"small\"\r\n        type=\"warning\"\r\n        @click=\"game.leaveTeam()\"\r\n      >\r\n        离开\r\n      </Button>\r\n    </template>\r\n    <template v-else>\r\n      <Button\r\n        @click=\"game.createdTeam(user.map.id)\"\r\n        size=\"small\"\r\n        type=\"success\"\r\n      >\r\n        创建\r\n      </Button>\r\n      &nbsp;\r\n      <Poptip\r\n        transfer\r\n        placement=\"bottom\"\r\n      >\r\n        <Button\r\n          size=\"small\"\r\n          type=\"success\"\r\n          @click=\"game.getTeamList(user.map.id)\"\r\n        >\r\n          加入\r\n        </Button>\r\n        <div slot=\"content\">\r\n          <p\r\n            v-for=\"item in user.teams\"\r\n            :key=\"item._id\"\r\n          >\r\n            <a\r\n              @click=\"game.addTeam(item._id)\"\r\n              size=\"small\"\r\n              style=\"width:100%;\"\r\n            >\r\n              {{item.leader.nickname}}&nbsp;({{item.leader.level}})&nbsp;[{{item.users.length}}/{{(item.combat || {}).player_num}}]\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </Poptip>\r\n    </template>\r\n    <!-- 组队 ↑ -->\r\n    <div class=\"br\" />\r\n    <!-- 技能 ↓ -->\r\n    技能：\r\n    <Poptip\r\n      transfer\r\n      placement=\"bottom\"\r\n      v-if=\"user.skills\"\r\n    >\r\n      <Button\r\n        size=\"small\"\r\n        type=\"warning\"\r\n      >\r\n        {{user.skillname || '物理攻击'}}\r\n      </Button>\r\n      <div slot=\"content\">\r\n        <template v-if=\"user.skills.length === 0\">\r\n          没技能\r\n        </template>\r\n        <template v-else>\r\n          <p\r\n            v-for=\"item in user.skills\"\r\n            :key=\"item._id\"\r\n          >\r\n            <a\r\n              @click=\"() => {\r\n              $set(user, 'skillid', item._id);\r\n              $set(user, 'skillname', item.name);\r\n            }\"\r\n              style=\"width:100%;\"\r\n            >\r\n              {{item.name}}\r\n            </a>\r\n          </p>\r\n        </template>\r\n      </div>\r\n    </Poptip>\r\n    <!-- 捕捉 ↓ -->\r\n    <div class=\"br\" />\r\n    捕捉：\r\n    <Select v-model=\"user.catchPet\" multiple size=\"small\" style=\"width: auto;\">\r\n      <Option\r\n        v-for=\"monster in monsterList\"\r\n        :value=\"monster\"\r\n        :key=\"monster\"\r\n      >\r\n        {{monster}}\r\n      </Option>\r\n    </Select>\r\n    &nbsp;\r\n    丢弃\r\n    <Select v-model=\"user.discardPet\" multiple size=\"small\" style=\"width: auto;\">\r\n      <Option\r\n        v-for=\"monster in monsterList\"\r\n        :value=\"monster\"\r\n        :key=\"monster\"\r\n      >\r\n        {{monster}}\r\n      </Option>\r\n    </Select>\r\n    <!-- 捕捉 ↑ -->\r\n    <!-- 技能 ↑ -->\r\n    <div class=\"br\" />\r\n    宠物：\r\n    <Button\r\n      size=\"small\"\r\n      type=\"info\"\r\n      @click=\"showMypets=true\"\r\n    >查看</Button>\r\n    <div class=\"br\" />\r\n    <!-- 战斗信息 ↓ -->\r\n    <div v-if=\"'object' == typeof user.message\">\r\n      [{{ user.message.time }}]\r\n      &nbsp;\r\n      {{'第' + user.message.round_num + '轮'}}\r\n      &nbsp;\r\n      <div\r\n        style=\"display:inline-block\"\r\n        v-html=\"user.message.mark\"\r\n      />\r\n      <div\r\n        style=\"display:inline-block\"\r\n        v-html=\"user.message.msg.join('<br />')\"\r\n      />\r\n    </div>\r\n    <!-- 战斗信息 ↑ -->\r\n    <!-- 背包↓ -->\r\n    <Modal\r\n      v-model=\"opened\"\r\n      fullscreen\r\n      footer-hide\r\n    >\r\n      <div\r\n        slot=\"header\"\r\n        class=\"good-header\"\r\n      >\r\n        <span>储物戒指</span>\r\n        <Input\r\n          v-model=\"searchText\"\r\n          suffix=\"ios-search\"\r\n          placeholder=\"名称、说明、属性值\"\r\n          style=\"width: 66%\"\r\n        />\r\n      </div>\r\n      <div class=\"goods-box\">\r\n        <Badge\r\n          :count=\"item.selected\"\r\n          overflow-count=\"999\"\r\n          v-for=\"item in goods\"\r\n          :key=\"item.id\"\r\n        >\r\n          <Button\r\n            size=\"small\"\r\n            class=\"good-name\"\r\n            :style=\"item.style\"\r\n            @click=\"goodsHandle(item)\"\r\n          >\r\n            <label v-html=\"item.name\"></label>({{item.num}})\r\n          </Button>\r\n        </Badge>\r\n\r\n      </div>\r\n      <div class=\"good-info\">\r\n        <p v-if=\"!readToUse\">\r\n          去上面点一个物品\r\n        </p>\r\n        <template v-else>\r\n          <div class=\"info-box\">\r\n            <div class=\"basci-info\">\r\n              <span :style=\"readToUse.style\">\r\n                {{readToUse.name}}\r\n              </span>\r\n              <span :style=\"readToUse.style\">价格：{{readToUse.price}}</span>\r\n              <span :style=\"readToUse.style\">{{readToUse.info}}</span>\r\n            </div>\r\n            <template v-if=\"readToUse.eq_info\">\r\n              <div class=\"eq-info\">\r\n                <span\r\n                  :style=\"readToUse.style\"\r\n                  v-for=\"(value,key) in readToUse.eq_info\"\r\n                  :key=\"key\"\r\n                >\r\n                  <span :style=\"key | addStyle\">{{key}}:</span>\r\n                  <span :style=\"key | addStyle\">{{value}}</span>\r\n                </span>\r\n              </div>\r\n            </template>\r\n          </div>\r\n          <div class=\"button-box\">\r\n            <InputNumber\r\n              v-if=\"readToUse.goodsType !== '可装备的装备'\"\r\n              :max=\"readToUse.num\"\r\n              :min=\"1\"\r\n              v-model=\"readToUse.useNum\"\r\n            />\r\n            <ButtonGroup\r\n              size=\"small\"\r\n              vertical\r\n            >\r\n              <Button\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"selectGood\"\r\n              >\r\n                标记\r\n              </Button>\r\n              <Button\r\n                v-if=\"['可装备的装备'].includes(readToUse.goodsType)\"\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"handleWearItem\"\r\n              >\r\n                装备\r\n              </Button>\r\n              <Button\r\n                v-if=\"['未鉴定的装备', '藏宝图', '技能书', '蛋', '大补丹'].includes(readToUse.goodsType)\"\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"handleUseItem\"\r\n              >\r\n                使用\r\n              </Button>\r\n              <Button\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"() => $Message.info('还没做嘤嘤嘤')\"\r\n              >\r\n                出售\r\n              </Button>\r\n              <Button\r\n                v-if='selectedGoods.length > 1'\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"makeGoods\"\r\n              >\r\n                合成\r\n              </Button>\r\n              <Button\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                @click=\"handleSellItem\"\r\n              >\r\n                分解\r\n              </Button>\r\n            </ButtonGroup>\r\n\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </Modal>\r\n    <!-- 背包↑ -->\r\n    <!-- 收益↓ -->\r\n    <Modal\r\n      v-model=\"showGains\"\r\n      fullscreen\r\n      footer-hide\r\n      title=\"战斗收益\"\r\n    >\r\n      <div v-if=\"!fightGains.beginTime\">\r\n        {{gains.tips}}\r\n      </div>\r\n      <template v-else>\r\n        <CellGroup>\r\n          <Cell\r\n            title=\"开始时间\"\r\n            :extra=\"`${gains.beginTime}`\"\r\n          />\r\n          <Cell\r\n            title=\"战斗时长\"\r\n            :extra=\"`${gains.fightTime}`\"\r\n          />\r\n          <Cell\r\n            title=\"获得经验\"\r\n            :extra=\"`${gains.gainExp}`\"\r\n          />\r\n          <Cell\r\n            title=\"战斗回合数\"\r\n            :extra=\"`${gains.roundCount}`\"\r\n          />\r\n          <Cell\r\n            title=\"战斗场数\"\r\n            :extra=\"`${gains.fightCount}`\"\r\n          />\r\n          <Cell\r\n            title=\"经验/分钟\"\r\n            :extra=\"`${gains.avgExp}`\"\r\n          />\r\n          <Cell\r\n            title=\"战斗场数/分钟\"\r\n            :extra=\"`${gains.avgFightCount}`\"\r\n          />\r\n          <Cell title=\"战利品\" />\r\n        </CellGroup>\r\n        <Tag\r\n          v-for=\"(value,key) in gains.goods\"\r\n          :key=\"key\"\r\n          color=\"pink\"\r\n        >{{key}}({{value}})</Tag>\r\n      </template>\r\n    </Modal>\r\n    <!-- 收益↑ -->\r\n    <!-- 人物装备↓ -->\r\n    <Modal\r\n      v-model=\"showEqsInfo\"\r\n      fullscreen\r\n      footer-hide\r\n      title=\"装备信息\"\r\n    >\r\n      <Collapse simple>\r\n        <Panel\r\n          :name=\"index | getIndex\"\r\n          v-for=\"(item,index) in eqsInfo\"\r\n          :key=\"item.id\"\r\n        > <img\r\n            :src=\"item.img\"\r\n            class=\"eq-img\"\r\n          >\r\n          <span :style=\"item.style\">{{item.name}}</span>\r\n          <div slot=\"content\">\r\n            <div\r\n              :style=\"`padding:2px;${item.style}`\"\r\n              v-for=\"(value,key) in item.info\"\r\n              :key=\"key\"\r\n            >\r\n              <span :style=\"key | addStyle\">{{key}}：</span>\r\n              <span :style=\"key | addStyle\">{{value}}</span>\r\n            </div>\r\n          </div>\r\n\r\n        </Panel>\r\n      </Collapse>\r\n    </Modal>\r\n    <!-- 人物装备↑ -->\r\n    <!-- 人物属性↓ -->\r\n    <Modal\r\n      v-model=\"showUserInfo\"\r\n      fullscreen\r\n      footer-hide\r\n      title=\"人物属性\"\r\n    >\r\n      <CellGroup>\r\n        <Cell\r\n          v-for=\"(value, key) in userInfo\"\r\n          :key=\"key\"\r\n          :title=\"key\"\r\n          :extra=\"`${value}`\"\r\n        />\r\n      </CellGroup>\r\n    </Modal>\r\n    <!-- 人物属性↑ -->\r\n    <!-- 宠物信息↓ -->\r\n    <Modal\r\n      v-model=\"showMypets\"\r\n      fullscreen\r\n      footer-hide\r\n      title=\"宠物信息\"\r\n    >\r\n      <Tabs\r\n        v-model=\"tabPaneName\"\r\n        size=\"small\"\r\n      >\r\n        <TabPane\r\n          :label=\"item.name\"\r\n          :name=\"`name${index+1}`\"\r\n          v-for=\"(item, index) in petsInfo\"\r\n          :key=\"item.id\"\r\n        >\r\n          <Divider size=\"small\">状态：{{item.status?'已参战':'休息中'}}</Divider>\r\n          <p\r\n            style=\"padding:5px\"\r\n            v-if=\"item.skills.length === 0\"\r\n          >\r\n            无技能\r\n          </p>\r\n          <Poptip\r\n            v-else\r\n            word-wrap\r\n            transfer\r\n            width=\"200\"\r\n            trigger=\"hover\"\r\n            v-for=\"(skill,index) in item.skills\"\r\n            :key=\"index\"\r\n            :content=\"skill.info\"\r\n          >\r\n            <Button\r\n              :style=\"skill.style\"\r\n              size=\"small\"\r\n            >{{skill.name}}</Button>\r\n          </Poptip>\r\n\r\n          <Table\r\n            v-if=\"tabPaneName === `name${index+1}`\"\r\n            :show-header=\"false\"\r\n            :columns=\"columns\"\r\n            :data=\"item.data\"\r\n            border\r\n          ></Table>\r\n          <ButtonGroup\r\n            size=\"small\"\r\n            shape=\"circle\"\r\n            class=\"pet-btn\"\r\n          >\r\n            <Button\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"handlePet(item,3)\"\r\n            >放生</Button>\r\n            <Button\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"handlePet(item,4)\"\r\n            >幻化</Button>\r\n            <Button\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"handlePet(item,1)\"\r\n            >升级</Button>\r\n            <Button\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"handlePet(item,2,1)\"\r\n            >全力</Button>\r\n            <Button\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"handlePet(item,2,2)\"\r\n            >全魔</Button>\r\n            <Button\r\n              size=\"small\"\r\n              type=\"primary\"\r\n              @click=\"handlePet(item,5)\"\r\n            >{{item.status?\"休息\":\"参战\"}}</Button>\r\n          </ButtonGroup>\r\n          <ButtonGroup\r\n            size=\"small\"\r\n            shape=\"circle\"\r\n            class=\"pet-btn\"\r\n          >\r\n            <Button\r\n              size=\"small\"\r\n              type=\"success\"\r\n              @click=\"handlePet(item, 6)\"\r\n            >合宠</Button>\r\n            <Button\r\n              size=\"small\"\r\n              type=\"success\"\r\n              @click=\"handlePet(item, 7)\"\r\n            >打书</Button>\r\n          </ButtonGroup>\r\n        </TabPane>\r\n      </Tabs>\r\n    </Modal>\r\n    <!-- 宠物信息↑ -->\r\n    <!-- 防误操作modal -->\r\n    <Modal\r\n      v-model=\"modal\"\r\n      :styles=\"{top: '85px'}\"\r\n    >\r\n      <p\r\n        slot=\"header\"\r\n        style=\"color:#f60;text-align:center\"\r\n      >\r\n        <Icon type=\"ios-information-circle\"></Icon>\r\n        <span>确定{{handleData.name}}？</span>\r\n      </p>\r\n      <div v-if=\"handleData.name !== '放生'\" style=\"text-align:center\">\r\n        <img\r\n          v-if=\"handleData.type<6\"\r\n          src=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593343846064&di=97a86fe902b9754de368f02e336e4eab&imgtype=0&src=http%3A%2F%2Fwww.11xzb.com%2Fd%2Ffile%2Fmoban5%2F201909020832%2F1567158444899421.png\"\r\n          alt=\"\"\r\n          style=\"width:120px;padding-top:5px\"\r\n        >\r\n        <!-- 合宠 -->\r\n        <div\r\n          v-else-if=\"handleData.type===6\"\r\n          class=\"slelect-box\"\r\n        >\r\n          <Select\r\n            v-model=\"pet1\"\r\n            size=\"small\"\r\n          >\r\n            <Option\r\n              v-for=\"item in petList\"\r\n              :disabled=\"[item.status,item.value,pet2] | disabled\"\r\n              :value=\"item.value\"\r\n              :key=\"item.value\"\r\n            >{{ item.label }}</Option>\r\n          </Select>\r\n          <p>技能：{{selectPet1}}</p>\r\n          <Select\r\n            v-model=\"pet2\"\r\n            size=\"small\"\r\n          >\r\n            <Option\r\n              v-for=\"item in petList\"\r\n              :disabled=\"[item.status,item.value,pet1] | disabled\"\r\n              :value=\"item.value\"\r\n              :key=\"item.value\"\r\n            >{{ item.label }}</Option>\r\n          </Select>\r\n          <p>技能：{{selectPet2}}</p>\r\n        </div>\r\n        <!-- 打书 -->\r\n        <div\r\n          v-else\r\n          class=\"slelect-box\"\r\n        >\r\n          <Select\r\n            v-model=\"pet1\"\r\n            size=\"small\"\r\n          >\r\n            <Option\r\n              v-for=\"item in petList\"\r\n              :disabled=\"[item.status,item.value,pet2] | disabled\"\r\n              :value=\"item.value\"\r\n              :key=\"item.value\"\r\n            >{{ item.label }}</Option>\r\n          </Select>\r\n          <p>技能：{{selectPet1}}</p>\r\n          <Select\r\n            v-model=\"pet2\"\r\n            size=\"small\"\r\n          >\r\n            <Option\r\n              v-for=\"item in bookList\"\r\n              :value=\"item.value\"\r\n              :key=\"item.value\"\r\n            >{{ item.label }}</Option>\r\n          </Select>\r\n        </div>\r\n\r\n        <p v-if='handleData.type === 1'>点击确认继续升级，或者点击取消关闭面板</p>\r\n        <p v-if='handleData.type === 3 && handleData.data.status===1'>宠物正在参战...</p>\r\n\r\n      </div>\r\n\r\n      <div\r\n        slot=\"footer\"\r\n        style=\"text-align:center\"\r\n      >\r\n        <Button\r\n          size=\"small\"\r\n          @click=\"modal=false\"\r\n        >取消</Button>\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"small\"\r\n          :disabled=\"handleData.type === 3 && handleData.data.status===1\"\r\n          @click=\"confirmHandle\"\r\n        >确认</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nlet messageTime;\r\nimport GameApi from \"@libs/YunDingOnlineSDK.js\";\r\nimport regHooks from \"@libs/regHooks.js\";\r\nimport configData from \"@/config.js\";\r\nimport { sleep, findMapPath } from \"@libs/tools\";\r\nexport default {\r\n  name: \"User\",\r\n  data() {\r\n    return {\r\n      game: {},\r\n      user: null,\r\n      config: configData,\r\n      hightcbtTaskId: \"5f01ee501a863c76d650525c\",\r\n      opened: false,\r\n      showGains: false,\r\n      showEqsInfo: false,\r\n      showUserInfo: false,\r\n      showMypets: false,\r\n      fightGains: {\r\n        goods: {}, //战利品\r\n        gainExp: 0, //获得经验\r\n        beginTime: 0, //开始时间\r\n        roundCount: 0, //回合数\r\n        fightCount: 0, //战斗场数\r\n      },\r\n      upSkillNum: 50,\r\n      upSkillType: 1,\r\n      readToUse: null,\r\n      searchText: \"\",\r\n      selectedGoods: [],\r\n      tabPaneName: \"name1\",\r\n      columns: [\r\n        {\r\n          title: \"column1\",\r\n          key: \"column1\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"column2\",\r\n          key: \"column2\",\r\n          width: 85,\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"column3\",\r\n          key: \"column3\",\r\n          width: 65,\r\n          align: \"center\",\r\n        },\r\n      ],\r\n      modal: false,\r\n      handleData: {},\r\n      pet1: \"\",\r\n      pet2: \"\",\r\n      monsterList: JSON.parse(localStorage.getItem('monsterList') || '[]'), // 怪物列表\r\n    };\r\n  },\r\n  watch: {\r\n    user: {\r\n      deep: true,\r\n      handler(user) {\r\n        let combatName = null;\r\n        if (user && user.screens && user.team) {\r\n          if (user.team.combat) {\r\n            const combat = user.screens.find(\r\n              (scr) => scr._id === user.team.combat\r\n            );\r\n            if (combat) combatName = combat.name;\r\n          }\r\n        }\r\n        user.combatName = combatName;\r\n        this.saveStorageUserInfo(user);\r\n      },\r\n    },\r\n    monsterList: {\r\n      deep: true,\r\n      handler (list) {\r\n        localStorage.setItem('monsterList', JSON.stringify(list))\r\n      }\r\n    }\r\n  },\r\n  filters: {\r\n    addStyle(val) {\r\n      const arr1 = [\"体质\", \"魔力\", \"力量\", \"耐力\", \"敏捷\"];\r\n      const arr2 = [\"物理暴击\", \"法术暴击\", \"特技\"];\r\n\r\n      if (arr1.includes(val)) {\r\n        return \"color:green;font-weight: 600;\";\r\n      }\r\n      if (arr2.includes(val)) {\r\n        return \"color:orchid;\";\r\n      }\r\n      return \"\";\r\n    },\r\n    getIndex(val) {\r\n      const index = val + 1;\r\n      return index.toString();\r\n    },\r\n    //参战宠物和重复不能选\r\n    disabled(val) {\r\n      return val[0] ? true : false || val[1] === val[2];\r\n    },\r\n  },\r\n  computed: {\r\n    toMap() {\r\n      const user = this.user;\r\n      const maps = configData.maps;\r\n      if (user && user.map) {\r\n        const { up, next } = maps.find((mp) => mp.id === user.map.id);\r\n        const toMaps = [...up, ...next].map((id) => {\r\n          const name = maps.find((mp) => mp.id === id).name;\r\n          return { id, name };\r\n        });\r\n        return toMaps;\r\n      } else {\r\n        return [];\r\n      }\r\n    },\r\n    waBao() {\r\n      const goods = this.user.goods;\r\n      const maps = configData.maps;\r\n      if (!goods) return [];\r\n      const btMaps = goods\r\n        .filter((gds) => !!gds.map)\r\n        .map((gds) => ({\r\n          id: gds.map,\r\n          btId: gds.id,\r\n          name: maps.find((mp) => mp.id === gds.map).name,\r\n          mapid: gds.map\r\n        }))\r\n        .sort((a, b) => a.mapid - b.mapid);\r\n      return btMaps;\r\n    },\r\n    unusecbt() {\r\n      const goods = this.user.goods;\r\n      if (!goods) return null;\r\n      const unuse = goods.filter((gds) => gds.unusecbt);\r\n      if (unuse.length === 0) return null;\r\n      const unusecbt = {\r\n        normal: unuse.find((usc) => !usc.highcbt),\r\n        high: unuse.find((usc) => usc.highcbt)\r\n      };\r\n      return unusecbt;\r\n    },\r\n    hightcbtTask() {\r\n      const userTasks = this.user.userTasks;\r\n      if (!userTasks) return null;\r\n      return this.user.userTasks.find(\r\n        (ust) => ust.task._id === this.hightcbtTaskId\r\n      );\r\n    },\r\n    //背包\r\n    goods() {\r\n      let arr = [];\r\n      if (this.user.goods) {\r\n        this.user.goods.forEach((ele) => {\r\n          const { name, num, id } = ele;\r\n          const price_type = [null, \"灵石\", \"仙石\"];\r\n          const price = ele.info.price_type\r\n            ? `${ele.info.price / ele.info.price_type}${\r\n                price_type[ele.info.price_type]\r\n              }`\r\n            : null; //价格\r\n          const info = ele.info.info; //描述\r\n          const style = ele.info.style; //文字样式\r\n          const goodsType = ele.goodsType; //文字样式\r\n          const selected = this.selectedGoods.find(\r\n            (item) => item.id === ele.id\r\n          );\r\n\r\n          let obj = {\r\n            name,\r\n            num,\r\n            id,\r\n            price,\r\n            info,\r\n            style,\r\n            goodsType,\r\n            selected: selected ? selected.num : 0,\r\n          };\r\n          if (ele.goodsType === \"可装备的装备\") {\r\n            const eq_info = this.getEqsInfo(ele.info);\r\n            obj.eq_info = eq_info;\r\n          }\r\n          arr.push(obj);\r\n        });\r\n      }\r\n\r\n      if (this.searchText) {\r\n        const list = arr.filter((ele) => {\r\n          let str = `${ele.name}${ele.info}`;\r\n          if (ele.eq_info) {\r\n            str += JSON.stringify(ele.eq_info);\r\n          }\r\n          return str.includes(this.searchText);\r\n        });\r\n        return list;\r\n      }\r\n\r\n      return arr;\r\n    },\r\n    gains() {\r\n      //战斗时长 s\r\n      const endTime = Date.now();\r\n      const time = (endTime - this.fightGains.beginTime) / 1000;\r\n\r\n      const h = Math.floor(time / 3600);\r\n      const m = Math.floor((time / 60) % 60);\r\n      const s = Math.ceil(time % 60);\r\n\r\n      const fightTime = `${h}小时${m}分${s}秒`;\r\n\r\n      const avgExp = Math.floor((this.fightGains.gainExp / time) * 60);\r\n      const avgFightCount = ((this.fightGains.fightCount / time) * 60).toFixed(\r\n        1\r\n      );\r\n      return {\r\n        goods: this.fightGains.goods, //战利品\r\n        gainExp: this.fightGains.gainExp, //获得经验\r\n        beginTime: new Date(this.fightGains.beginTime)\r\n          .toTimeString()\r\n          .slice(0, 8), //开始时间\r\n        roundCount: this.fightGains.roundCount, //回合数\r\n        fightCount: this.fightGains.fightCount, //战斗场数\r\n        fightTime: fightTime, //战斗时长\r\n        //endTime: endTime, //结束时间\r\n        avgExp: avgExp, //经验/分\r\n        avgFightCount: avgFightCount, //战斗场数/分\r\n\r\n        tips: \"暂无收益，请开启战斗\",\r\n      };\r\n    },\r\n    eqsInfo() {\r\n      let arr = [];\r\n      this.user.userEqs &&\r\n        this.user.userEqs.forEach((ele) => {\r\n          const obj = this.getEqsInfo(ele);\r\n          const { name, style, img } = ele;\r\n          arr.push({\r\n            name,\r\n            style,\r\n            img,\r\n            info: obj,\r\n          });\r\n        });\r\n      return arr;\r\n    },\r\n    userInfo() {\r\n      const obj = this.user.myInfo;\r\n      let info = {};\r\n      if (obj) {\r\n        info = {\r\n          等级: obj.level,\r\n          经验: Math.round(obj.exp),\r\n          气血: obj.hp_cap,\r\n          魔法: obj.mp,\r\n          命中: obj.hit,\r\n          物理伤害: obj.physical_damage,\r\n          物理防御: obj.physical_defense,\r\n          魔法伤害: obj.magic_damage,\r\n          魔法防御: obj.magic_defense,\r\n          治疗能力: obj.restore_damage,\r\n          速度: obj.speed,\r\n          物理暴击: obj.physical_crit,\r\n          法术暴击: obj.magic_crit,\r\n          体质: obj.con,\r\n          魔力: obj.int,\r\n          力量: obj.str,\r\n          耐力: obj.vit,\r\n          敏捷: obj.agi,\r\n          潜力: obj.potential_num,\r\n          躲避: obj.dodge,\r\n          活力: Math.round(obj.vitality_num),\r\n          气血储备: Math.round(obj.hp_store),\r\n          魔法储备: Math.round(obj.mp_store),\r\n          宝宝经验: Math.round(obj.pet_exp),\r\n        };\r\n      }\r\n\r\n      return info;\r\n    },\r\n    petsInfo() {\r\n      const arr = this.user.myPets;\r\n      let pets = [];\r\n      const type = [\"普通\", \"稀有\", \"传说\", \"PY\"];\r\n      arr &&\r\n        arr.forEach((ele) => {\r\n          const { skill, _id, name, status } = ele;\r\n          const data = [\r\n            {\r\n              column1: `等级：${ele.level}`,\r\n              column2: `类型：${type[ele.type]}`,\r\n              column3: `成长：${ele.growing_num.toFixed(2)}`,\r\n            },\r\n            {\r\n              column1: `气血：${Math.round(ele.hp)}`,\r\n              column2: `魔法：${Math.round(ele.mp)}`,\r\n              column3: `命中：${Math.round(ele.hit)}`,\r\n            },\r\n            {\r\n              column1: `攻击资质：${ele.str_zz}`,\r\n              column2: `物理伤害：${Math.round(ele.physical_damage)}`,\r\n              column3: `力量：${ele.str}`,\r\n            },\r\n            {\r\n              column1: `法力资质：${ele.int_zz}`,\r\n              column2: `魔法伤害：${Math.round(ele.magic_damage)}`,\r\n              column3: `魔力：${ele.int}`,\r\n            },\r\n            // {\r\n            //   column1: `体力资质：${ele.con_zz}`,\r\n            //   column2: `魔法防御：${Math.round(ele.magic_defense)}`,\r\n            //   column3: `体质：${ele.con}`,\r\n            // },\r\n            // {\r\n            //   column1: `防御资质：${ele.vit_zz}`,\r\n            //   column2: `物理防御：${Math.round(ele.physical_defense)}`,\r\n            //   column3: `耐力：${ele.vit}`,\r\n            // },\r\n\r\n            // {\r\n            //   column1: `速资质度：${ele.speed_zz}`,\r\n            //   column2: `速度：${Math.round(ele.speed)}`,\r\n            //   column3: `敏捷：${ele.agi}`,\r\n            // },\r\n            // {\r\n            //   column1: `躲避质度：${ele.dodge_zz}`,\r\n            //   column2: `躲避：${Math.round(ele.dodge)}`,\r\n            //   column3: `潜力：${ele.potential_num}`,\r\n            // },\r\n          ];\r\n          let skills = [];\r\n          skill.forEach((item) => {\r\n            skills.push({\r\n              name: item.name,\r\n              info: item.info,\r\n              style: item.high ? \"margin:5px;color:orchid\" : \"margin:5px;\",\r\n            });\r\n          });\r\n          const point = ele.potential_num;\r\n          const obj = { _id, skills, name, data, status, point };\r\n          pets.push(obj);\r\n        });\r\n      return pets;\r\n    },\r\n    petList() {\r\n      const options = [];\r\n      this.petsInfo.forEach((ele) => {\r\n        let skills = [];\r\n        ele.skills.forEach((item) => {\r\n          skills.push(item.name);\r\n        });\r\n        options.push({\r\n          value: ele._id,\r\n          label: `${ele.name} ， ${ele.data[0].column3}`,\r\n          skills,\r\n          status: ele.status,\r\n        });\r\n      });\r\n      return options;\r\n    },\r\n    selectPet1() {\r\n      const pet = this.petList.find((ele) => this.pet1 === ele.value) || {\r\n        skills: [],\r\n      };\r\n      return pet.skills.join(\"，\") || \"无\";\r\n    },\r\n    selectPet2() {\r\n      const pet = this.petList.find((ele) => this.pet2 === ele.value) || {\r\n        skills: [],\r\n      };\r\n      return pet.skills.join(\",\") || \"无\";\r\n    },\r\n    bookList() {\r\n      const options = [];\r\n      this.goods.forEach((ele) => {\r\n        ele.goodsType === \"兽决\" &&\r\n          options.push({\r\n            value: ele.id,\r\n            label: ele.name,\r\n          });\r\n      });\r\n      return options;\r\n    },\r\n  },\r\n  mounted() {\r\n    regHooks(this);\r\n    const { email } = this.$route.params;\r\n    let user = this.getStorageAccount(email);\r\n    this.initUser(email, user.password);\r\n\r\n    // 每隔1分钟检测有没有战斗信息更新\r\n    setInterval(() => {\r\n      const now = Date.now();\r\n      if (now - messageTime > 30000) {\r\n        window.location.reload();\r\n      }\r\n    }, 60000);\r\n  },\r\n  methods: {\r\n    /**\r\n     * 从 localStorage 中取出账号密码\r\n     * @param {*} email\r\n     */\r\n    getStorageAccount: function (email) {\r\n      let users =\r\n        JSON.parse(localStorage.getItem(\"ydxxGame_userList\") || \"{}\") || {};\r\n      return { email: email, password: users[email] };\r\n    },\r\n    /**\r\n     * 将技能保存到 localStorage 中\r\n     * @param {*} 用户的所有信息\r\n     */\r\n    saveStorageUserInfo: function (user) {\r\n      localStorage.setItem(\r\n        user.email,\r\n        JSON.stringify({\r\n          fighting: user.fighting,\r\n          email: user.email,\r\n          skillid: user.skillid,\r\n          skillname: user.skillname,\r\n          catchPet: user.catchPet,\r\n          discardPet: user.discardPet || []\r\n        })\r\n      );\r\n    },\r\n    /**\r\n     * 从 localStorage 中取出用户技能\r\n     */\r\n    getStorageUserInfo: function (email) {\r\n      const user = localStorage.getItem(email);\r\n      if (user) {\r\n        return JSON.parse(user);\r\n      }\r\n    },\r\n    /**\r\n     * 添加一个用户到列表\r\n     *\r\n     * @param {*} email\r\n     * @param {*} password\r\n     */\r\n    initUser: function (email, password) {\r\n      // 创建游戏对象\r\n      const game = new GameApi();\r\n      // 加载技能数据\r\n      const user = this.getStorageUserInfo(email) || {\r\n        email,\r\n        status: \"已添加\",\r\n        teams: [],\r\n        fighting: false,\r\n      };\r\n\r\n      // 游戏对象保存起来\r\n      this.game = game;\r\n      // 暴露到全局\r\n      window.game = game;\r\n\r\n      // 添加到用户列表\r\n      this.user = user;\r\n      // 暴露到全局\r\n      window.user = user;\r\n\r\n      // 登录账号\r\n      game.login(email, password);\r\n    },\r\n    // 设置消息\r\n    setMessage: function (email, data) {\r\n      messageTime = Date.now();\r\n      data.time = this.getDateTime();\r\n      //记录战斗开始时间\r\n      this.fightGains.beginTime = this.fightGains.beginTime || messageTime;\r\n      //回合数+1\r\n      this.fightGains.roundCount++;\r\n      data.msg = data.round_arr.map(ra => {\r\n        if (ra.a_skill_type === 1) {\r\n          if (ra.mark.indexOf('成功') > 1) {\r\n            this.game.getMyPet();\r\n            console.log(this.petsInfo)\r\n            this.petsInfo.map(pet => {\r\n              if (this.user.discardPet.find(dp => dp.indexOf(pet.name) > -1)) {\r\n                this.game.upUserPetLevel(pet._id, 3, 0);\r\n              }\r\n            });\r\n          }\r\n          return ra.mark;\r\n        }\r\n        return `【${ra.a_name}】对【${ra.b_name}】使用了【${ra.process}】造成了【${ra.hurt\r\n              .map(Math.floor)\r\n              .join(\",\")}】伤害`\r\n      })\r\n\r\n      if (data.die_arr && data.die_arr.length) {\r\n        data.msg.push(data.die_arr.map((da) => `${da}卒`).join(\",\"));\r\n      }\r\n\r\n      if (data.win === 1) {\r\n        data.exp.forEach((item) => {\r\n          if (item.name == email) {\r\n            data.msg.push(`获得经验[${Math.floor(item.exp) || \"没经验了\"}]`);\r\n            this.fightGains.gainExp += Math.floor(item.exp);\r\n            this.fightGains.fightCount++;\r\n          }\r\n        });\r\n        data.player_reward.forEach((item) => {\r\n          if (item.name == email) {\r\n            if (item.mark) {\r\n              data.msg.push(item.mark);\r\n            } else {\r\n              let reward = [];\r\n              item.goods.forEach((good) => {\r\n                reward.push(good.gname);\r\n              });\r\n              if (reward.length > 0) {\r\n                data.msg.push(`战利品[${reward.join(\",\")}]`);\r\n                //获取战利品后,添加更新背包的状态\r\n                this.user.updateGoods = true;\r\n                //合并，更新战利品\r\n                reward.forEach((ele) => {\r\n                  this.fightGains.goods.hasOwnProperty(ele)\r\n                    ? this.fightGains.goods[ele]++\r\n                    : (this.fightGains.goods[ele] = 1);\r\n                });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      if (data.win === 2) {\r\n        data.msg.push(\"你死了\");\r\n        this.fightGains.fightCount++;\r\n      }\r\n\r\n      this.$set(this.user, \"message\", data);\r\n    },\r\n    handleAllocationPoint(type) {\r\n      const pointNum = this.user.myInfo.potential_num;\r\n      // 全力\r\n      if (type === 1) {\r\n        this.game.allocationPoint(pointNum, 0, 0, 0, 0);\r\n      }\r\n      // 全魔\r\n      if (type === 2) {\r\n        this.game.allocationPoint(0, pointNum, 0, 0, 0);\r\n      }\r\n    },\r\n    async handleFationSkill(type) {\r\n      if (this.upSkillNum <= 0) {\r\n        this.$Message.error('大胸弟，别搞事情');\r\n        return;\r\n      }\r\n      if (this.upSkillNum * 20000 > this.user.myInfo.game_silver) {\r\n        this.$Message.error('大胸弟，你钱不够啊');\r\n        return;\r\n      }\r\n      this.$Spin.show({\r\n        render: () => (\r\n          <p>\r\n            正在自动连点技能，为避免请求次数过多和程序错乱，在此窗口关闭后再进行其他操作\r\n          </p>\r\n        ),\r\n      });\r\n      for (let i = 0; i < this.upSkillNum; i++) {\r\n        this.game.repairUserArms(this.upSkillType);\r\n        await sleep(100);\r\n      }\r\n      this.game.userInfo();\r\n      this.game.getMySkill();\r\n      this.$Spin.hide();\r\n    },\r\n    getDateTime() {\r\n      let date = new Date();\r\n      return \"H:i:s\".replace(/[His]/g, (full) => {\r\n        let str = \"\";\r\n        switch (full) {\r\n          case \"H\":\r\n            str = date.getHours();\r\n            break;\r\n          case \"i\":\r\n            str = date.getMinutes();\r\n            break;\r\n          case \"s\":\r\n            str = date.getSeconds();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        return str.toString().padStart(2, \"0\");\r\n      });\r\n    },\r\n    // 打开背包\r\n    openBag() {\r\n      this.opened = !this.opened;\r\n      this.readToUse = null;\r\n      this.searchText = \"\";\r\n      this.selectedGoods = [];\r\n      //更新背包状态为 true 且 opened 为true时 ，重置背包\r\n      if (this.user.updateGoods && this.opened) {\r\n        this.user.updateGoods = false;\r\n        this.user.goods = [];\r\n        this.user.goodsPage = 1;\r\n        this.game.getMyGoods();\r\n      }\r\n    },\r\n    // 使用物品\r\n    async handleUseItem() {\r\n      const { useNum, id, name } = this.readToUse;\r\n      window.freshPackage = false;\r\n      this.$Spin.show({\r\n        render: () => (\r\n          <p>\r\n            正在连续使用物品{name}\r\n            {useNum}\r\n            个，为避免请求次数过多和程序错乱，在此窗口关闭后再进行其他操作\r\n          </p>\r\n        ),\r\n      });\r\n      for (let i = 0; i < useNum; i++) {\r\n        this.game.useGoods(id);\r\n        await sleep(1100);\r\n      }\r\n      window.freshPackage = true;\r\n      this.game.userInfo();\r\n      // 重置背包\r\n      this.user.goods = [];\r\n      this.user.goodsPage = 1;\r\n      this.game.getMyGoods();\r\n      //重置宠物信息\r\n      name.includes(\"蛋\") && this.game.getMyPet();\r\n      this.readToUse = null;\r\n      this.$Spin.hide();\r\n    },\r\n    // 装备物品\r\n    handleWearItem() {\r\n      const { id } = this.readToUse;\r\n      this.game.wearUserEquipment(id);\r\n    },\r\n    // 分解物品\r\n    handleSellItem() {\r\n      const { useNum, id, name } = this.readToUse;\r\n      this.game.sellGoods([{ id, num: useNum }]);\r\n      this.readToUse = null;\r\n    },\r\n    //选择物品\r\n    selectGood() {\r\n      const { useNum, id } = this.readToUse;\r\n      const obj = this.selectedGoods.find((ele) => {\r\n        const res = ele.id === id;\r\n        if (res) {\r\n          ele.num = useNum;\r\n        }\r\n        return res;\r\n      });\r\n      if (!obj) {\r\n        this.selectedGoods.push({ id, num: useNum });\r\n      }\r\n    },\r\n    //合成物品\r\n    makeGoods() {\r\n      this.game.makeGoods(this.selectedGoods);\r\n      this.selectedGoods = [];\r\n    },\r\n    //物品操作\r\n    goodsHandle(val) {\r\n      this.readToUse = val;\r\n      this.readToUse.useNum = 1;\r\n    },\r\n    //用于生成装备展示信息\r\n    getEqsInfo(obj) {\r\n      const eq_data = {\r\n        佩戴等级: obj.wear_level,\r\n        物理伤害: obj.physical_damage,\r\n        物理防御: obj.physical_defense,\r\n        魔法伤害: obj.magic_damage,\r\n        魔法防御: obj.magic_defense,\r\n        治疗能力: obj.restore_damage,\r\n        气血: obj.a,\r\n        速度: obj.speed,\r\n        体质: obj.con,\r\n        魔力: obj.int,\r\n        力量: obj.str,\r\n        耐力: obj.vit,\r\n        敏捷: obj.agi,\r\n        物理暴击: obj.physical_crit,\r\n        法术暴击: obj.magic_crit,\r\n        特技: obj.skill ? `${obj.skill.name}--${obj.skill.info}` : \"\",\r\n        评分: Math.round(obj.score),\r\n      };\r\n      let eq_info = {};\r\n      for (const key in eq_data) {\r\n        if (eq_data.hasOwnProperty(key)) {\r\n          const element = eq_data[key];\r\n          if (element) {\r\n            eq_info[key] = element;\r\n          }\r\n        }\r\n      }\r\n      return eq_info;\r\n    },\r\n    //宠物相关操作\r\n    handlePet(obj, type, point) {\r\n      const arr = [\"升级\", \"加点\", \"放生\", \"幻化\", \"参战/休息\", \"合成\", \"打书\"];\r\n      const points = {\r\n        str: point === 1 ? obj.point : 0, // 力量\r\n        int: point === 2 ? obj.point : 0, // 智力\r\n        agi: 0, // 敏捷\r\n        vit: 0, // 耐力\r\n        con: 0, // 体质\r\n      };\r\n\r\n      this.modal = true;\r\n      this.handleData = {\r\n        type: type,\r\n        data: obj,\r\n        point: type === 2 ? points : null,\r\n        name: arr[type - 1],\r\n      };\r\n    },\r\n    confirmHandle() {\r\n      const data = this.handleData;\r\n\r\n      //升级，放生，加点\r\n      if (data.type < 4) {\r\n        this.game.upUserPetLevel(data.data._id, data.type, data.point);\r\n      }\r\n      //幻化\r\n      if (data.type === 4) {\r\n        this.game.turnIntoPet(data.data._id);\r\n        this.tabPaneName = \"name1\";\r\n      }\r\n      //参战 or 休息\r\n      if (data.type === 5) {\r\n        const status = data.data.status ? 0 : 1;\r\n        this.game.playUserPet(data.data._id, status);\r\n        this.tabPaneName = \"name1\";\r\n      }\r\n      //合宠\r\n      if (data.type === 6) {\r\n        this.game.fitPet(this.pet1, this.pet2);\r\n        this.tabPaneName = `name${this.petsInfo.length - 1}`;\r\n        this.pet1 = \"\";\r\n        this.pet2 = \"\";\r\n\r\n      }\r\n      if (data.type === 7) {\r\n        this.game.addUserPetSkill(this.pet2, this.pet1);\r\n        this.pet1 = \"\";\r\n        this.pet2 = \"\";\r\n\r\n      }\r\n\r\n      if (data.type !== 1) {\r\n        this.modal = false;\r\n      }\r\n    },\r\n    async handleAutoWaBao () {\r\n      if (this.user.team || this.user.fighting || this.user.message) {\r\n        this.game.leaveTeam();\r\n        this.$Message.warning('想办法把战斗停下来，然后重新加载至没有战斗信息为止，否则会触发刷新重连');\r\n        this.$set(this.user, 'fighting', false);\r\n        return;\r\n      }\r\n      this.$Message.warning('开始全部挖藏宝图，别乱点');\r\n      window.freshPackage = false;\r\n      for (let i = 0; i < this.waBao.length; i++) {\r\n        const cbt = this.waBao[i];\r\n        this.$Message.success(`正在挖第${i+1}/${this.waBao.length}个藏宝图`);\r\n        await this.moveToMap(cbt.mapid);\r\n        await sleep(5000);\r\n        this.$Message.success(`正在挥动洛阳铲`);\r\n        this.game.wbt(cbt.btId);\r\n      }\r\n      this.$Modal.info({\r\n        render: () => (\r\n          <div>\r\n            {this.user.wbtResult.map(msg => (\r\n              <div>\r\n                {msg}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )\r\n      });\r\n      window.freshPackage = true;\r\n      this.game.userInfo();\r\n      // 重置背包\r\n      this.user.goods = [];\r\n      this.user.goodsPage = 1;\r\n      this.game.getMyGoods();\r\n      this.readToUse = null;\r\n    },\r\n    async moveToMap (toid) {\r\n      if (this.user.map.id === toid) {\r\n        return\r\n      }\r\n      const path = findMapPath(this.user.map.id, toid);\r\n      for(let i = 0; i < path.length; i++) {\r\n        const map = path[i];\r\n        await sleep(5000);\r\n        this.$Message.success(`正在切图去${map.name}`);\r\n        this.game.moveToNewMap(map.id);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.user {\r\n  width: 100%;\r\n  height: 100%;\r\n  p {\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .br {\r\n    height: 5px;\r\n    width: 100%;\r\n  }\r\n}\r\n.fight-gains {\r\n  ul {\r\n    li {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding: 5px 0;\r\n    }\r\n    .goods {\r\n      flex-direction: column;\r\n      li {\r\n        padding: 2px 0 2px 10px;\r\n        color: #42b983;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.ivu-modal-header {\r\n  padding: 8px 4px !important;\r\n}\r\n.ivu-modal-close {\r\n  top: 0 !important;\r\n}\r\n.ivu-modal-footer {\r\n  padding: 4px !important;\r\n}\r\n.ivu-modal-body {\r\n  padding: 0 !important;\r\n}\r\n\r\n.good-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-right: 32px;\r\n  .ivu-input-with-suffix {\r\n    font-size: 12px;\r\n  }\r\n}\r\n.good-info {\r\n  box-shadow: 0 3px 10px;\r\n  font-size: 12px;\r\n  background: #fff;\r\n  opacity: 0.9;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n  position: fixed;\r\n  z-index: 99;\r\n  bottom: 0;\r\n}\r\n.goods-box {\r\n  padding-bottom: 180px;\r\n  .ivu-badge {\r\n    width: 48%;\r\n    margin: 0 1%;\r\n    .good-name {\r\n      margin: 0 0.3% 5px 0;\r\n      width: 100%;\r\n      font-size: 12px !important;\r\n    }\r\n    .ivu-badge-count {\r\n      font-size: 8px;\r\n      top: 2px;\r\n      right: 10px;\r\n    }\r\n  }\r\n}\r\n\r\n.info-box {\r\n  padding-right: 20px;\r\n  .basci-info,\r\n  .eq-info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n}\r\n.button-box {\r\n  display: flex;\r\n  flex-direction: column;\r\n  .ivu-btn {\r\n    margin-top: 2px !important;\r\n  }\r\n}\r\n.eq-img {\r\n  width: 20px;\r\n  vertical-align: middle;\r\n  margin-right: 10px;\r\n}\r\n\r\n.ivu-tabs-bar {\r\n  margin-bottom: 0 !important;\r\n  .ivu-tabs-tab {\r\n    padding: 8px 5px !important;\r\n  }\r\n}\r\n\r\n.ivu-table-tbody {\r\n  font-size: 12px;\r\n\r\n  .ivu-table-column-center {\r\n    height: 36px;\r\n    .ivu-table-cell {\r\n      padding: 0;\r\n    }\r\n  }\r\n}\r\n.pet-btn {\r\n  padding-top: 5px;\r\n  display: flex !important;\r\n  justify-content: center;\r\n  .ivu-btn {\r\n    padding: 0 6px !important;\r\n  }\r\n}\r\n\r\n.slelect-box {\r\n  padding: 10px;\r\n  p {\r\n    padding: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=260d9d7f&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=260d9d7f&lang=less&scoped=true&\"\nimport style1 from \"./User.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"260d9d7f\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport User from '../views/User.vue'\r\n\r\nVue.use(VueRouter)\r\n\r\n  const routes = [\r\n    {\r\n      path: '/',\r\n      name: 'Home',\r\n      component: Home\r\n    },\r\n    {\r\n      path: '/user/:email',\r\n      name: 'user',\r\n      component: User\r\n    }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n  },\n  mutations: {\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport viewDesign from 'view-design'\r\nimport 'view-design/dist/styles/iview.css'\r\n\r\nVue.use(viewDesign)\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=1&lang=less&\"","define(function (exports, require, module) {\r\n    (function (exports, ByteArray, global) {\r\n        var Protocol = exports;\r\n\r\n        var PKG_HEAD_BYTES = 4;\r\n        var MSG_FLAG_BYTES = 1;\r\n        var MSG_ROUTE_CODE_BYTES = 2;\r\n        var MSG_ID_MAX_BYTES = 5;\r\n        var MSG_ROUTE_LEN_BYTES = 1;\r\n\r\n        var MSG_ROUTE_CODE_MAX = 0xffff;\r\n\r\n        var MSG_COMPRESS_ROUTE_MASK = 0x1;\r\n        var MSG_TYPE_MASK = 0x7;\r\n\r\n        var Package = Protocol.Package = {};\r\n        var Message = Protocol.Message = {};\r\n\r\n        Package.TYPE_HANDSHAKE = 1;\r\n        Package.TYPE_HANDSHAKE_ACK = 2;\r\n        Package.TYPE_HEARTBEAT = 3;\r\n        Package.TYPE_DATA = 4;\r\n        Package.TYPE_KICK = 5;\r\n\r\n        Message.TYPE_REQUEST = 0;\r\n        Message.TYPE_NOTIFY = 1;\r\n        Message.TYPE_RESPONSE = 2;\r\n        Message.TYPE_PUSH = 3;\r\n\r\n        /**\r\n     * pomele client encode\r\n     * id message id;\r\n     * route message route\r\n     * msg message body\r\n     * socketio current support string\r\n     */\r\n        Protocol.strencode = function (str) {\r\n            var byteArray = new ByteArray(str.length * 3);\r\n            var offset = 0;\r\n            for (var i = 0; i < str.length; i++) {\r\n                var charCode = str.charCodeAt(i);\r\n                var codes = null;\r\n                if (charCode <= 0x7f) {\r\n                    codes = [charCode];\r\n                } else if (charCode <= 0x7ff) {\r\n                    codes = [0xc0 | (charCode >> 6), 0x80 | (charCode & 0x3f)];\r\n                } else {\r\n                    codes = [0xe0 | (charCode >> 12), 0x80 | ((charCode & 0xfc0) >> 6), 0x80 | (charCode & 0x3f)];\r\n                }\r\n                for (var j = 0; j < codes.length; j++) {\r\n                    byteArray[offset] = codes[j];\r\n                    ++offset;\r\n                }\r\n            }\r\n            var _buffer = new ByteArray(offset);\r\n            copyArray(_buffer, 0, byteArray, 0, offset);\r\n            return _buffer;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * client decode\r\n     * msg String data\r\n     * return Message Object\r\n     */\r\n        Protocol.strdecode = function (buffer) {\r\n            var bytes = new ByteArray(buffer);\r\n            var array = [];\r\n            var offset = 0;\r\n            var charCode = 0;\r\n            var end = bytes.length;\r\n            while (offset < end) {\r\n                if (bytes[offset] < 128) {\r\n                    charCode = bytes[offset];\r\n                    offset += 1;\r\n                } else if (bytes[offset] < 224) {\r\n                    charCode = ((bytes[offset] & 0x3f) << 6) + (bytes[offset + 1] & 0x3f);\r\n                    offset += 2;\r\n                } else {\r\n                    charCode = ((bytes[offset] & 0x0f) << 12) + ((bytes[offset + 1] & 0x3f) << 6) + (bytes[offset + 2] & 0x3f);\r\n                    offset += 3;\r\n                }\r\n                array.push(charCode);\r\n            }\r\n            var res = '';\r\n            var chunk = 8 * 1024;\r\n            var i;\r\n            for (i = 0; i < array.length / chunk; i++) {\r\n            res += String.fromCharCode.apply(null, array.slice(i * chunk, (i + 1) * chunk));\r\n            }\r\n            res += String.fromCharCode.apply(null, array.slice(i * chunk));\r\n            return res;\r\n\r\n            // return String.fromCharCode.apply(null, array);\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Package protocol encode.\r\n     *\r\n     * Pomelo package format:\r\n     * +------+-------------+------------------+\r\n     * | type | body length |       body       |\r\n     * +------+-------------+------------------+\r\n     *\r\n     * Head: 4bytes\r\n     *   0: package type,\r\n     *      1 - handshake,\r\n     *      2 - handshake ack,\r\n     *      3 - heartbeat,\r\n     *      4 - data\r\n     *      5 - kick\r\n     *   1 - 3: big-endian body length\r\n     * Body: body length bytes\r\n     *\r\n     * @param  {Number}    type   package type\r\n     * @param  {ByteArray} body   body content in bytes\r\n     * @return {ByteArray}        new byte array that contains encode result\r\n     */\r\n        Package.encode = function (type, body) {\r\n            var length = body ? body.length : 0;\r\n            var buffer = new ByteArray(PKG_HEAD_BYTES + length);\r\n            var index = 0;\r\n            buffer[index++] = type & 0xff;\r\n            buffer[index++] = (length >> 16) & 0xff;\r\n            buffer[index++] = (length >> 8) & 0xff;\r\n            buffer[index++] = length & 0xff;\r\n            if (body) {\r\n                copyArray(buffer, index, body, 0, length);\r\n            }\r\n            return buffer;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Package protocol decode.\r\n     * See encode for package format.\r\n     *\r\n     * @param  {ByteArray} buffer byte array containing package content\r\n     * @return {Object}           {type: package type, buffer: body byte array}\r\n     */\r\n        Package.decode = function (buffer) {\r\n            var offset = 0;\r\n            var bytes = new ByteArray(buffer);\r\n            var length = 0;\r\n            var rs = [];\r\n            while (offset < bytes.length) {\r\n                var type = bytes[offset++];\r\n                length = ((bytes[offset++]) << 16 | (bytes[offset++]) << 8 | bytes[offset++]) >>> 0;\r\n                var body = length ? new ByteArray(length) : null;\r\n                copyArray(body, 0, bytes, offset, length);\r\n                offset += length;\r\n                rs.push({\r\n                    'type': type,\r\n                    'body': body\r\n                });\r\n            }\r\n            return rs.length === 1 ? rs[0] : rs;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Message protocol encode.\r\n     *\r\n     * @param  {Number} id            message id\r\n     * @param  {Number} type          message type\r\n     * @param  {Number} compressRoute whether compress route\r\n     * @param  {Number|String} route  route code or route string\r\n     * @param  {Buffer} msg           message body bytes\r\n     * @return {Buffer}               encode result\r\n     */\r\n        Message.encode = function (id, type, compressRoute, route, msg) {\r\n            // caculate message max length\r\n            var idBytes = msgHasId(type) ? caculateMsgIdBytes(id) : 0;\r\n            var msgLen = MSG_FLAG_BYTES + idBytes;\r\n\r\n            if (msgHasRoute(type)) {\r\n                if (compressRoute) {\r\n                    if (typeof route !== 'number') {\r\n                        throw new Error('error flag for number route!');\r\n                    }\r\n                    msgLen += MSG_ROUTE_CODE_BYTES;\r\n                } else {\r\n                    msgLen += MSG_ROUTE_LEN_BYTES;\r\n                    if (route) {\r\n                        route = Protocol.strencode(route);\r\n                        if (route.length > 255) {\r\n                            throw new Error('route maxlength is overflow');\r\n                        }\r\n                        msgLen += route.length;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (msg) {\r\n                msgLen += msg.length;\r\n            }\r\n\r\n            var buffer = new ByteArray(msgLen);\r\n            var offset = 0;\r\n\r\n            // add flag\r\n            offset = encodeMsgFlag(type, compressRoute, buffer, offset);\r\n\r\n            // add message id\r\n            if (msgHasId(type)) {\r\n                offset = encodeMsgId(id, buffer, offset);\r\n            }\r\n\r\n            // add route\r\n            if (msgHasRoute(type)) {\r\n                offset = encodeMsgRoute(compressRoute, route, buffer, offset);\r\n            }\r\n\r\n            // add body\r\n            if (msg) {\r\n                offset = encodeMsgBody(msg, buffer, offset);\r\n            }\r\n\r\n            return buffer;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Message protocol decode.\r\n     *\r\n     * @param  {Buffer|Uint8Array} buffer message bytes\r\n     * @return {Object}            message object\r\n     */\r\n        Message.decode = function (buffer) {\r\n            var bytes = new ByteArray(buffer);\r\n            var bytesLen = bytes.length || bytes.byteLength;\r\n            var offset = 0;\r\n            var id = 0;\r\n            var route = null;\r\n\r\n            // parse flag\r\n            var flag = bytes[offset++];\r\n            var compressRoute = flag & MSG_COMPRESS_ROUTE_MASK;\r\n            var type = (flag >> 1) & MSG_TYPE_MASK;\r\n\r\n            // parse id\r\n            if (msgHasId(type)) {\r\n                var m = parseInt(bytes[offset]);\r\n                var i = 0;\r\n                do {\r\n                    var m = parseInt(bytes[offset]);\r\n                    id = id + ((m & 0x7f) * Math.pow(2, (7 * i)));\r\n                    offset++;\r\n                    i++;\r\n                } while (m >= 128);\r\n            }\r\n\r\n            // parse route\r\n            if (msgHasRoute(type)) {\r\n                if (compressRoute) {\r\n                    route = (bytes[offset++]) << 8 | bytes[offset++];\r\n                } else {\r\n                    var routeLen = bytes[offset++];\r\n                    if (routeLen) {\r\n                        route = new ByteArray(routeLen);\r\n                        copyArray(route, 0, bytes, offset, routeLen);\r\n                        route = Protocol.strdecode(route);\r\n                    } else {\r\n                        route = '';\r\n                    }\r\n                    offset += routeLen;\r\n                }\r\n            }\r\n\r\n            // parse body\r\n            var bodyLen = bytesLen - offset;\r\n            var body = new ByteArray(bodyLen);\r\n\r\n            copyArray(body, 0, bytes, offset, bodyLen);\r\n\r\n            return {\r\n                'id': id,\r\n                'type': type,\r\n                'compressRoute': compressRoute,\r\n                'route': route,\r\n                'body': body\r\n            };\r\n        }\r\n            ;\r\n\r\n        var copyArray = function (dest, doffset, src, soffset, length) {\r\n            if ('function' === typeof src.copy) {\r\n                // Buffer\r\n                src.copy(dest, doffset, soffset, soffset + length);\r\n            } else {\r\n                // Uint8Array\r\n                for (var index = 0; index < length; index++) {\r\n                    dest[doffset++] = src[soffset++];\r\n                }\r\n            }\r\n        };\r\n\r\n        var msgHasId = function (type) {\r\n            return type === Message.TYPE_REQUEST || type === Message.TYPE_RESPONSE;\r\n        };\r\n\r\n        var msgHasRoute = function (type) {\r\n            return type === Message.TYPE_REQUEST || type === Message.TYPE_NOTIFY || type === Message.TYPE_PUSH;\r\n        };\r\n\r\n        var caculateMsgIdBytes = function (id) {\r\n            var len = 0;\r\n            do {\r\n                len += 1;\r\n                id >>= 7;\r\n            } while (id > 0); return len;\r\n        };\r\n\r\n        var encodeMsgFlag = function (type, compressRoute, buffer, offset) {\r\n            if (type !== Message.TYPE_REQUEST && type !== Message.TYPE_NOTIFY && type !== Message.TYPE_RESPONSE && type !== Message.TYPE_PUSH) {\r\n                throw new Error('unkonw message type: ' + type);\r\n            }\r\n\r\n            buffer[offset] = (type << 1) | (compressRoute ? 1 : 0);\r\n\r\n            return offset + MSG_FLAG_BYTES;\r\n        };\r\n\r\n        var encodeMsgId = function (id, buffer, offset) {\r\n            do {\r\n                var tmp = id % 128;\r\n                var next = Math.floor(id / 128);\r\n\r\n                if (next !== 0) {\r\n                    tmp = tmp + 128;\r\n                }\r\n                buffer[offset++] = tmp;\r\n\r\n                id = next;\r\n            } while (id !== 0);\r\n            return offset;\r\n        };\r\n\r\n        var encodeMsgRoute = function (compressRoute, route, buffer, offset) {\r\n            if (compressRoute) {\r\n                if (route > MSG_ROUTE_CODE_MAX) {\r\n                    throw new Error('route number is overflow');\r\n                }\r\n\r\n                buffer[offset++] = (route >> 8) & 0xff;\r\n                buffer[offset++] = route & 0xff;\r\n            } else {\r\n                if (route) {\r\n                    buffer[offset++] = route.length & 0xff;\r\n                    copyArray(buffer, offset, route, 0, route.length);\r\n                    offset += route.length;\r\n                } else {\r\n                    buffer[offset++] = 0;\r\n                }\r\n            }\r\n\r\n            return offset;\r\n        };\r\n\r\n        var encodeMsgBody = function (msg, buffer, offset) {\r\n            copyArray(buffer, offset, msg, 0, msg.length);\r\n            return offset + msg.length;\r\n        };\r\n\r\n        module.exports = Protocol;\r\n        if (typeof (window) != \"undefined\") {\r\n            window.Protocol = Protocol;\r\n        }\r\n    }\r\n    )(typeof (window) == \"undefined\" ? module.exports : (this.Protocol = {}), typeof (window) == \"undefined\" ? Buffer : Uint8Array, this);\r\n\r\n});\r\n"],"sourceRoot":""}