{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/User.vue?4270","webpack:///./src/App.vue?1890","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/views/Home.vue?29fe","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2b8c","webpack:///./src/views/Home.vue","webpack:///./src/views/User.vue?780f","webpack:///./src/libs/YunDingOnlineSDK.js","webpack:///src/views/User.vue","webpack:///./src/libs/regHooks.js","webpack:///./src/config.js","webpack:///./src/libs/tools.js","webpack:///./src/views/User.vue?3db7","webpack:///./src/views/User.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/views/Home.vue?84a2","webpack:///./src/App.vue?74c1","webpack:///./src/libs/protocol.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","mounted","$Message","config","background","duration","component","staticClass","ref","formInline","user","required","message","password","type","min","model","callback","$$v","$set","expression","on","handleLogin","_v","_l","index","email","slot","$event","handleReload","deleteUser","refInFor","baseUrl","userList","keys","users","forEach","methods","saveStorageUser","getStorageUser","onAddUser","passwd","$refs","contentWindow","location","reload","_s","status","status_msg","myInfo","level","exp","nextExp","game","upPlayerLevel","_e","Math","floor","potential_num","handleAllocationPoint","game_silver","handleFationSkill","game_gold","error","hp_store","mp_store","unusecbt","staticStyle","normal","num","useGoods","id","payUserTask","hightcbtTask","utid","getCopyTask","hightcbtTaskId","high","waBao","map","wb","join","currentWaBao","wbt","btId","item","moveToNewMap","team","leader","combatName","_id","combat","switchCombatScreen","leaveTeam","flag","fighting","startCombat","createdTeam","getTeamList","addTeam","nickname","player_num","skillname","skills","time","round_num","domProps","msg","DEBUG","JS_WS_CLIENT_TYPE","JS_WS_CLIENT_VERSION","RES_OK","RES_OLD_CLIENT","gapThreshold","default_config","gameHost","gameProtocol","loginPort","gamePort","loginServer","gameServer","socketPathTpl","Package","Protocol","Message","Tool","replaceParams","str","replaceMaps","replace","full_match","CoreHooks","onLoginGame","code","user_info","assign","console","onSaveData","datas","save_keys","mid","hookMark","GameApi","initConfig","isDEBUG","socket","isStop","token","getSocketServer","messageHandlers","TYPE_HANDSHAKE","onHandshake","TYPE_HEARTBEAT","onHeartbeat","TYPE_DATA","onData","TYPE_KICK","onKick","reqId","heartbeatInterval","heartbeatId","heartbeatTimeoutId","heartbeatTimeout","xyUpdateIntervalId","dict","abbrs","protoVersion","serverProtos","clientProtos","initCallback","callbacks","callRoutes","hookHandlers","regHookHandlers","log","port","host","protocol","regHookHandler","route","cb","position","cbMark","cb_item","start","createWebSocket","url","WebSocket","binaryType","bindEvents","open","onOpen","onMessage","onError","close","onClose","enevtName","addEventListener","event","handShake","messages","decode","Array","isArray","body","nextHeartbeatTimeout","Date","now","login","sendMessage","arguments","bytes","strencode","JSON","stringify","pkg_type","routeId","compressRoute","TYPE_REQUEST","TYPE_NOTIFY","encode","packet","readyState","CLOSED","send","parse","strdecode","Error","TYPE_HANDSHAKE_ACK","sys","heartbeat","protos","version","server","client","clearTimeout","setTimeout","heartbeatTimeoutCb","gap","is_call","is_bubble","indexOf","Stop","clearInterval","handshakeBuffer","rsa","_email","pwd","is_r","login_email","login_pwd","onLogin","loginToken","setInterval","xyUpdate","getMylogs","getMyFb","fbProcess","move","x","nextMap","getAllCombatScreen","cbatid","tid","roundOperating","skill","attack_id","mtid","parm","getMyGoods","page","playerSellGoods","ugid","price","count","selectMyTitle","getMyTitle","getMyPet","getMySkill","repairUserArms","getUserTask","gid","userInfo","wearUserEquipment","ueid","turnIntoPet","pid","getSystemSellGoods","pageIndex","shelfMyGoods","getPlayerSellGoods","select","byPalyerGoods","usgid","byGoodsToSystem","getSystemTask","makeGoods","selectGoodsArr","arr","userSellGoods","playUserPet","upUserPetLevel","point","parms","int","agi","vit","con","send_channel","send_msg","allocationPoint","getUserEqs","updateUserPrice","showMyTeam","is_show","getRankList","initFation","createFation","applyForFation","fid","doneFationApply","fation_apply_id","faid","upUserFationLevel","uid","getFationList","getFationApply","showFationUserList","leaveFation","upFationUserSkill","donateFationFunds","getFationTask","upFation","polyLin","closeUserTask","allSellGoods","resetAttribute","a_id","b_id","ids","fitPet","addUserPetSkill","upid","getMyPetSkillGoods","_app","app","emptyCb","loginCb","userEqs","userTasks","moveToNewMapCb","createdTeamCb","success","leaveTeamCb","$delete","info","addTeamCb","screens","screen","onMyTeamReloadCb","new_uid","getTeamListCb","teams","filter","ts","switchCombatScreenCb","onStartBatCb","skilltype","skillid","onRoundBatEndCb","setMessage","roundOperatingCb","getMyGoodsCb","goods","good","highcbt","expand","goodsPage","byGoodsToSystemCb","useGoodsCb","upPlayerLevelCb","userInfoCb","nextLevelGetExp","getMySkillCb","allocationPointCb","getCopyTaskCb","getUserTaskCb","payUserTaskCb","wbtCb","sleep","method","Number","Promise","resolve","selfRecursion","watch","deep","handler","saveStorageUserInfo","computed","toMap","toMaps","btMaps","find","unuse","regHooks","initUser","messageTime","localStorage","setItem","getStorageUserInfo","getDateTime","die_arr","win","player_reward","mark","reward","pointNum","full","toString","padStart","Vue","use","VueRouter","routes","path","Home","User","router","Vuex","Store","state","mutations","actions","viewDesign","productionTip","store","render","h","App","$mount","define","require","ByteArray","global","PKG_HEAD_BYTES","MSG_FLAG_BYTES","MSG_ROUTE_CODE_BYTES","MSG_ROUTE_LEN_BYTES","MSG_ROUTE_CODE_MAX","MSG_COMPRESS_ROUTE_MASK","MSG_TYPE_MASK","TYPE_RESPONSE","TYPE_PUSH","byteArray","offset","charCode","charCodeAt","codes","_buffer","copyArray","buffer","array","end","String","fromCharCode","rs","idBytes","msgHasId","caculateMsgIdBytes","msgLen","msgHasRoute","encodeMsgFlag","encodeMsgId","encodeMsgRoute","encodeMsgBody","bytesLen","byteLength","parseInt","pow","routeLen","bodyLen","dest","doffset","src","soffset","copy","len","tmp","next","Buffer","Uint8Array"],"mappings":"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","file":"static/js/app.86d556b9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=fc95ea32&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=fc95ea32&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n<script>\nexport default {\n  mounted () {\n    this.$Message.config({\n      background: true,\n      duration: 3\n    })\n  }\n}\n</script>\n<style lang=\"less\">\nhtml, body, #app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n}\n.ivu-card-body {\n  width: 100%;\n  height: calc(100% - 51px);\n  padding: 8px!important;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=449e6588&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('Form',{ref:\"formInline\",attrs:{\"model\":_vm.formInline,\"rules\":{\n      user: [ { required: true, message: '' } ],\n      password: [\n        { required: true, message: '' },\n        { type: 'string', min: 6, message: '6' }\n      ]\n    },\"inline\":\"\"}},[_c('FormItem',{attrs:{\"prop\":\"user\"}},[_c('Input',{attrs:{\"type\":\"text\",\"placeholder\":\"\"},model:{value:(_vm.formInline.user),callback:function ($$v) {_vm.$set(_vm.formInline, \"user\", $$v)},expression:\"formInline.user\"}})],1),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{attrs:{\"type\":\"password\",\"placeholder\":\"\"},model:{value:(_vm.formInline.password),callback:function ($$v) {_vm.$set(_vm.formInline, \"password\", $$v)},expression:\"formInline.password\"}})],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleLogin}},[_vm._v(\"\")])],1)],1),_c('div',{staticClass:\"card-container\"},_vm._l((_vm.userList),function(user,index){return _c('Card',{key:user.email,staticClass:\"card\",attrs:{\"title\":user.email}},[_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('a',{on:{\"click\":function($event){return _vm.handleReload(index)}}},[_vm._v(\"\")]),_vm._v(\" \"),_c('a',{on:{\"click\":function($event){return _vm.deleteUser(user.email)}}},[_vm._v(\"\")])]),_c('iframe',{ref:\"userFrame\",refInFor:true,attrs:{\"src\":(_vm.baseUrl + \"#/user/\" + (user.email) + \"/\" + (user.password))}})])}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home\">\n    <Form\n      ref=\"formInline\"\n      :model=\"formInline\"\n      :rules=\"{\n        user: [ { required: true, message: '' } ],\n        password: [\n          { required: true, message: '' },\n          { type: 'string', min: 6, message: '6' }\n        ]\n      }\"\n      inline\n    >\n      <FormItem prop=\"user\">\n        <Input type=\"text\" v-model=\"formInline.user\" placeholder=\"\" />\n      </FormItem>\n      <FormItem prop=\"password\">\n        <Input type=\"password\" v-model=\"formInline.password\" placeholder=\"\"/>\n      </FormItem>\n      <FormItem>\n        <Button type=\"primary\" @click=\"handleLogin\"></Button>\n      </FormItem>\n    </Form>\n    <div class=\"card-container\">\n      <Card :title=\"user.email\" class=\"card\" v-for=\"(user, index) in userList\" :key=\"user.email\">\n        <div slot=\"extra\">\n          <a @click=\"handleReload(index)\"></a>\n          &nbsp;\n          <a @click=\"deleteUser(user.email)\"></a>\n        </div>\n        <iframe ref=\"userFrame\" :src=\"`${baseUrl}#/user/${user.email}/${user.password}`\" />\n      </Card>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Home',\n  data () {\n    return {\n      baseUrl: `${location.origin}${location.pathname}`,\n      formInline: {\n        user: '',\n        password: ''\n      },\n      userList: []\n    }\n  },\n  mounted () {\n    // \n    const users = this.getStorageUser();\n    const userList = []\n    Object.keys(users).forEach((email) => {\n      userList.push({ email, password: users[email] });\n    });\n    this.userList = userList\n  },\n  methods: {\n    async handleLogin () {\n      const rs = await this.$refs['formInline'].validate()\n      if (rs) {\n        this.onAddUser(this.formInline.user, this.formInline.password)\n      }\n    },\n    /**\n     *  localStorage \n     * @param {*} email\n     * @param {*} password\n     */\n    saveStorageUser: function (email, password) {\n        let users = this.getStorageUser();\n        if ('undefined' == typeof password) {\n            delete users[email];\n            localStorage.removeItem(email)\n        } else {\n            users[email] = password;\n        }\n        localStorage.setItem('ydxxGame_userList', JSON.stringify(users));\n    },\n    /**\n     *  localStorage \n     * @param {*} email \n     */\n    getStorageUser: function (email) {\n        let users = JSON.parse(localStorage.getItem('ydxxGame_userList') || '{}') || {};\n        return email ? (users[email] || null) : users;\n    },\n    /**\n      *  \n      * @param {*} event\n      */\n    onAddUser: function (email, passwd) {\n      // \n      this.saveStorageUser(email, passwd);\n      // \n      this.userList.push({ email, password: passwd })\n    },\n    handleReload (index) {\n      this.$refs['userFrame'][index].contentWindow.location.reload()\n    },\n    /**\n      * \n      * @param {*} row\n      */\n    deleteUser: function (email) {\n      const index = this.userList.find(ul => ul.email === email)\n      // \n      this.userList.splice(index, 1);\n\n      // \n      this.saveStorageUser(email);\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.home {\n  padding: 16px;\n  .card-container {\n    .card {\n      display: inline-block;\n      width: calc(20% - 8px);\n      height: 450px;\n      margin: 0 8px 8px 0;\n      vertical-align: top;;\n    }\n  }\n  iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=18fc0c10&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=18fc0c10&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18fc0c10\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('div',{staticClass:\"user\"},[_c('p',[_vm._v(\"\"+_vm._s(_vm.user.status)+\" \"+_vm._s(_vm.user.status_msg && (\"\" + (_vm.user.status_msg))))]),(_vm.user.myInfo)?[_c('div',{staticClass:\"br\"}),_c('p',[_vm._v(\" LV.\"+_vm._s(_vm.user.myInfo.level)+\" \"),(_vm.user.myInfo.exp > _vm.user.myInfo.nextExp)?_c('a',{on:{\"click\":function($event){return _vm.game.upPlayerLevel()}}},[_vm._v(\"\")]):_vm._e(),_vm._v(\" EXP\"+_vm._s(Math.floor(_vm.user.myInfo.exp))+\"/\"+_vm._s(Math.floor(_vm.user.myInfo.nextExp))+\" \"),(_vm.user.myInfo.potential_num > 0)?_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\"  \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('a',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleAllocationPoint(1)}}},[_vm._v(\"  \")]),_c('a',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleAllocationPoint(2)}}},[_vm._v(\"  \")])])],1):_vm._e(),_vm._v(\" \"),(_vm.user.myInfo.game_silver > 1000000)?_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\"  \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('a',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleFationSkill(1)}}},[_vm._v(\"  \")]),_c('a',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleFationSkill(2)}}},[_vm._v(\"  \")])])],1):_vm._e()],1),_c('div',{staticClass:\"br\"}),_c('p',[_vm._v(\" \"+_vm._s(Math.floor(_vm.user.myInfo.game_gold))+\" \"+_vm._s(Math.floor(_vm.user.myInfo.game_silver))+\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function($event){return _vm.$Message.error('')}}},[_vm._v(\"  \")])],1),_c('div',{staticClass:\"br\"}),_c('p',[_vm._v(\" \"+_vm._s(Math.floor(_vm.user.myInfo.hp_store))+\" \"+_vm._s(Math.floor(_vm.user.myInfo.mp_store))+\" \")])]:_vm._e(),[_c('div',{staticClass:\"br\"}),(_vm.unusecbt)?[(_vm.unusecbt.normal)?[_vm._v(\"  \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.unusecbt.normal.num))]),_vm._v(\"  \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\")]),_vm._v(\" [\"),_c('a',{on:{\"click\":function () {\n          _vm.game.useGoods(_vm.unusecbt.normal.id)\n        }}},[_vm._v(\"\")]),_vm._v(\"] \"),(_vm.unusecbt.normal.num >= 12)?[_c('div',{staticClass:\"br\"}),(_vm.hightcbtTask)?_c('a',{on:{\"click\":function($event){return _vm.game.payUserTask(_vm.hightcbtTask.utid)}}},[_vm._v(\"  \")]):_c('a',{on:{\"click\":function($event){return _vm.game.getCopyTask(_vm.hightcbtTaskId)}}},[_vm._v(\"  \")]),_vm._v(\"  \")]:_vm._e()]:_vm._e(),(_vm.unusecbt.high)?[_vm._v(\"  \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.unusecbt.high.num))]),_vm._v(\"  \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\")]),_vm._v(\" [\"),_c('a',{on:{\"click\":function () {\n          _vm.game.useGoods(_vm.unusecbt.high.id)\n        }}},[_vm._v(\"\")]),_vm._v(\"] \")]:_vm._e()]:_vm._e()],(_vm.waBao.length > 0)?[_c('div',{staticClass:\"br\"}),_vm._v(\"  \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(_vm.waBao.map(function (wb) { return wb.name; }).join('')))]),_vm._v(\"  \"),(_vm.currentWaBao)?[_vm._v(\" \"+_vm._s(_vm.currentWaBao.name)+\" \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":function () {\n        _vm.game.wbt(_vm.currentWaBao.btId)\n      }}},[_vm._v(\"  \")])]:_vm._e()]:_vm._e(),(_vm.user.map)?[_c('div',{staticClass:\"br\"}),_vm._v(\"  \"),(_vm.user.team)?_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\",\"disabled\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.user.map.name)+\" \")]):_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.user.map.name)+\" \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.toMap),function(item){return _c('p',{key:item.id},[_c('a',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\"},on:{\"click\":function () {\n            _vm.game.moveToNewMap(item.id);\n          }}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])])}),0)],1)]:_vm._e(),(_vm.user.team && _vm.user.team.leader === _vm.user.email)?[_c('div',{staticClass:\"br\"}),_vm._v(\"  \"),_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.user.combatName || '')+\" \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.user.screens),function(item){return _c('p',{key:item._id},[_c('a',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\"},on:{\"click\":function () {\n            _vm.user.team.combat = item._id;\n            _vm.game.switchCombatScreen(item._id);\n          }}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])])}),0)],1)]:_vm._e(),_c('div',{staticClass:\"br\"}),_vm._v(\"  \"),(_vm.user.team && _vm.user.team.leader === _vm.user.email)?[_vm._v(\" [\"+_vm._s(_vm.user.team.users.length || 1)+\"/5] \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"error\"},on:{\"click\":function($event){return _vm.game.leaveTeam()}}},[_vm._v(\"  \")]),_vm._v(\" \"),_c('i-switch',{attrs:{\"disabled\":!_vm.user.combatName,\"true-color\":\"#13ce66\",\"false-color\":\"#ff4949\",\"size\":\"large\"},on:{\"on-change\":function (flag) {\n        _vm.user.fighting && _vm.game.startCombat(_vm.user.team.combat)\n      }},model:{value:(_vm.user.fighting),callback:function ($$v) {_vm.$set(_vm.user, \"fighting\", $$v)},expression:\"user.fighting\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"\")]),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"\")])])]:(_vm.user.team)?[_vm._v(\" [\"+_vm._s(_vm.user.team.leader)+\"] \"),_c('Button',{attrs:{\"size\":\"small\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.game.leaveTeam()}}},[_vm._v(\"  \")])]:[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.game.createdTeam(_vm.user.map.id)}}},[_vm._v(\"  \")]),_vm._v(\" \"),_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.game.getTeamList(_vm.user.map.id)}}},[_vm._v(\"  \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},_vm._l((_vm.user.teams),function(item){return _c('p',{key:item._id},[_c('a',{staticStyle:{\"width\":\"100%\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.game.addTeam(item._id)}}},[_vm._v(\" \"+_vm._s(item.leader.nickname)+\" (\"+_vm._s(item.leader.level)+\") [\"+_vm._s(item.users.length)+\"/\"+_vm._s((item.combat || {}).player_num)+\"] \")])])}),0)],1)],_c('div',{staticClass:\"br\"}),_vm._v(\"  \"),(_vm.user.skills)?_c('Poptip',{attrs:{\"transfer\":\"\",\"placement\":\"bottom\"}},[_c('Button',{attrs:{\"size\":\"small\",\"type\":\"default\"}},[_vm._v(\" \"+_vm._s(_vm.user.skillname || '')+\" \")]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[(_vm.user.skills.length === 0)?[_vm._v(\"  \")]:_vm._l((_vm.user.skills),function(item){return _c('p',{key:item._id},[_c('a',{staticStyle:{\"width\":\"100%\"},on:{\"click\":function () {\n            _vm.$set(_vm.user, 'skillid', item._id);\n            _vm.$set(_vm.user, 'skillname', item.name);\n          }}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])])})],2)],1):_vm._e(),_c('div',{staticClass:\"br\"}),('object' == typeof _vm.user.message)?_c('div',[_vm._v(\" [\"+_vm._s(_vm.user.message.time)+\"] \"+_vm._s('' + _vm.user.message.round_num + '')+\" \"),_c('div',{staticStyle:{\"display\":\"inline-block\"},domProps:{\"innerHTML\":_vm._s(_vm.user.message.msg.join(','))}})]):_vm._e()],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Protocol from './protocol'\r\n// \r\nlet DEBUG = false;\r\n\r\n/**\r\n * \r\n */\r\nconst JS_WS_CLIENT_TYPE = 'js-websocket';\r\nconst JS_WS_CLIENT_VERSION = '0.0.1';\r\n\r\n/**\r\n * \r\n */\r\nconst RES_OK = 200;         // \r\nconst RES_FAIL = 500;       // \r\nconst RES_OLD_CLIENT = 501; // \r\n\r\nconst gapThreshold = 100;   // heartbeat gap threashold\r\n\r\n/**\r\n * {object} \r\n */\r\nlet default_config = {\r\n    gameHost: 'yundingxx.com',\r\n    gameProtocol: 'ws',\r\n    loginPort: 3014,\r\n    gamePort: 3052,\r\n    loginServer: null,\r\n    gameServer: null,\r\n    socketPathTpl: '{protocol}://{host}:{port}/'\r\n};\r\n\r\nlet Package = Protocol.Package,\r\n    Message = Protocol.Message;\r\n\r\n/**\r\n * \r\n */\r\nlet Tool = {\r\n    /**\r\n     * \r\n     *\r\n     * @param {string} str           \r\n     * @param {object} replaceMaps   \r\n     */\r\n    replaceParams: function (str, replaceMaps) {\r\n        return str.replace(/{([^}]+)}/g, function (full_match, key) {\r\n            return replaceMaps[key] || full_match;\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Hooks \r\n */\r\nlet CoreHooks = {\r\n    /**\r\n     * \r\n     * @param {*} data\r\n     */\r\n    onLoginGame: function (data) {\r\n        if (data.code != RES_OK) {\r\n            DEBUG && console.error('onLoginGame', data.msg);\r\n            return;\r\n        }\r\n\r\n        this.user_info = Object.assign(this.user_info, data.data);\r\n    },\r\n    /**\r\n        * \r\n        * @param {*} data\r\n        */\r\n    onSaveData: function (data) {\r\n        if (data.code != RES_OK) {\r\n            DEBUG && console.error('onLoginGame', data.msg || data);\r\n            return;\r\n        }\r\n\r\n        let datas = data.data || data,\r\n            save_keys = ['map', 'myInfo', 'players', 'userTasks', 'wordLogds', 'team', 'teams', 'screens', 'initData'];\r\n        save_keys.forEach((key) => {\r\n            if (!datas[key]) {\r\n                return;\r\n            }\r\n            this.user_info[key] = datas[key];\r\n\r\n            if (key == 'map') {\r\n                this.user_info.mid = datas.map.id;\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n// Hook Mark\r\nObject.keys(CoreHooks).forEach((name) => {\r\n    CoreHooks[name].hookMark = 'Core.' + name;\r\n});\r\n\r\n/**\r\n* YunDingXX Online API\r\n*\r\n* @param {object} config   \r\n*/\r\nlet GameApi = function (config) {\r\n    // \r\n    if ('object' == typeof config || 'undefined' == typeof config) {\r\n        this.config = Object.assign(default_config, config);\r\n    }\r\n\r\n    // \r\n    this.initConfig();\r\n};\r\n\r\n// \r\nGameApi.isDEBUG = function () {\r\n    DEBUG = true;\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.initConfig = function () {\r\n    // WebSocket \r\n    this.socket = null;\r\n\r\n    // \r\n    this.isStop = false;\r\n\r\n    //  \r\n    this.email = '';\r\n    this.password = ''; // \r\n    this.user_info = {};\r\n\r\n    //  Token ?\r\n    this.token = null;\r\n\r\n    // \r\n    if (!this.config.loginServer) {\r\n        this.config.loginServer = this.getSocketServer(this.config.loginPort);\r\n    }\r\n\r\n    // \r\n    this.messageHandlers = [];\r\n    this.messageHandlers[Package.TYPE_HANDSHAKE] = this.onHandshake;\r\n    this.messageHandlers[Package.TYPE_HEARTBEAT] = this.onHeartbeat;\r\n    this.messageHandlers[Package.TYPE_DATA] = this.onData;\r\n    this.messageHandlers[Package.TYPE_KICK] = this.onKick;\r\n\r\n    // \r\n    this.reqId = 1;\r\n    this.heartbeatInterval = 0;\r\n    this.heartbeatId = null;\r\n    this.heartbeatTimeoutId = null;\r\n    this.heartbeatTimeout = 0;\r\n    this.xyUpdateIntervalId = 0;\r\n\r\n    // \r\n    this.dict = {};\r\n    this.abbrs = {};\r\n\r\n    // ???\r\n    this.protoVersion = 0;\r\n    this.serverProtos = {};\r\n    this.clientProtos = {};\r\n\r\n    // \r\n    this.initCallback = null;   // \r\n    this.callbacks = [];        //  SeqId ()\r\n    this.callRoutes = [];       //   Route\r\n\r\n    // \r\n    this.hookHandlers = GameApi.regHookHandlers;\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.regHookHandlers = {\r\n    \"onAdd\": [],    //* ?\r\n    \"onLeave\": [],    //* \r\n    \"onChatMsg\": [],    //* \r\n    \"onMyTeamReload\": [ // \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"onStartBat\": [ // \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"onRoundBatEnd\": [ // \r\n\r\n    ],\r\n    \"chat.chatHandler.send\": [],    //  \r\n    \"connector.entryHandler.enter\": [],\r\n    \"connector.fationHandler.applyForFation\": [],    //  \r\n    \"connector.fationHandler.closeUserTask\": [],    //  \r\n    \"connector.fationHandler.createFation\": [],    //  \r\n    \"connector.fationHandler.donateFationFunds\": [],    //  \r\n    \"connector.fationHandler.doneFationApply\": [],    //  \r\n    \"connector.fationHandler.getFationApply\": [],    //  \r\n    \"connector.fationHandler.getFationList\": [],    //  \r\n    \"connector.fationHandler.getFationTask\": [],    //  \r\n    \"connector.fationHandler.initFation\": [],    //  \r\n    \"connector.fationHandler.leaveFation\": [],    //  \r\n    \"connector.fationHandler.showFationUserList\": [],    //  \r\n    \"connector.fationHandler.upFation\": [],    //  \r\n    \"connector.fationHandler.upFationUserSkill\": [console.log],    //  \r\n    \"connector.fationHandler.upUserFationLevel\": [],    //  \r\n    \"connector.loginHandler.login\": [      //   Token\r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.playerHandler.byGoodsToSystem\": [],    //  \r\n    \"connector.playerHandler.byPalyerGoods\": [],    //  \r\n    \"connector.playerHandler.getCopyTask\": [],\r\n    \"connector.playerHandler.getPlayerSellGoods\": [],    //  \r\n    \"connector.playerHandler.init\": [],\r\n    \"connector.playerHandler.move\": [],    //  \r\n    \"connector.playerHandler.moveToNewMap\": [      //  \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.playerHandler.nextMap\": [],    //  \r\n    \"connector.playerHandler.payUserTask\": [],    //  \r\n    \"connector.playerHandler.sellGoods\": [],\r\n    \"connector.playerHandler.sendMsg\": [],\r\n    \"connector.playerHandler.wearUserEquipment\": [],    //  \r\n    \"connector.systemHandler.getRankList\": [],    //  \r\n    \"connector.systemHandler.getSystemSellGoods\": [],    //  \r\n    \"connector.systemHandler.getSystemTask\": [],    //  \r\n    \"connector.teamHandler.addTeam\": [],    // \r\n    \"connector.teamHandler.createdTeam\": [ // //  \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.teamHandler.getAllCombatScreen\": [ // \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.teamHandler.getTeamList\": [  // \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"connector.teamHandler.leaveTeam\": [],    //  \r\n    \"connector.teamHandler.roundOperating\": [],    //  \r\n    \"connector.teamHandler.showMyTeam\": [],    //  \r\n    \"connector.teamHandler.startCombat\": [],\r\n    \"connector.teamHandler.switchCombatScreen\": [], // \r\n    \"connector.userHandler.addUserPetSkill\": [],    //  \r\n    \"connector.userHandler.allSellGoods\": [],    //  \r\n    \"connector.userHandler.allocationPoint\": [],    //  /\r\n    \"connector.userHandler.fbProcess\": [],    //  \r\n    \"connector.userHandler.fitPet\": [],    //  \r\n    \"connector.userHandler.getMyFb\": [],    //  \r\n    \"connector.userHandler.getMyGoods\": [],    //  \r\n    \"connector.userHandler.getMyPet\": [],    //  \r\n    \"connector.userHandler.getMyPetSkillGoods\": [],    //  \r\n    \"connector.userHandler.getMySkill\": [],    //  \r\n    \"connector.userHandler.getMyTitle\": [],    //  \r\n    \"connector.userHandler.getMylogs\": [],    //  \r\n    \"connector.userHandler.getUserEqs\": [],    //  \r\n    \"connector.userHandler.getUserTask\": [],\r\n    \"connector.userHandler.makeGoods\": [],    //  \r\n    \"connector.userHandler.playUserPet\": [],    //  \r\n    \"connector.userHandler.polyLin\": [],    //  \r\n    \"connector.userHandler.repairUserArms\": [],    //  \r\n    \"connector.userHandler.resetAttribute\": [],    //  \r\n    \"connector.userHandler.selectMyTitle\": [],    //  \r\n    \"connector.userHandler.sellGoods\": [],\r\n    \"connector.userHandler.shelfMyGoods\": [],    //  \r\n    \"connector.userHandler.turnIntoPet\": [],    //  \r\n    \"connector.userHandler.upPlayerLevel\": [],\r\n    \"connector.userHandler.upUserPetLevel\": [],    //  \r\n    \"connector.userHandler.updateUserPrice\": [],    //  \r\n    \"connector.userHandler.useGoods\": [],    //  \r\n    \"connector.userHandler.userInfo\": [],\r\n    \"connector.userHandler.wbt\": [],    //  \r\n    \"connector.userHandler.xyDuiHuan\": [],\r\n    \"connector.userHandler.xyUpdate\": [ // //  \r\n        CoreHooks.onSaveData\r\n    ],\r\n    \"gate.gateHandler.queryEntry\": [] // *\r\n};\r\n\r\n/**\r\n* \r\n* @param {*} port\r\n*/\r\nGameApi.prototype.getSocketServer = function (port, host, protocol) {\r\n    if ('number' != typeof port) {\r\n        return null;\r\n    }\r\n\r\n    return Tool.replaceParams(this.config.socketPathTpl, {\r\n        protocol: protocol || this.config.gameProtocol,\r\n        host: host || this.config.gameHost,\r\n        port: port\r\n    });\r\n}\r\n\r\n/**\r\n* \r\n* @param {string}   route      \r\n* @param {function} cb         \r\n* @param {string}   position     \r\n*/\r\nGameApi.prototype.regHookHandler = function (route, cb, position) {\r\n    //  route  cn \r\n    if (!this.hookHandlers[route] || 'function' != typeof cb) {\r\n        return false;\r\n    }\r\n\r\n    //  Mark \r\n    let cbMark = cb.hookMark || null;\r\n    if (cbMark && 'object' == typeof this.hookHandlers[route]) {\r\n        for (let i = 0; i < this.hookHandlers[route].length; i++) {\r\n            const cb_item = this.hookHandlers[route][i];\r\n            if (cb_item.hookMark && cbMark == cb_item.hookMark) {\r\n                return cb_item;\r\n            }\r\n        }\r\n    }\r\n\r\n    // \r\n    this.hookHandlers[route].push(cb);\r\n\r\n    return true;\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.start = function () {\r\n    if (this.socket) {\r\n        return;\r\n    }\r\n    //  ws \r\n    this.createWebSocket(this.config.loginServer);\r\n}\r\n\r\n/**\r\n*  WebSocket \r\n*\r\n* @param {string} url  ws://host:prot/path\r\n*/\r\nGameApi.prototype.createWebSocket = function (url) {\r\n    // \r\n    let socket = new WebSocket(url);\r\n\r\n    // \r\n    socket.binaryType = 'arraybuffer';\r\n\r\n    /**\r\n        * \r\n        */\r\n    let bindEvents = {\r\n        open: this.onOpen,\r\n        message: this.onMessage,\r\n        error: this.onError,\r\n        close: this.onClose\r\n    };\r\n\r\n    //   \r\n    Object.keys(bindEvents).map((enevtName) => {\r\n        socket.addEventListener(enevtName, (event) => {\r\n            bindEvents[enevtName].call(this, event);\r\n        });\r\n    });\r\n\r\n    //  reqId \r\n    this.reqId = 1;\r\n    this.socket = socket;\r\n\r\n    return socket;\r\n}\r\n\r\n/**\r\n* WebSocket \r\n*\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onOpen = function (event) {\r\n    // \r\n    this.handShake();\r\n};\r\n\r\n/**\r\n* WebSocket \r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onMessage = function (event) {\r\n    let messages = Package.decode(event.data);\r\n    if (messages.type != 3) {\r\n        // console.log('onMessage', messages);\r\n    }\r\n\r\n    // \r\n    if (Array.isArray(messages)) {\r\n        for (let i = 0; i < messages.length; i++) {\r\n            let msg = messages[i];\r\n            this.messageHandlers.call(this, [msg.type](msg.body));\r\n        }\r\n    } else {\r\n        this.messageHandlers[messages.type].call(this, messages.body);\r\n    }\r\n\r\n    // \r\n    if (this.heartbeatTimeout) {\r\n        this.nextHeartbeatTimeout = Date.now() + this.heartbeatTimeout;\r\n    }\r\n};\r\n\r\n/**\r\n* WebSocket \r\n*\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onError = function (event) {\r\n    console.log('onError', event);\r\n    window.location.reload();\r\n};\r\n\r\n/**\r\n* WebSocket \r\n*\r\n* @param {object} event\r\n*/\r\nGameApi.prototype.onClose = function (event) {\r\n    console.log('onClose', event, this.isStop);\r\n    if (this.isStop) {\r\n        return;\r\n    }\r\n\r\n    // \r\n    this.login();\r\n};\r\n\r\n/**\r\n* ()\r\n*\r\n* @param {object} data\r\n* @param {string} type\r\n*/\r\nGameApi.prototype.sendMessage = function (data, route, cb) {\r\n    // \r\n    if (arguments.length == 2 && 'function' == typeof route) {\r\n        cb = route;\r\n        route = null;\r\n    }\r\n\r\n    // \r\n    let bytes = Protocol.strencode(JSON.stringify(data)),\r\n        pkg_type = Package.TYPE_HANDSHAKE,\r\n        routeId = null;\r\n\r\n    // \r\n    if ('string' == typeof route) {\r\n        //  ( Dict )\r\n        let compressRoute = 0;\r\n        if (this.dict && this.dict[route]) {\r\n            routeId = this.dict[route];\r\n            compressRoute = 1;\r\n        }\r\n\r\n        //  Message\r\n        let reqId = this.reqId++ % 255;\r\n        let type = reqId ? Message.TYPE_REQUEST : Message.TYPE_NOTIFY;\r\n\r\n        // \r\n        if ('function' == typeof cb || 'string' == typeof cb) {\r\n            this.callbacks[reqId] = cb;\r\n        }\r\n\r\n        // \r\n        this.callRoutes[reqId] = route;\r\n\r\n        // \r\n        bytes = Message.encode(reqId, type, compressRoute, compressRoute ? routeId : route, bytes);\r\n        pkg_type = Package.TYPE_DATA;\r\n    }\r\n\r\n    // \r\n    let packet = Package.encode(pkg_type, bytes);\r\n\r\n    if (this.socket.readyState === this.socket.CLOSED) {\r\n        location.reload()\r\n    }\r\n\r\n    //  \r\n    this.socket.send(packet);\r\n}\r\n\r\n/**\r\n* \r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onHandshake = function (data) {\r\n    // \r\n    data = JSON.parse(Protocol.strdecode(data));\r\n    DEBUG && console.log('onHandshake', data);\r\n\r\n    // \r\n    if (data.code === RES_OLD_CLIENT) {\r\n        throw new Error('client version not fullfill');\r\n        return;\r\n    }\r\n\r\n    // \r\n    if (data.code !== RES_OK) {\r\n        throw new Error('handshake fail');\r\n        return;\r\n    }\r\n\r\n    // \r\n    let packet = Package.encode(Package.TYPE_HANDSHAKE_ACK);\r\n    this.socket.send(packet);\r\n\r\n    // \r\n    if (data.sys && data.sys.heartbeat) {\r\n        // \r\n        this.heartbeatInterval = data.sys.heartbeat * 1000;   // heartbeat interval\r\n        this.heartbeatTimeout = this.heartbeatInterval * 2;        // max heartbeat timeout\r\n\r\n        // \r\n        let dict = data.sys.dict;\r\n\r\n        // Init compress dict\r\n        if (dict) {\r\n            this.dict = dict;\r\n            this.abbrs = {};\r\n\r\n            for (let route in dict) {\r\n                this.abbrs[dict[route]] = route;\r\n            }\r\n        }\r\n    }\r\n\r\n    //  protos \r\n    if (data.sys && data.sys.protos) {\r\n        let protos = data.sys.protos;\r\n\r\n        // Init protobuf protos\r\n        if (protos) {\r\n            this.protoVersion = protos.version || 0;\r\n            this.serverProtos = protos.server || {};\r\n            this.clientProtos = protos.client || {};\r\n        }\r\n    }\r\n\r\n    // if (typeof handshakeCallback === 'function') {\r\n    //     handshakeCallback(data.user);\r\n    // }\r\n\r\n    // \r\n    if (this.initCallback) {\r\n        this.initCallback.call(this);\r\n        this.initCallback = null;\r\n    }\r\n};\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.onHeartbeat = function () {\r\n    if (!this.heartbeatInterval) {\r\n        // no heartbeat\r\n        return;\r\n    }\r\n\r\n    let packet = Package.encode(Package.TYPE_HEARTBEAT);\r\n    if (this.heartbeatTimeoutId) {\r\n        clearTimeout(this.heartbeatTimeoutId);\r\n        this.heartbeatTimeoutId = null;\r\n    }\r\n\r\n    if (this.heartbeatId) {\r\n        // already in a heartbeat interval\r\n        return;\r\n    }\r\n    this.heartbeatId = setTimeout(() => {\r\n        this.heartbeatId = null;\r\n        this.socket.send(packet);\r\n\r\n        this.nextHeartbeatTimeout = Date.now() + this.heartbeatTimeout;\r\n        this.heartbeatTimeoutId = setTimeout(this.heartbeatTimeoutCb, this.heartbeatTimeout);\r\n    }, this.heartbeatInterval);\r\n};\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.heartbeatTimeoutCb = function () {\r\n    let gap = this.nextHeartbeatTimeout - Date.now();\r\n    if (gap > gapThreshold) {\r\n        this.heartbeatTimeoutId = setTimeout(this.heartbeatTimeoutCb, gap);\r\n    } else {\r\n        DEBUG && console.error('server heartbeat timeout');\r\n    }\r\n};\r\n\r\n/**\r\n* \r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onData = function (data) {\r\n    let msg = Message.decode(data);\r\n\r\n    //  Route\r\n    if (!msg.route && msg.id && this.callRoutes[msg.id]) {\r\n        msg.route = this.callRoutes[msg.id];\r\n    }\r\n\r\n    //  Body\r\n    msg.body = JSON.parse(Protocol.strdecode(msg.body));\r\n\r\n    // \r\n    let cbMark = [], is_call = false, is_bubble = true;\r\n    if ('function' == typeof this.callbacks[msg.id]) {\r\n        let cb = this.callbacks[msg.id];\r\n        delete this.callbacks[msg.id];\r\n        if ('string' == typeof cb.hookMark) {\r\n            cbMark.push(cb.hookMark);\r\n        }\r\n\r\n        is_call = true;\r\n        is_bubble = !(cb.call(this, msg.body) === false);\r\n    }\r\n\r\n    // \r\n    if (is_bubble && msg.route && 'object' == typeof this.hookHandlers[msg.route]) {\r\n        for (let i = 0; i < this.hookHandlers[msg.route].length; i++) {\r\n            const cb = this.hookHandlers[msg.route][i];\r\n            if ('string' == typeof cb.hookMark) {\r\n                if (cbMark.indexOf(cb.hookMark) >= 0) {\r\n                    continue;\r\n                }\r\n                cbMark.push(cb.hookMark);\r\n            }\r\n\r\n            is_call = true;\r\n            is_bubble = !(cb.call(this, msg.body) === false);\r\n            if (is_bubble) continue;\r\n        }\r\n    }\r\n\r\n    //  \r\n    if (!is_call) {\r\n        DEBUG && console.log('onData', msg.route, msg.body);\r\n    }\r\n};\r\n\r\n/**\r\n* \r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onKick = function (data) {\r\n    DEBUG && console.log('onKick', data);\r\n};\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.Stop = function () {\r\n    // \r\n    this.isStop = true;\r\n\r\n    //  \r\n    if (!this.socket) {\r\n        return;\r\n    }\r\n\r\n    //  WS \r\n    this.socket.close();\r\n\r\n    // \r\n    if (this.heartbeatId) {\r\n        clearInterval(this.heartbeatId)\r\n    }\r\n    if (this.heartbeatTimeoutId) {\r\n        clearTimeout(this.heartbeatTimeoutId);\r\n    }\r\n    if (this.xyUpdateIntervalId) {\r\n        clearInterval(this.xyUpdateIntervalId)\r\n    }\r\n}\r\n\r\n//=======  =======//\r\n\r\n/**\r\n* \r\n*\r\n* WebSocket \r\n*/\r\nGameApi.prototype.handShake = function () {\r\n    let handshakeBuffer = {\r\n        'sys': {\r\n            type: JS_WS_CLIENT_TYPE,\r\n            version: JS_WS_CLIENT_VERSION,\r\n            rsa: {},\r\n            protoVersion: this.protoVersion\r\n        }\r\n    };\r\n\r\n    this.sendMessage(handshakeBuffer);\r\n}\r\n\r\n/**\r\n* \r\n*\r\n* @param {*} email\r\n* @param {*} pwd\r\n* @param {*} code\r\n*/\r\nGameApi.prototype.login = function (_email, pwd, code, is_r) {\r\n    let email = _email || this.email,\r\n        password = pwd || this.password,\r\n        route = 'gate.gateHandler.queryEntry',\r\n        data = {\r\n            login_email: email,\r\n            login_pwd: password,\r\n            code: '',\r\n            is_r: true\r\n        };\r\n\r\n    // \r\n    this.initCallback = function () {\r\n        // \r\n        this.email = email;\r\n        this.password = pwd;\r\n        this.user_info.email = email;\r\n\r\n        // \r\n        this.sendMessage(data, route, this.onLogin);\r\n    }\r\n    this.start();\r\n}\r\n\r\n/**\r\n* \r\n*\r\n* @param {*} data\r\n*/\r\nGameApi.prototype.onLogin = function (data) {\r\n    if (data.code != RES_OK) {\r\n        DEBUG && console.error('onLogin', data.msg);\r\n        return true;\r\n    }\r\n    DEBUG && console.log('onLogin', data)\r\n\r\n    // \r\n    this.config.gamePort = data.port;\r\n    this.user_info.mid = data.mid;\r\n    this.token = data.token;\r\n\r\n    //  \r\n    this.isStop = true; //  \r\n    this.socket.close();\r\n    this.gameServer = this.getSocketServer(data.port);\r\n    this.initCallback = this.loginToken;\r\n    this.createWebSocket(this.gameServer);\r\n}\r\n\r\n/**\r\n*  Token \r\n*/\r\nGameApi.prototype.loginToken = function () {\r\n    let route = 'connector.loginHandler.login',\r\n        data = {\r\n            email: this.user_info.email,\r\n            token: this.token\r\n        };\r\n\r\n    // \r\n    this.onClose = false;\r\n\r\n    // \r\n    // DEBUG && console.clear();\r\n\r\n    // \r\n    this.sendMessage(data, route, (data) => {\r\n        if (data.code != RES_OK) {\r\n            DEBUG && console.error('', data);\r\n            this.Stop();\r\n            return;\r\n        }\r\n\r\n        DEBUG && console.log('', this, data);\r\n\r\n        // \r\n        this.xyUpdateIntervalId = setInterval(() => {\r\n            this.xyUpdate()\r\n        }, 60000);\r\n    });\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.xyUpdate = function () {\r\n    this.sendMessage({}, \"connector.userHandler.xyUpdate\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMylogs = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMylogs\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMyFb = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyFb\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.upPlayerLevel = function () {\r\n    this.sendMessage({}, \"connector.userHandler.upPlayerLevel\");\r\n}\r\n\r\n/**\r\n* \r\n* @param type 1  2 3 4\r\n* @param id\r\n*/\r\nGameApi.prototype.fbProcess = function (type, id) {\r\n    this.sendMessage({\r\n        type, id\r\n    }, \"connector.userHandler.fbProcess\");\r\n}\r\n\r\n/**\r\n* \r\n* @param x     \r\n* @param mid   id\r\n*/\r\nGameApi.prototype.move = function (x, mid) {\r\n    this.sendMessage({\r\n        x: x,\r\n        mid: mid\r\n    }, \"connector.playerHandler.move\");\r\n}\r\n\r\n/**\r\n* \r\n* @param type 0 | 1\r\n*/\r\nGameApi.prototype.nextMap = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.playerHandler.nextMap\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.moveToNewMap = function (mid) {\r\n    this.sendMessage({\r\n        mid: mid\r\n    }, \"connector.playerHandler.moveToNewMap\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getAllCombatScreen = function () {\r\n    this.sendMessage({}, \"connector.teamHandler.getAllCombatScreen\");\r\n}\r\n\r\n/**\r\n* \r\n* @param {*} cbatid\r\n*/\r\nGameApi.prototype.switchCombatScreen = function (cbatid) {\r\n    this.sendMessage({\r\n        cbatid: cbatid\r\n    }, \"connector.teamHandler.switchCombatScreen\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getTeamList = function (mid) {\r\n    this.sendMessage({\r\n        mid: mid\r\n    }, \"connector.teamHandler.getTeamList\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.createdTeam = function (mid) {\r\n    this.sendMessage({\r\n        mid: mid\r\n    }, \"connector.teamHandler.createdTeam\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.addTeam = function (tid) {\r\n    this.sendMessage({\r\n        tid: tid\r\n    }, \"connector.teamHandler.addTeam\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.leaveTeam = function () {\r\n    this.sendMessage({}, \"connector.teamHandler.leaveTeam\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.startCombat = function (cbatid) {\r\n    this.sendMessage({ cbatid: cbatid }, 'connector.teamHandler.startCombat');\r\n}\r\n\r\n/**\r\n* \r\n*\r\n* @param type        1001  1\r\n* @param skill      \r\n* @param attack_id \r\n* @param tid       ID?\r\n*/\r\nGameApi.prototype.roundOperating = function (type, skill, attack_id, mtid) {\r\n    this.sendMessage({\r\n        type: type,\r\n        parm: skill,\r\n        attack_id: attack_id,\r\n        tid: mtid\r\n    }, \"connector.teamHandler.roundOperating\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMyGoods = function (page) {\r\n    this.sendMessage({\r\n        page\r\n    }, \"connector.userHandler.getMyGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.playerSellGoods = function (ugid, price, count) {\r\n    this.sendMessage({\r\n        ugid: ugid,\r\n        game_gold: price,\r\n        count\r\n    }, \"connector.playerHandler.sellGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.selectMyTitle = function (index) {\r\n    this.sendMessage({\r\n        index\r\n    }, \"connector.userHandler.selectMyTitle\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMyTitle = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyTitle\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMyPet = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyPet\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.wbt = function (ugid) {\r\n    this.sendMessage({\r\n        ugid\r\n    }, \"connector.userHandler.wbt\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getCopyTask = function (tid) {\r\n    this.sendMessage({\r\n        tid\r\n    }, \"connector.playerHandler.getCopyTask\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMySkill = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMySkill\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.repairUserArms = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.userHandler.repairUserArms\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getUserTask = function () {\r\n    this.sendMessage({\r\n    }, \"connector.userHandler.getUserTask\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.useGoods = function (gid) {\r\n    this.sendMessage({\r\n        gid\r\n    }, \"connector.userHandler.useGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.userInfo = function () {\r\n    this.sendMessage({\r\n    }, \"connector.userHandler.userInfo\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.wearUserEquipment = function (ueid) {\r\n    this.sendMessage({\r\n        ueid\r\n    }, \"connector.playerHandler.wearUserEquipment\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.payUserTask = function (utid) {\r\n    this.sendMessage({\r\n        utid\r\n    }, \"connector.playerHandler.payUserTask\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.turnIntoPet = function (pid) {\r\n    this.sendMessage({\r\n        pid\r\n    }, \"connector.userHandler.turnIntoPet\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getSystemSellGoods = function (pageIndex) {\r\n    this.sendMessage({\r\n        pageIndex\r\n    }, \"connector.systemHandler.getSystemSellGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.shelfMyGoods = function (id) {\r\n    this.sendMessage({\r\n        id: id\r\n    }, \"connector.userHandler.shelfMyGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getPlayerSellGoods = function (pageIndex, type) {\r\n    this.sendMessage({\r\n        pageIndex: pageIndex ? pageIndex : 1,\r\n        select: type\r\n    }, \"connector.playerHandler.getPlayerSellGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.byPalyerGoods = function (id, type) {\r\n    this.sendMessage({\r\n        usgid: id, type\r\n    }, \"connector.playerHandler.byPalyerGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.byGoodsToSystem = function (type, id) {\r\n    this.sendMessage({\r\n        id, type\r\n    }, \"connector.playerHandler.byGoodsToSystem\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getSystemTask = function () {\r\n    this.sendMessage({}, \"connector.systemHandler.getSystemTask\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.makeGoods = function (selectGoodsArr) {\r\n    this.sendMessage({\r\n        arr: selectGoodsArr\r\n    }, \"connector.userHandler.makeGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.userSellGoods = function (selectGoodsArr) {\r\n    this.sendMessage({\r\n        arr: selectGoodsArr\r\n    }, \"connector.userHandler.sellGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.playUserPet = function (id, status) {\r\n    this.sendMessage({\r\n        pid: id,\r\n        status\r\n    }, \"connector.userHandler.playUserPet\");\r\n}\r\n\r\n/**\r\n*   type==1  type==2 type==3\r\n*/\r\nGameApi.prototype.upUserPetLevel = function (pid, type, point) {\r\n    let parms = { pid: pid, type };\r\n    if (type == 2) {\r\n        point = point || {};\r\n        Object.assign(parms, {\r\n            str: point.str || null,\r\n            int: point.int || null,\r\n            agi: point.agi || null,\r\n            vit: point.vit || null,\r\n            con: point.con || null\r\n        });\r\n    }\r\n    this.sendMessage(parms, \"connector.userHandler.upUserPetLevel\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.send = function (send_channel, send_msg) {\r\n    this.sendMessage({\r\n        send_channel,\r\n        send_msg\r\n    }, \"chat.chatHandler.send\");\r\n}\r\n\r\n/**\r\n* /\r\n*/\r\nGameApi.prototype.allocationPoint = function (str, int, agi, vit, con) {\r\n    this.sendMessage({\r\n        str: str, // \r\n        int: int, // \r\n        agi: agi, // \r\n        vit: vit, // \r\n        con: con  // \r\n    }, \"connector.userHandler.allocationPoint\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getUserEqs = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getUserEqs\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.updateUserPrice = function () {\r\n    this.sendMessage({}, \"connector.userHandler.updateUserPrice\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.showMyTeam = function (is_show) {\r\n    this.sendMessage({ is_show }, \"connector.teamHandler.showMyTeam\");\r\n}\r\n\r\n/**\r\n* ?\r\n* @param type 1= 2= 3=\r\n*/\r\nGameApi.prototype.getRankList = function (type) {\r\n    this.sendMessage({ type }, \"connector.systemHandler.getRankList\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.initFation = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.initFation\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.createFation = function (name) {\r\n    this.sendMessage({\r\n        name\r\n    }, \"connector.fationHandler.createFation\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.applyForFation = function (fid) {\r\n    this.sendMessage({\r\n        fid\r\n    }, \"connector.fationHandler.applyForFation\");\r\n}\r\n\r\n\r\n/**\r\n* \r\n* @param type              1= 2=\r\n* @param fation_apply_id\r\n*/\r\nGameApi.prototype.doneFationApply = function (type, fation_apply_id) {\r\n    this.sendMessage({\r\n        type, faid: fation_apply_id\r\n    }, \"connector.fationHandler.doneFationApply\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.upUserFationLevel = function (type, uid) {\r\n    this.sendMessage({\r\n        type, uid\r\n    }, \"connector.fationHandler.upUserFationLevel\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getFationList = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.getFationList\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getFationApply = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.getFationApply\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.showFationUserList = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.showFationUserList\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.leaveFation = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.leaveFation\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.upFationUserSkill = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.fationHandler.upFationUserSkill\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.donateFationFunds = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.donateFationFunds\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getFationTask = function () {\r\n    this.sendMessage({}, \"connector.fationHandler.getFationTask\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.upFation = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.fationHandler.upFation\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.polyLin = function (type) {\r\n    this.sendMessage({\r\n        type\r\n    }, \"connector.userHandler.polyLin\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.closeUserTask = function (tid) {\r\n    this.sendMessage({\r\n        tid: tid\r\n    }, \"connector.fationHandler.closeUserTask\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.allSellGoods = function () {\r\n    this.sendMessage({}, \"connector.userHandler.allSellGoods\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.resetAttribute = function () {\r\n    this.sendMessage({}, \"connector.userHandler.resetAttribute\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.getMyPet = function (a_id, b_id) {\r\n    this.sendMessage({\r\n        ids: a_id + \",\" + b_id\r\n    }, \"connector.userHandler.getMyPet\");\r\n}\r\n\r\n/**\r\n* \r\n*/\r\nGameApi.prototype.fitPet = function (a_id, b_id) {\r\n    this.sendMessage({\r\n        ids: a_id + \",\" + b_id\r\n    }, \"connector.userHandler.fitPet\");\r\n}\r\n\r\n/**\r\n* ?\r\n*/\r\nGameApi.prototype.addUserPetSkill = function (upid) {\r\n    this.sendMessage({\r\n        ugid, upid\r\n    }, \"connector.userHandler.addUserPetSkill\");\r\n}\r\n\r\n/**\r\n* ?\r\n*/\r\nGameApi.prototype.getMyPetSkillGoods = function () {\r\n    this.sendMessage({}, \"connector.userHandler.getMyPetSkillGoods\");\r\n}\r\n\r\nexport default GameApi\r\n","<template>\r\n  <div v-if=\"user\" class=\"user\">\r\n    <p>{{user.status}}&nbsp;{{ user.status_msg && `${user.status_msg}` }}</p>\r\n    <template v-if=\"user.myInfo\">\r\n      <div class=\"br\" />\r\n      <p>\r\n        LV.{{user.myInfo.level}}&nbsp;\r\n        <a v-if=\"user.myInfo.exp > user.myInfo.nextExp\" @click=\"game.upPlayerLevel()\"></a>\r\n        &nbsp;\r\n        EXP{{ Math.floor(user.myInfo.exp) }}/{{ Math.floor(user.myInfo.nextExp) }}\r\n        &nbsp;\r\n        <Poptip v-if=\"user.myInfo.potential_num > 0\" transfer placement=\"bottom\">\r\n          <Button size=\"small\" type=\"info\">\r\n            \r\n          </Button>\r\n          <div slot=\"content\">\r\n            <a @click=\"handleAllocationPoint(1)\" size=\"small\">\r\n              \r\n            </a>\r\n            <a @click=\"handleAllocationPoint(2)\" size=\"small\">\r\n              \r\n            </a>\r\n          </div>\r\n        </Poptip>\r\n        &nbsp;\r\n        <Poptip v-if=\"user.myInfo.game_silver > 1000000\" transfer placement=\"bottom\">\r\n          <Button size=\"small\" type=\"info\">\r\n            \r\n          </Button>\r\n          <div slot=\"content\">\r\n            <a @click=\"handleFationSkill(1)\" size=\"small\">\r\n              \r\n            </a>\r\n            <a @click=\"handleFationSkill(2)\" size=\"small\">\r\n              \r\n            </a>\r\n          </div>\r\n        </Poptip>\r\n      </p>\r\n      <div class=\"br\" />\r\n      <p>\r\n        {{ Math.floor(user.myInfo.game_gold) }}\r\n        &nbsp;\r\n        {{ Math.floor(user.myInfo.game_silver) }}\r\n        &nbsp;\r\n        <Button size=\"small\" type=\"info\" @click=\"$Message.error('')\">\r\n          \r\n        </Button>\r\n      </p>\r\n      <div class=\"br\" />\r\n      <p>\r\n        {{ Math.floor(user.myInfo.hp_store) }}&nbsp;{{ Math.floor(user.myInfo.mp_store) }}\r\n      </p>\r\n    </template>\r\n    <!--   -->\r\n    <template>\r\n      <div class=\"br\" />\r\n      <template v-if=\"unusecbt\">\r\n        <template v-if=\"unusecbt.normal\">\r\n          \r\n          <span style=\"color: red\">{{unusecbt.normal.num}}</span>\r\n          \r\n          <span style=\"color: red\"></span>\r\n          [<a @click=\"() => {\r\n            game.useGoods(unusecbt.normal.id)\r\n          }\"></a>]\r\n          <template v-if=\"unusecbt.normal.num >= 12\">\r\n            <div class=\"br\" />\r\n            <a v-if=\"hightcbtTask\" @click=\"game.payUserTask(hightcbtTask.utid)\">\r\n              \r\n            </a>\r\n            <a v-else @click=\"game.getCopyTask(hightcbtTaskId)\">\r\n              \r\n            </a>\r\n            \r\n          </template>\r\n        </template>\r\n        <template v-if=\"unusecbt.high\">\r\n          \r\n          <span style=\"color: red\">{{unusecbt.high.num}}</span>\r\n          \r\n          <span style=\"color: red\"></span>\r\n          [<a @click=\"() => {\r\n            game.useGoods(unusecbt.high.id)\r\n          }\"></a>]\r\n        </template>\r\n      </template>\r\n    </template>\r\n    <template v-if=\"waBao.length > 0\">\r\n      <div class=\"br\" />\r\n      \r\n      <span style=\"color: green\">{{waBao.map(wb => wb.name).join('')}}</span>\r\n      \r\n      &nbsp;\r\n      <template v-if=\"currentWaBao\">\r\n        {{currentWaBao.name}}\r\n        <Button @click=\"() => {\r\n          game.wbt(currentWaBao.btId)\r\n        }\" size=\"small\" type=\"info\">\r\n          \r\n        </Button>\r\n      </template>\r\n    </template>\r\n    <!--   -->\r\n    <!--   -->\r\n    <template v-if=\"user.map\">\r\n      <div class=\"br\" />\r\n      \r\n      <Button v-if=\"user.team\" size=\"small\" type=\"info\" disabled>\r\n        {{ user.map.name }}\r\n      </Button>\r\n      <Poptip v-else transfer placement=\"bottom\">\r\n        <Button size=\"small\" type=\"info\">\r\n          {{ user.map.name }}\r\n        </Button>\r\n        <div slot=\"content\">\r\n          <p v-for=\"item in toMap\" :key=\"item.id\">\r\n            <a @click=\"() => {\r\n              game.moveToNewMap(item.id);\r\n            }\" size=\"small\" style=\"width: 100%;\">\r\n              {{item.name}}\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </Poptip>\r\n    </template>\r\n    <!--   -->\r\n    <!--   -->\r\n    <template v-if=\"user.team && user.team.leader === user.email\">\r\n      <div class=\"br\" />\r\n      \r\n      <Poptip transfer placement=\"bottom\">\r\n        <Button size=\"small\" type=\"info\">\r\n          {{ user.combatName || '' }}\r\n        </Button>\r\n        <div slot=\"content\">\r\n          <p v-for=\"item in user.screens\" :key=\"item._id\">\r\n            <a @click=\"() => {\r\n              user.team.combat = item._id;\r\n              game.switchCombatScreen(item._id);\r\n            }\" size=\"small\" style=\"width: 100%;\">\r\n              {{item.name}}\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </Poptip>\r\n    </template>\r\n    <!--   -->\r\n    <div class=\"br\" />\r\n    <!--   -->\r\n    \r\n    <template v-if=\"user.team && user.team.leader === user.email\">\r\n      [{{ user.team.users.length || 1 }}/5]\r\n      <Button @click=\"game.leaveTeam()\" size=\"small\" type=\"error\">\r\n        \r\n      </Button>\r\n      &nbsp;\r\n      <i-switch\r\n        v-model=\"user.fighting\"\r\n        :disabled=\"!user.combatName\"\r\n        true-color=\"#13ce66\" false-color=\"#ff4949\"\r\n        @on-change=\"flag => {\r\n          user.fighting && game.startCombat(user.team.combat)\r\n        }\"\r\n        size=\"large\"\r\n      >\r\n        <span slot=\"open\"></span>\r\n        <span slot=\"close\"></span>\r\n      </i-switch>\r\n    </template>\r\n    <template v-else-if=\"user.team\">\r\n      [{{user.team.leader}}]\r\n      <Button size=\"small\" type=\"warning\" @click=\"game.leaveTeam()\">\r\n        \r\n      </Button>\r\n    </template>\r\n    <template v-else>\r\n      <Button @click=\"game.createdTeam(user.map.id)\" size=\"small\" type=\"success\">\r\n        \r\n      </Button>\r\n      &nbsp;\r\n      <Poptip transfer placement=\"bottom\">\r\n        <Button size=\"small\" type=\"success\" @click=\"game.getTeamList(user.map.id)\">\r\n          \r\n        </Button>\r\n        <div slot=\"content\">\r\n          <p v-for=\"item in user.teams\" :key=\"item._id\">\r\n            <a @click=\"game.addTeam(item._id)\" size=\"small\" style=\"width:100%;\">\r\n              {{item.leader.nickname}}&nbsp;({{item.leader.level}})&nbsp;[{{item.users.length}}/{{(item.combat || {}).player_num}}]\r\n            </a>\r\n          </p>\r\n        </div>\r\n      </Poptip>\r\n    </template>\r\n    <!--   -->\r\n    <div class=\"br\" />\r\n    <!--   -->\r\n    \r\n    <Poptip transfer placement=\"bottom\" v-if=\"user.skills\">\r\n      <Button size=\"small\" type=\"default\">\r\n        {{user.skillname || ''}}\r\n      </Button>\r\n      <div slot=\"content\">\r\n        <template v-if=\"user.skills.length === 0\">\r\n          \r\n        </template>\r\n        <template v-else>\r\n          <p v-for=\"item in user.skills\" :key=\"item._id\">\r\n            <a @click=\"() => {\r\n              $set(user, 'skillid', item._id);\r\n              $set(user, 'skillname', item.name);\r\n            }\" style=\"width:100%;\">\r\n              {{item.name}}\r\n            </a>\r\n          </p>\r\n        </template>\r\n      </div>\r\n    </Poptip>\r\n    <!--   -->\r\n    <div class=\"br\" />\r\n    <!--   -->\r\n    <div v-if=\"'object' == typeof user.message\">\r\n      [{{ user.message.time }}]\r\n      &nbsp;\r\n      {{'' + user.message.round_num + ''}}\r\n      &nbsp;\r\n      <div style=\"display:inline-block\" v-html=\"user.message.msg.join(',')\" />\r\n    </div>\r\n    <!--   -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nlet messageTime\r\nimport GameApi from '@libs/YunDingOnlineSDK.js'\r\nimport regHooks from '@libs/regHooks.js'\r\nimport configData from '@/config.js'\r\nimport { sleep } from '@libs/tools'\r\nexport default {\r\n  name: 'User',\r\n  data () {\r\n    return {\r\n      game: {},\r\n      user: null,\r\n      config: configData,\r\n      hightcbtTaskId: '5f01ee501a863c76d650525c'\r\n    }\r\n  },\r\n  watch: {\r\n    user: {\r\n      deep: true,\r\n      handler (user) {\r\n        let combatName = null\r\n        if (user && user.screens && user.team) {\r\n          if (user.team.combat) {\r\n            const combat = user.screens.find(scr => scr._id === user.team.combat)\r\n            if (combat) combatName = combat.name\r\n          }\r\n        }\r\n        user.combatName = combatName\r\n        this.saveStorageUserInfo(user)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    toMap () {\r\n      const user = this.user\r\n      const maps = configData.maps\r\n      if (user && user.map) {\r\n        const { up, next } = maps.find(mp => mp.id === user.map.id)\r\n        const toMaps = ([...up, ...next]).map(id => {\r\n          const name = maps.find(mp => mp.id === id).name\r\n          return { id, name }\r\n        })\r\n        return toMaps\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    waBao () {\r\n      const goods = this.user.goods\r\n      const maps = configData.maps\r\n      if (!goods) return []\r\n      const btMaps = goods.filter(gds => !!gds.map).map(gds => ({\r\n        id: gds.map,\r\n        btId: gds.id,\r\n        name: maps.find(mp => mp.id === gds.map).name\r\n      }));\r\n      return btMaps\r\n    },\r\n    currentWaBao () {\r\n      return this.waBao.find(wb => wb.id === this.user.map.id)\r\n    },\r\n    unusecbt () {\r\n      const goods = this.user.goods\r\n      if (!goods) return null\r\n      const unuse = goods.filter(gds => gds.unusecbt)\r\n      if (unuse.length === 0) return null\r\n      const unusecbt = {\r\n        normal: unuse.find(usc => !usc.highcbt),\r\n        high: unuse.find(usc => usc.highcbt)\r\n      }\r\n      return unusecbt\r\n    },\r\n    hightcbtTask () {\r\n      const userTasks = this.user.userTasks\r\n      if (!userTasks) return null\r\n      return this.user.userTasks.find(ust => ust.task._id === this.hightcbtTaskId)\r\n    }\r\n  },\r\n  mounted () {\r\n    regHooks(this)\r\n\r\n    const { email, password } = this.$route.params;\r\n    this.initUser(email, password);\r\n\r\n    // 1\r\n    setInterval(() => {\r\n      const now = Date.now()\r\n      if (now - messageTime > 30000) {\r\n        window.location.reload();\r\n      }\r\n    }, 60000)\r\n  },\r\n  methods: {\r\n    /**\r\n     *  localStorage \r\n     * @param {*} \r\n     */\r\n    saveStorageUserInfo: function (user) {\r\n      localStorage.setItem(user.email, JSON.stringify({\r\n        fighting: user.fighting,\r\n        email: user.email,\r\n        skillid: user.skillid,\r\n        skillname: user.skillname\r\n      }));\r\n    },\r\n    /**\r\n     *  localStorage \r\n     */\r\n    getStorageUserInfo: function (email) {\r\n      const user = localStorage.getItem(email)\r\n      if (user) {\r\n        return JSON.parse(user);\r\n      }\r\n    },\r\n    /**\r\n      * \r\n      *\r\n      * @param {*} email\r\n      * @param {*} password\r\n      */\r\n    initUser: function (email, password) {\r\n      // \r\n      const game = new GameApi();\r\n      // \r\n      const user = this.getStorageUserInfo(email) || {\r\n        email,\r\n        status: '',\r\n        teams: [],\r\n        fighting: false\r\n      }\r\n\r\n      // \r\n      this.game = game;\r\n\r\n      // \r\n      this.user = user;\r\n\r\n      // \r\n      game.login(email, password);\r\n    },\r\n    // \r\n    setMessage: function (email, data) {\r\n      messageTime = Date.now()\r\n      data.time = this.getDateTime()\r\n\r\n      const msg = data.round_arr.find(dr => dr.a_name === email)\r\n      data.msg = [msg ? `${email}[${msg.process}][${msg.hurt.map(Math.floor).join(',')}]`: '']\r\n\r\n      if (data.die_arr && data.die_arr.length) {\r\n        data.msg.push(data.die_arr.map(da => `${da}`).join(','))\r\n      }\r\n\r\n      if (data.win === 1) {\r\n        data.exp.forEach((item) => {\r\n          if (item.name == email) {\r\n            data.msg.push(`[${item.exp || ''}]`)\r\n          }\r\n        })\r\n        data.player_reward.forEach((item) => {\r\n          if (item.name == email) {\r\n            if (item.mark) {\r\n              data.msg.push(item.mark)\r\n            } else {\r\n              let reward = [];\r\n              item.goods.forEach((good) => {\r\n                  reward.push(good.gname);\r\n              })\r\n              if (reward.length > 0) {\r\n                data.msg.push(`[${reward.join(',')}]`)\r\n              }\r\n            }\r\n          }\r\n        })\r\n      }\r\n      if (data.win === 2) {\r\n        data.msg.push('')\r\n      }\r\n\r\n      this.$set(this.user, 'message', data);\r\n    },\r\n    handleAllocationPoint (type) {\r\n      const pointNum = this.user.myInfo.potential_num\r\n      // \r\n      if (type === 1) {\r\n        this.game.allocationPoint(pointNum, 0, 0, 0, 0)\r\n      }\r\n      // \r\n      if (type === 2) {\r\n        this.game.allocationPoint(0, pointNum, 0, 0, 0)\r\n      }\r\n    },\r\n    async handleFationSkill (type) {\r\n      this.$Message.info('')\r\n      for (let i = 0; i < 50; i++) {\r\n        // \r\n        if (type === 1) {\r\n          this.game.repairUserArms(1)\r\n        }\r\n        // \r\n        if (type === 2) {\r\n          this.game.repairUserArms(2)\r\n        }\r\n        await sleep(100)\r\n      }\r\n      this.game.userInfo()\r\n      this.$Message.info('')\r\n    },\r\n    getDateTime () {\r\n      let date = new Date();\r\n      return 'H:i:s'.replace(/[His]/g, (full) => {\r\n        let str = '';\r\n        switch (full) {\r\n          case 'H':\r\n              str = date.getHours();\r\n              break;\r\n          case 'i':\r\n              str = date.getMinutes();\r\n              break;\r\n          case 's':\r\n              str = date.getSeconds();\r\n              break;\r\n          default:\r\n              break;\r\n        }\r\n        return str.toString().padStart(2, '0');\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.user {\r\n  width: 100%;\r\n  height: 100%;\r\n  .br {\r\n    height: 5px;\r\n    width: 100%;\r\n  }\r\n}\r\n</style>","import GameApi from './YunDingOnlineSDK'\r\n//   app \r\nexport default function (_app) {\r\n    const app = _app;\r\n\r\n    //   onLeave onAdd \r\n    let emptyCb = () => { };\r\n    emptyCb.hookMark = 'regHooks.emptyCb';\r\n    GameApi.regHookHandlers['onLeave'].push(emptyCb);\r\n    GameApi.regHookHandlers['onAdd'].push(emptyCb);\r\n\r\n    // \r\n    let loginCb = function (data) {\r\n        let user = app.user;\r\n        // \r\n        if (data.code == 500) {\r\n            user.status = \"\";\r\n            user.status_msg = \"\";\r\n            return;\r\n        } else if (data.code != 200) {\r\n            user.status = \"\";\r\n            user.status_msg = data.msg || '';\r\n            return;\r\n        }\r\n\r\n        // \r\n        if (data.token) {\r\n            user.status = '';\r\n            return;\r\n        }\r\n        user.status = '';\r\n\r\n        // \r\n        if ('object' != typeof data.data) {\r\n            return;\r\n        }\r\n\r\n        app.$set(user, 'userEqs', data.data.userEqs);\r\n        app.$set(user, 'myInfo', data.data.myInfo);\r\n        app.$set(user, 'userTasks', data.data.userTasks);\r\n        // \r\n        app.$set(user, 'map', data.data.map);\r\n\r\n        // \r\n        this.userInfo();\r\n        // \r\n        this.getTeamList(app.user.map.id);\r\n        // \r\n        app.$set(user, 'goods', []);\r\n        app.$set(user, 'goodsPage', 1);\r\n        this.getMyGoods();\r\n        // \r\n        this.getMySkill();\r\n    }\r\n    loginCb.hookMark = \"regHooks.loginCb\";\r\n    GameApi.regHookHandlers['gate.gateHandler.queryEntry'].push(loginCb);\r\n    GameApi.regHookHandlers['connector.loginHandler.login'].push(loginCb);\r\n\r\n    // \r\n    let moveToNewMapCb = function (data) {\r\n        let user = app.user;\r\n\r\n        // \r\n        app.$set(user, 'map', data.map);\r\n    };\r\n    moveToNewMapCb.hookMark = \"regHooks.moveToNewMapCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.moveToNewMap'].push(moveToNewMapCb);\r\n\r\n    // \r\n    let createdTeamCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        // \r\n        app.$set(app.user, 'team', {\r\n            leader: this.email,\r\n            users: []\r\n        });\r\n\r\n        app.$Message.success('');\r\n    }\r\n    createdTeamCb.hookMark = \"regHooks.createdTeamCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.createdTeam'].push(createdTeamCb);\r\n\r\n    // \r\n    let leaveTeamCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$delete(app.user, 'team');\r\n        app.$Message.info('');\r\n\r\n        app.game.getTeamList(app.user.map.id)\r\n    }\r\n    leaveTeamCb.hookMark = \"regHooks.leaveTeamCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.leaveTeam'].push(leaveTeamCb);\r\n\r\n    // \r\n    let addTeamCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        // \r\n        let combat = data.data.combat || null,\r\n            leader = data.data.users[0].nickname,\r\n            users = data.data.users;\r\n\r\n        for (let i = 0; i < this.user_info.screens.length; i++) {\r\n            const screen = this.user_info.screens[i];\r\n            if (screen._id == combat) {\r\n                combat = screen.name;\r\n            }\r\n        }\r\n\r\n        app.$set(app.user, 'team', {\r\n            combat: combat,\r\n            leader: leader,\r\n            users: users\r\n        });\r\n        app.$Message.info('');\r\n    }\r\n    addTeamCb.hookMark = \"regHooks.addTeamCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.addTeam'].push(addTeamCb);\r\n\r\n    // \r\n    let onMyTeamReloadCb = function (data) {\r\n        if (data.code && data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        let user = app.user;\r\n\r\n        // \r\n        if (data.new_uid && !data.team && user.team) {\r\n            // \r\n            user.team.users.forEach((item, index) => {\r\n                if (item._id == data.new_uid) {\r\n                    user.team.users.splice(index, 1);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n        if (data.data || !data.team) {\r\n            if (data.data) {\r\n                app.$set(user, 'fighting', false)\r\n            }\r\n            app.$delete(user, 'team')\r\n            app.$delete(user, 'combatName')\r\n            return;\r\n        }\r\n\r\n        // \r\n        let leader = data.team.leader,\r\n            users = [];\r\n\r\n        for (let i = 0; i < data.team.users.length; i++) {\r\n            const user = data.team.users[i];\r\n            if (user._id == leader) {\r\n                leader = user.email;\r\n            }\r\n            users.push({\r\n                _id: user._id,\r\n                email: user.email,\r\n                level: user.level\r\n            })\r\n        }\r\n\r\n        app.$set(user, 'team', {\r\n            leader: leader,\r\n            users: users,\r\n            combat: data.team.combat\r\n        });\r\n\r\n        if (user.email === leader && app.user.fighting) {\r\n            this.startCombat(data.team.combat);\r\n        }\r\n    }\r\n    onMyTeamReloadCb.hookMark = \"regHooks.onMyTeamReloadCb\";\r\n    GameApi.regHookHandlers['onMyTeamReload'].push(onMyTeamReloadCb);\r\n\r\n    // \r\n    let getTeamListCb = function (data) {\r\n\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        let user = app.user;\r\n\r\n        app.$set(user, 'screens', data.data.screens);\r\n        app.$set(user, 'teams', data.data.teams.filter(ts => ts.users.length !== ((ts.combat || {}).player_num)));\r\n    }\r\n    getTeamListCb.hookMark = \"regHooks.getTeamListCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.getTeamList'].push(getTeamListCb);\r\n\r\n    // \r\n    let switchCombatScreenCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        app.$Message.success(\"\");\r\n        app.game.getTeamList(app.user.map.id)\r\n    }\r\n    switchCombatScreenCb.hookMark = \"regHooks.switchCombatScreenCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.switchCombatScreen'].push(switchCombatScreenCb);\r\n\r\n    // \r\n    let onStartBatCb = function (data) {\r\n        const user = app.user\r\n        this.roundOperating(user.skilltype || '1', user.skillid || '1', '', user.team._id);\r\n    }\r\n    onStartBatCb.hookMark = \"regHooks.onStartBatCb\";\r\n    GameApi.regHookHandlers['onStartBat'].push(onStartBatCb);\r\n\r\n    // \r\n    let onRoundBatEndCb = function (data) {\r\n        // \r\n        // data.data.win \r\n        const user = app.user\r\n        if (user.myInfo.hp_store < 5000) {\r\n            this.byGoodsToSystem(2, '5eef5b6e0faad0b123d709c5');\r\n        }\r\n        if (user.myInfo.mp_store < 5000) {\r\n            this.byGoodsToSystem(2, '5eef5d140faad0b123d709c6');\r\n        }\r\n        if (user.fighting) {\r\n            this.startCombat(user.team.combat);\r\n        }\r\n\r\n        // \r\n        app.setMessage(this.email, data.data);\r\n        this.userInfo();\r\n    }\r\n    onRoundBatEndCb.hookMark = \"regHooks.onRoundBatEndCb\";\r\n    GameApi.regHookHandlers['onRoundBatEnd'].push(onRoundBatEndCb);\r\n\r\n    // \r\n    let roundOperatingCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n    }\r\n    roundOperatingCb.hookMark = \"regHooks.roundOperatingCb\";\r\n    GameApi.regHookHandlers['connector.teamHandler.roundOperating'].push(roundOperatingCb);\r\n\r\n    // \r\n    let getMyGoodsCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n\r\n        let flag = true;\r\n        for (let i = 0; i < data.data.goods.length; i++) {\r\n            const good = data.data.goods[i];\r\n            if (flag && good.goods && good.goods.info && good.goods.info.indexOf('') > -1) {\r\n                this.useGoods(good._id);\r\n                flag = false;\r\n            } else {\r\n                let map, unusecbt, highcbt\r\n                // \r\n                if (good.name && good.expand) {\r\n                    map = JSON.parse(good.expand).map\r\n                } else if ((good.name || good.goods.name).indexOf('') > -1) {\r\n                    if ((good.name || good.goods.name).indexOf('') > -1) {\r\n                        highcbt = true\r\n                    }\r\n                    unusecbt = true\r\n                }\r\n                app.user.goods.push({\r\n                    id: good._id,\r\n                    num: good.count,\r\n                    map,\r\n                    unusecbt,\r\n                    highcbt,\r\n                    name: good.name || good.goods.name\r\n                });\r\n            }\r\n        }\r\n\r\n        if (app.user.goods.length !== data.data.count) {\r\n            this.getMyGoods(++app.user.goodsPage);\r\n        }\r\n    }\r\n    getMyGoodsCb.hookMark = \"regHooks.getMyGoodsCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getMyGoods'].push(getMyGoodsCb);\r\n\r\n    // \r\n    let byGoodsToSystemCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success('');\r\n\r\n        // \r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    byGoodsToSystemCb.hookMark = \"regHooks.byGoodsToSystemCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.byGoodsToSystem'].push(byGoodsToSystemCb);\r\n\r\n    // \r\n    let useGoodsCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n        // \r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    useGoodsCb.hookMark = \"regHooks.useGoodsCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.useGoods'].push(useGoodsCb);\r\n\r\n    // \r\n    let upPlayerLevelCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n    }\r\n    upPlayerLevelCb.hookMark = \"regHooks.upPlayerLevelCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.upPlayerLevel'].push(upPlayerLevelCb);\r\n\r\n    // \r\n    let userInfoCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        data.user.nextExp = data.nextLevelGetExp\r\n        let user = app.user;\r\n        app.$set(user, 'myInfo', data.user);\r\n    }\r\n    userInfoCb.hookMark = \"regHooks.userInfoCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.userInfo'].push(userInfoCb);\r\n\r\n    // \r\n    let getMySkillCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$set(app.user, 'skills', data.data.skill)\r\n    }\r\n    getMySkillCb.hookMark = \"regHooks.getMySkillCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getMySkill'].push(getMySkillCb);\r\n\r\n    // \r\n    let allocationPointCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        this.userInfo();\r\n    }\r\n    allocationPointCb.hookMark = \"regHooks.allocationPointCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.allocationPoint'].push(allocationPointCb);\r\n\r\n    // \r\n    let getCopyTaskCb = function (data) {\r\n        console.log(data)\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n    }\r\n    getCopyTaskCb.hookMark = \"regHooks.getCopyTaskCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.getCopyTask'].push(getCopyTaskCb);\r\n\r\n    // \r\n    let getUserTaskCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$set(app.user, 'userTasks', data.data);\r\n    }\r\n    getUserTaskCb.hookMark = \"regHooks.getUserTaskCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.getUserTask'].push(getUserTaskCb);\r\n    \r\n    // \r\n    let payUserTaskCb = function (data) {\r\n        console.log(data)\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success('');\r\n        // \r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n        this.getUserTask();\r\n    }\r\n    payUserTaskCb.hookMark = \"regHooks.payUserTaskCb\";\r\n    GameApi.regHookHandlers['connector.playerHandler.payUserTask'].push(payUserTaskCb);\r\n\r\n    // \r\n    let wbtCb = function (data) {\r\n        if (data.code != 200) {\r\n            app.$Message.error(data.msg);\r\n            return;\r\n        }\r\n        app.$Message.success(data.msg);\r\n\r\n        // \r\n        app.user.goods = [];\r\n        app.user.goodsPage = 1;\r\n        this.getMyGoods();\r\n    }\r\n    wbtCb.hookMark = \"regHooks.wbtCb\";\r\n    GameApi.regHookHandlers['connector.userHandler.wbt'].push(wbtCb);\r\n}\r\n","export default {\r\n  \"core\": {\r\n      \"ext_url\": \"https://github.com/imdong/YunDingOnlineSDK/raw/master/auto_login.user.js\",\r\n      \"official_login\": \"http://yundingxx.com:3366/login\"\r\n  },\r\n  \"maps\": [\r\n      {\r\n          \"id\": 1,\r\n          \"name\": \"\",\r\n          \"is_city\": true,\r\n          \"up\": [],\r\n          \"next\": [\r\n              2,\r\n              3\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 2,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              1\r\n          ],\r\n          \"next\": [\r\n              4\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 3,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              1\r\n          ],\r\n          \"next\": [\r\n              5\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 4,\r\n          \"name\": \"-\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              2\r\n          ],\r\n          \"next\": []\r\n      },\r\n      {\r\n          \"id\": 5,\r\n          \"name\": \"\",\r\n          \"is_city\": true,\r\n          \"up\": [\r\n              3\r\n          ],\r\n          \"next\": [\r\n              6,\r\n              7,\r\n              8,\r\n              9\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 6,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              5\r\n          ],\r\n          \"next\": [\r\n              4\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 7,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              5\r\n          ],\r\n          \"next\": [\r\n              10\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 8,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              5\r\n          ],\r\n          \"next\": [\r\n              11\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 9,\r\n          \"name\": \"\",\r\n          \"is_city\": true,\r\n          \"up\": [\r\n              5\r\n          ],\r\n          \"next\": [\r\n              12\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 10,\r\n          \"name\": \"\",\r\n          \"is_city\": true,\r\n          \"up\": [\r\n              7\r\n          ],\r\n          \"next\": [\r\n              13\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 11,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              8\r\n          ],\r\n          \"next\": []\r\n      },\r\n      {\r\n          \"id\": 12,\r\n          \"name\": \"\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              9\r\n          ],\r\n          \"next\": []\r\n      },\r\n      {\r\n          \"id\": 13,\r\n          \"name\": \"-\",\r\n          \"is_city\": false,\r\n          \"up\": [\r\n              10\r\n          ],\r\n          \"next\": [\r\n              14\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 14,\r\n          \"name\": \"\",\r\n          \"is_city\": true,\r\n          \"up\": [\r\n              13\r\n          ],\r\n          \"next\": [\r\n              15,\r\n              16\r\n          ]\r\n      },\r\n      {\r\n          \"id\": 15,\r\n          \"name\": \"-\",\r\n          \"is_city\": true,\r\n          \"up\": [\r\n              14\r\n          ],\r\n          \"next\": []\r\n      },\r\n      {\r\n          \"id\": 16,\r\n          \"name\": \"\",\r\n          \"is_city\": true,\r\n          \"up\": [\r\n              10\r\n          ],\r\n          \"next\": [\r\n              14\r\n          ]\r\n      }\r\n  ]\r\n}","export const sleep = function (method) {\r\n  const start = Number(Date.now())\r\n  return new Promise((resolve) => {\r\n    (function selfRecursion () {\r\n      setTimeout(() => {\r\n        let flag\r\n        if (typeof method === 'function') {\r\n          flag = method()\r\n        }\r\n        if (typeof method === 'number') {\r\n          flag = Number(Date.now()) - start < method\r\n        }\r\n        if (flag) {\r\n          selfRecursion()\r\n        } else {\r\n          resolve()\r\n        }\r\n      }, 10)\r\n    })()\r\n  })\r\n}","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=fc95ea32&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=fc95ea32&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fc95ea32\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../views/Home.vue'\nimport User from '../views/User.vue'\n\nVue.use(VueRouter)\n\n  const routes = [\n    {\n      path: '/',\n      name: 'Home',\n      component: Home\n    },\n    {\n      path: '/user/:email/:password',\n      name: 'user',\n      component: User\n    }\n]\n\nconst router = new VueRouter({\n  routes\n})\n\nexport default router\n","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n  },\n  mutations: {\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\nimport viewDesign from 'view-design'\r\nimport 'view-design/dist/styles/iview.css'\r\n\r\nVue.use(viewDesign)\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  router,\r\n  store,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=18fc0c10&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=18fc0c10&lang=less&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"","define(function (exports, require, module) {\r\n    (function (exports, ByteArray, global) {\r\n        var Protocol = exports;\r\n\r\n        var PKG_HEAD_BYTES = 4;\r\n        var MSG_FLAG_BYTES = 1;\r\n        var MSG_ROUTE_CODE_BYTES = 2;\r\n        var MSG_ID_MAX_BYTES = 5;\r\n        var MSG_ROUTE_LEN_BYTES = 1;\r\n\r\n        var MSG_ROUTE_CODE_MAX = 0xffff;\r\n\r\n        var MSG_COMPRESS_ROUTE_MASK = 0x1;\r\n        var MSG_TYPE_MASK = 0x7;\r\n\r\n        var Package = Protocol.Package = {};\r\n        var Message = Protocol.Message = {};\r\n\r\n        Package.TYPE_HANDSHAKE = 1;\r\n        Package.TYPE_HANDSHAKE_ACK = 2;\r\n        Package.TYPE_HEARTBEAT = 3;\r\n        Package.TYPE_DATA = 4;\r\n        Package.TYPE_KICK = 5;\r\n\r\n        Message.TYPE_REQUEST = 0;\r\n        Message.TYPE_NOTIFY = 1;\r\n        Message.TYPE_RESPONSE = 2;\r\n        Message.TYPE_PUSH = 3;\r\n\r\n        /**\r\n     * pomele client encode\r\n     * id message id;\r\n     * route message route\r\n     * msg message body\r\n     * socketio current support string\r\n     */\r\n        Protocol.strencode = function (str) {\r\n            var byteArray = new ByteArray(str.length * 3);\r\n            var offset = 0;\r\n            for (var i = 0; i < str.length; i++) {\r\n                var charCode = str.charCodeAt(i);\r\n                var codes = null;\r\n                if (charCode <= 0x7f) {\r\n                    codes = [charCode];\r\n                } else if (charCode <= 0x7ff) {\r\n                    codes = [0xc0 | (charCode >> 6), 0x80 | (charCode & 0x3f)];\r\n                } else {\r\n                    codes = [0xe0 | (charCode >> 12), 0x80 | ((charCode & 0xfc0) >> 6), 0x80 | (charCode & 0x3f)];\r\n                }\r\n                for (var j = 0; j < codes.length; j++) {\r\n                    byteArray[offset] = codes[j];\r\n                    ++offset;\r\n                }\r\n            }\r\n            var _buffer = new ByteArray(offset);\r\n            copyArray(_buffer, 0, byteArray, 0, offset);\r\n            return _buffer;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * client decode\r\n     * msg String data\r\n     * return Message Object\r\n     */\r\n        Protocol.strdecode = function (buffer) {\r\n            var bytes = new ByteArray(buffer);\r\n            var array = [];\r\n            var offset = 0;\r\n            var charCode = 0;\r\n            var end = bytes.length;\r\n            while (offset < end) {\r\n                if (bytes[offset] < 128) {\r\n                    charCode = bytes[offset];\r\n                    offset += 1;\r\n                } else if (bytes[offset] < 224) {\r\n                    charCode = ((bytes[offset] & 0x3f) << 6) + (bytes[offset + 1] & 0x3f);\r\n                    offset += 2;\r\n                } else {\r\n                    charCode = ((bytes[offset] & 0x0f) << 12) + ((bytes[offset + 1] & 0x3f) << 6) + (bytes[offset + 2] & 0x3f);\r\n                    offset += 3;\r\n                }\r\n                array.push(charCode);\r\n            }\r\n            return String.fromCharCode.apply(null, array);\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Package protocol encode.\r\n     *\r\n     * Pomelo package format:\r\n     * +------+-------------+------------------+\r\n     * | type | body length |       body       |\r\n     * +------+-------------+------------------+\r\n     *\r\n     * Head: 4bytes\r\n     *   0: package type,\r\n     *      1 - handshake,\r\n     *      2 - handshake ack,\r\n     *      3 - heartbeat,\r\n     *      4 - data\r\n     *      5 - kick\r\n     *   1 - 3: big-endian body length\r\n     * Body: body length bytes\r\n     *\r\n     * @param  {Number}    type   package type\r\n     * @param  {ByteArray} body   body content in bytes\r\n     * @return {ByteArray}        new byte array that contains encode result\r\n     */\r\n        Package.encode = function (type, body) {\r\n            var length = body ? body.length : 0;\r\n            var buffer = new ByteArray(PKG_HEAD_BYTES + length);\r\n            var index = 0;\r\n            buffer[index++] = type & 0xff;\r\n            buffer[index++] = (length >> 16) & 0xff;\r\n            buffer[index++] = (length >> 8) & 0xff;\r\n            buffer[index++] = length & 0xff;\r\n            if (body) {\r\n                copyArray(buffer, index, body, 0, length);\r\n            }\r\n            return buffer;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Package protocol decode.\r\n     * See encode for package format.\r\n     *\r\n     * @param  {ByteArray} buffer byte array containing package content\r\n     * @return {Object}           {type: package type, buffer: body byte array}\r\n     */\r\n        Package.decode = function (buffer) {\r\n            var offset = 0;\r\n            var bytes = new ByteArray(buffer);\r\n            var length = 0;\r\n            var rs = [];\r\n            while (offset < bytes.length) {\r\n                var type = bytes[offset++];\r\n                length = ((bytes[offset++]) << 16 | (bytes[offset++]) << 8 | bytes[offset++]) >>> 0;\r\n                var body = length ? new ByteArray(length) : null;\r\n                copyArray(body, 0, bytes, offset, length);\r\n                offset += length;\r\n                rs.push({\r\n                    'type': type,\r\n                    'body': body\r\n                });\r\n            }\r\n            return rs.length === 1 ? rs[0] : rs;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Message protocol encode.\r\n     *\r\n     * @param  {Number} id            message id\r\n     * @param  {Number} type          message type\r\n     * @param  {Number} compressRoute whether compress route\r\n     * @param  {Number|String} route  route code or route string\r\n     * @param  {Buffer} msg           message body bytes\r\n     * @return {Buffer}               encode result\r\n     */\r\n        Message.encode = function (id, type, compressRoute, route, msg) {\r\n            // caculate message max length\r\n            var idBytes = msgHasId(type) ? caculateMsgIdBytes(id) : 0;\r\n            var msgLen = MSG_FLAG_BYTES + idBytes;\r\n\r\n            if (msgHasRoute(type)) {\r\n                if (compressRoute) {\r\n                    if (typeof route !== 'number') {\r\n                        throw new Error('error flag for number route!');\r\n                    }\r\n                    msgLen += MSG_ROUTE_CODE_BYTES;\r\n                } else {\r\n                    msgLen += MSG_ROUTE_LEN_BYTES;\r\n                    if (route) {\r\n                        route = Protocol.strencode(route);\r\n                        if (route.length > 255) {\r\n                            throw new Error('route maxlength is overflow');\r\n                        }\r\n                        msgLen += route.length;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (msg) {\r\n                msgLen += msg.length;\r\n            }\r\n\r\n            var buffer = new ByteArray(msgLen);\r\n            var offset = 0;\r\n\r\n            // add flag\r\n            offset = encodeMsgFlag(type, compressRoute, buffer, offset);\r\n\r\n            // add message id\r\n            if (msgHasId(type)) {\r\n                offset = encodeMsgId(id, buffer, offset);\r\n            }\r\n\r\n            // add route\r\n            if (msgHasRoute(type)) {\r\n                offset = encodeMsgRoute(compressRoute, route, buffer, offset);\r\n            }\r\n\r\n            // add body\r\n            if (msg) {\r\n                offset = encodeMsgBody(msg, buffer, offset);\r\n            }\r\n\r\n            return buffer;\r\n        }\r\n            ;\r\n\r\n        /**\r\n     * Message protocol decode.\r\n     *\r\n     * @param  {Buffer|Uint8Array} buffer message bytes\r\n     * @return {Object}            message object\r\n     */\r\n        Message.decode = function (buffer) {\r\n            var bytes = new ByteArray(buffer);\r\n            var bytesLen = bytes.length || bytes.byteLength;\r\n            var offset = 0;\r\n            var id = 0;\r\n            var route = null;\r\n\r\n            // parse flag\r\n            var flag = bytes[offset++];\r\n            var compressRoute = flag & MSG_COMPRESS_ROUTE_MASK;\r\n            var type = (flag >> 1) & MSG_TYPE_MASK;\r\n\r\n            // parse id\r\n            if (msgHasId(type)) {\r\n                var m = parseInt(bytes[offset]);\r\n                var i = 0;\r\n                do {\r\n                    var m = parseInt(bytes[offset]);\r\n                    id = id + ((m & 0x7f) * Math.pow(2, (7 * i)));\r\n                    offset++;\r\n                    i++;\r\n                } while (m >= 128);\r\n            }\r\n\r\n            // parse route\r\n            if (msgHasRoute(type)) {\r\n                if (compressRoute) {\r\n                    route = (bytes[offset++]) << 8 | bytes[offset++];\r\n                } else {\r\n                    var routeLen = bytes[offset++];\r\n                    if (routeLen) {\r\n                        route = new ByteArray(routeLen);\r\n                        copyArray(route, 0, bytes, offset, routeLen);\r\n                        route = Protocol.strdecode(route);\r\n                    } else {\r\n                        route = '';\r\n                    }\r\n                    offset += routeLen;\r\n                }\r\n            }\r\n\r\n            // parse body\r\n            var bodyLen = bytesLen - offset;\r\n            var body = new ByteArray(bodyLen);\r\n\r\n            copyArray(body, 0, bytes, offset, bodyLen);\r\n\r\n            return {\r\n                'id': id,\r\n                'type': type,\r\n                'compressRoute': compressRoute,\r\n                'route': route,\r\n                'body': body\r\n            };\r\n        }\r\n            ;\r\n\r\n        var copyArray = function (dest, doffset, src, soffset, length) {\r\n            if ('function' === typeof src.copy) {\r\n                // Buffer\r\n                src.copy(dest, doffset, soffset, soffset + length);\r\n            } else {\r\n                // Uint8Array\r\n                for (var index = 0; index < length; index++) {\r\n                    dest[doffset++] = src[soffset++];\r\n                }\r\n            }\r\n        };\r\n\r\n        var msgHasId = function (type) {\r\n            return type === Message.TYPE_REQUEST || type === Message.TYPE_RESPONSE;\r\n        };\r\n\r\n        var msgHasRoute = function (type) {\r\n            return type === Message.TYPE_REQUEST || type === Message.TYPE_NOTIFY || type === Message.TYPE_PUSH;\r\n        };\r\n\r\n        var caculateMsgIdBytes = function (id) {\r\n            var len = 0;\r\n            do {\r\n                len += 1;\r\n                id >>= 7;\r\n            } while (id > 0); return len;\r\n        };\r\n\r\n        var encodeMsgFlag = function (type, compressRoute, buffer, offset) {\r\n            if (type !== Message.TYPE_REQUEST && type !== Message.TYPE_NOTIFY && type !== Message.TYPE_RESPONSE && type !== Message.TYPE_PUSH) {\r\n                throw new Error('unkonw message type: ' + type);\r\n            }\r\n\r\n            buffer[offset] = (type << 1) | (compressRoute ? 1 : 0);\r\n\r\n            return offset + MSG_FLAG_BYTES;\r\n        };\r\n\r\n        var encodeMsgId = function (id, buffer, offset) {\r\n            do {\r\n                var tmp = id % 128;\r\n                var next = Math.floor(id / 128);\r\n\r\n                if (next !== 0) {\r\n                    tmp = tmp + 128;\r\n                }\r\n                buffer[offset++] = tmp;\r\n\r\n                id = next;\r\n            } while (id !== 0);\r\n            return offset;\r\n        };\r\n\r\n        var encodeMsgRoute = function (compressRoute, route, buffer, offset) {\r\n            if (compressRoute) {\r\n                if (route > MSG_ROUTE_CODE_MAX) {\r\n                    throw new Error('route number is overflow');\r\n                }\r\n\r\n                buffer[offset++] = (route >> 8) & 0xff;\r\n                buffer[offset++] = route & 0xff;\r\n            } else {\r\n                if (route) {\r\n                    buffer[offset++] = route.length & 0xff;\r\n                    copyArray(buffer, offset, route, 0, route.length);\r\n                    offset += route.length;\r\n                } else {\r\n                    buffer[offset++] = 0;\r\n                }\r\n            }\r\n\r\n            return offset;\r\n        };\r\n\r\n        var encodeMsgBody = function (msg, buffer, offset) {\r\n            copyArray(buffer, offset, msg, 0, msg.length);\r\n            return offset + msg.length;\r\n        };\r\n\r\n        module.exports = Protocol;\r\n        if (typeof (window) != \"undefined\") {\r\n            window.Protocol = Protocol;\r\n        }\r\n    }\r\n    )(typeof (window) == \"undefined\" ? module.exports : (this.Protocol = {}), typeof (window) == \"undefined\" ? Buffer : Uint8Array, this);\r\n\r\n});\r\n"],"sourceRoot":""}